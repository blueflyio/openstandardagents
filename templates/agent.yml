# OSSA v0.1.3 Agent Specification
# Open Standards for Scalable Agents
# https://gitlab.com/bluefly-ai/ossa-standard

ossa:
  version: "0.1.3"
  conformance: "governed"  # core | governed | advanced
  
agent:
  id: "agent-unique-id"
  name: "Agent Display Name"
  version: "1.0.0"
  description: "Comprehensive agent description explaining capabilities and purpose"
  
  metadata:
    created: "2025-01-01T00:00:00Z"
    modified: "2025-01-01T00:00:00Z"
    authors:
      - name: "Bluefly AI Team"
        email: "ai@bluefly.io"
        organization: "Bluefly.io"
    license: "Apache-2.0"
    tags:
      - "ai"
      - "automation"
      - "enterprise"
    categories:
      - "development"
      - "orchestration"
    
  capabilities:
    primary:
      - id: "capability-1"
        name: "Primary Capability"
        description: "Detailed description of what this capability provides"
        version: "1.0.0"
    secondary:
      - id: "capability-2"
        name: "Secondary Capability"
        description: "Additional capability description"
    experimental:
      - id: "capability-3"
        name: "Experimental Feature"
        description: "Beta or experimental capabilities"
        stability: "beta"
        
  requirements:
    runtime:
      - node: ">=20.0.0"
      - python: ">=3.11"
    services:
      - name: "llm-gateway"
        version: ">=1.0.0"
        endpoint: "http://localhost:4000"
        required: true
      - name: "vector-database"
        version: ">=0.1.0"
        endpoint: "http://localhost:6333"
        required: false
    resources:
      memory: "512Mi"
      cpu: "500m"
      storage: "1Gi"
      
  interfaces:
    api:
      openapi: "./openapi.yaml"
      base_url: "http://localhost:4021"
      authentication:
        type: "bearer"
        header: "Authorization"
    
    protocols:
      - type: "http"
        version: "1.1"
        endpoints:
          health: "/health"
          metrics: "/metrics"
          ready: "/ready"
      - type: "websocket"
        version: "13"
        endpoint: "/ws"
      - type: "grpc"
        version: "1.50"
        proto: "./proto/agent.proto"
        
  frameworks:
    mcp:
      enabled: true
      server_name: "agent-mcp-server"
      tools:
        - name: "process_task"
          description: "Process incoming tasks"
          parameters:
            task:
              type: "string"
              required: true
        - name: "get_status"
          description: "Get agent status"
      prompts:
        - name: "default"
          description: "Default agent prompt"
          
    langchain:
      enabled: true
      chain_type: "agent"
      model: "gpt-4"
      tools:
        - "web_search"
        - "calculator"
        - "code_executor"
      memory:
        type: "conversation_buffer"
        max_tokens: 2000
        
    crewai:
      enabled: true
      role: "Senior Developer"
      goal: "Deliver high-quality code"
      backstory: "Experienced developer with expertise in AI systems"
      tools:
        - "code_review"
        - "documentation"
      max_iterations: 10
      
    autogen:
      enabled: true
      agent_type: "assistant"
      system_message: "You are a helpful AI assistant"
      human_input_mode: "NEVER"
      max_consecutive_auto_reply: 5
      
  discovery:
    uadp:
      enabled: true
      registry: "https://registry.bluefly.io/agents"
      heartbeat_interval: 30
      metadata:
        region: "us-east-1"
        environment: "production"
        capabilities_index: true
    local:
      enabled: true
      multicast_group: "239.255.255.250"
      port: 1900
      
  orchestration:
    coordination:
      type: "hierarchical"  # hierarchical | peer-to-peer | hybrid
      parent_agent: "orchestrator-supreme"
      child_agents: []
    communication:
      type: "async"  # sync | async | streaming
      protocol: "json-rpc"
      timeout: 30000
    workflow:
      engine: "eca"  # eca | bpmn | state-machine
      definition: "./workflows/agent.yaml"
      
  monitoring:
    metrics:
      enabled: true
      endpoint: "/metrics"
      format: "prometheus"
      interval: 60
    logging:
      level: "info"  # debug | info | warn | error
      format: "json"
      outputs:
        - "stdout"
        - "file:///var/log/agent.log"
    tracing:
      enabled: true
      provider: "opentelemetry"
      endpoint: "http://localhost:4317"
      sample_rate: 0.1
      
  security:
    authentication:
      required: true
      methods:
        - "bearer_token"
        - "api_key"
        - "oauth2"
    authorization:
      type: "rbac"
      roles:
        - name: "admin"
          permissions: ["*"]
        - name: "user"
          permissions: ["read", "execute"]
    encryption:
      at_rest: true
      in_transit: true
      algorithms:
        - "AES-256-GCM"
        - "RSA-2048"
    rate_limiting:
      enabled: true
      requests_per_minute: 100
      burst: 150
      
  compliance:
    frameworks:
      iso_42001:
        enabled: true
        controls:
          - "AI-GOV-001"
          - "AI-RISK-002"
        audit_frequency: "quarterly"
      nist_ai_rmf:
        enabled: true
        functions:
          - "govern"
          - "map"
          - "measure"
          - "manage"
      eu_ai_act:
        enabled: true
        risk_level: "limited"  # minimal | limited | high | unacceptable
        transparency_obligations: true
    data_governance:
      retention_days: 90
      pii_handling: "anonymize"  # anonymize | pseudonymize | encrypt
      data_residency: ["US", "EU"]
      
  deployment:
    container:
      image: "bluefly/agent:latest"
      registry: "registry.bluefly.io"
      pull_policy: "IfNotPresent"
    kubernetes:
      namespace: "ai-agents"
      replicas: 2
      service_type: "ClusterIP"
    docker_compose:
      file: "./docker-compose.yaml"
      network: "agent-network"
      
  lifecycle:
    startup:
      commands:
        - "npm install"
        - "npm run build"
      health_check:
        initial_delay: 10
        interval: 30
        timeout: 5
        retries: 3
    shutdown:
      grace_period: 30
      cleanup_commands:
        - "npm run cleanup"
    updates:
      strategy: "rolling"  # rolling | blue-green | canary
      auto_update: false
      
  extensions:
    custom_fields:
      organization: "bluefly"
      cost_center: "AI-001"
      business_unit: "Engineering"
    plugins:
      - name: "custom-auth"
        version: "1.0.0"
        config:
          endpoint: "https://auth.bluefly.io"
    integrations:
      - name: "slack"
        webhook: "${SLACK_WEBHOOK_URL}"
      - name: "gitlab"
        api_token: "${GITLAB_TOKEN}"