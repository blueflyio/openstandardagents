{
  "$id": "https://ossa.dev/schema/extensions/a2a.extension.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OSSA A2A Protocol Extension",
  "description": "Agent-to-Agent protocol support for multi-agent orchestration",
  "type": "object",
  "properties": {
    "enabled": {
      "type": "boolean",
      "default": false,
      "description": "Enable A2A protocol support"
    },
    "version": {
      "type": "string",
      "enum": ["1.0", "1.1"],
      "default": "1.0",
      "description": "A2A protocol version"
    },
    "agent_card": {
      "type": "object",
      "description": "Agent card for A2A discovery",
      "properties": {
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Public URL where agent card is published"
        },
        "name": {
          "type": "string",
          "description": "Human-readable agent name"
        },
        "description": {
          "type": "string",
          "description": "Agent description"
        },
        "capabilities": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of capabilities this agent provides"
        },
        "skills": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of skills this agent has"
        },
        "input_modes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["text", "audio", "image", "video", "file"]
          },
          "description": "Supported input modalities"
        },
        "output_modes": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["text", "audio", "image", "video", "file"]
          },
          "description": "Supported output modalities"
        }
      }
    },
    "messaging": {
      "type": "object",
      "description": "Messaging configuration",
      "properties": {
        "protocol": {
          "type": "string",
          "enum": ["http", "grpc", "websocket"],
          "default": "http",
          "description": "Transport protocol"
        },
        "format": {
          "type": "string",
          "enum": ["json-rpc", "protobuf", "json"],
          "default": "json-rpc",
          "description": "Message format"
        },
        "streaming": {
          "type": "boolean",
          "default": false,
          "description": "Enable streaming responses"
        }
      }
    },
    "discovery": {
      "type": "object",
      "description": "Agent discovery configuration",
      "properties": {
        "method": {
          "type": "string",
          "enum": ["static", "registry", "broadcast", "dns"],
          "default": "static",
          "description": "Discovery method"
        },
        "registry_url": {
          "type": "string",
          "format": "uri",
          "description": "Registry URL for agent discovery"
        },
        "refresh_interval_seconds": {
          "type": "integer",
          "minimum": 1,
          "default": 300,
          "description": "Discovery refresh interval"
        }
      }
    },
    "authentication": {
      "type": "object",
      "description": "A2A authentication settings",
      "properties": {
        "method": {
          "type": "string",
          "enum": ["none", "mtls", "jwt", "api-key"],
          "default": "none"
        },
        "credentials_ref": {
          "type": "string",
          "description": "Reference to credentials secret"
        }
      }
    }
  },
  "additionalProperties": false
}
