# OAAS Agent Advanced Schema v1.1
# Level 4: Enterprise-grade agent with full governance and compliance
# Complete feature set for large-scale production deployments

type: object
required:
  - name
  - version
  - expertise
  - capabilities
  - openapi
properties:
  name:
    type: string
    pattern: '^[a-z0-9-]+$'
    minLength: 3
    maxLength: 50
    description: Agent identifier
    
  version:
    type: string
    pattern: '^[0-9]+\.[0-9]+\.[0-9]+$'
    description: Agent version (semantic versioning)
    
  expertise:
    type: string
    maxLength: 200
    description: Agent's primary domain expertise
    
  description:
    type: string
    maxLength: 1000
    description: Detailed agent description
    
  capabilities:
    type: array
    minItems: 1
    items:
      type: string
    description: List of agent capabilities
    
  openapi:
    type: string
    description: Path to OpenAPI specification file
    
  context_management:
    type: object
    properties:
      max_tokens:
        type: integer
        minimum: 100
        maximum: 128000
        default: 8000
        
      optimization:
        type: object
        properties:
          strategy:
            type: string
            enum: [adaptive, fixed, progressive]
            default: adaptive
          compression:
            type: boolean
            default: true
          summarization:
            type: boolean
            default: false
            
      memory:
        type: object
        properties:
          type:
            type: string
            enum: [none, short_term, long_term, persistent]
            default: short_term
          capacity:
            type: integer
            default: 10
            
  frameworks:
    type: object
    description: Framework compatibility configurations
    properties:
      langchain:
        type: object
        properties:
          enabled:
            type: boolean
          tools_format:
            type: string
          chain_type:
            type: string
            
      crewai:
        type: object
        properties:
          enabled:
            type: boolean
          role:
            type: string
          backstory:
            type: string
            
      mcp:
        type: object
        properties:
          enabled:
            type: boolean
          server_config:
            type: object
            
      autogen:
        type: object
        properties:
          enabled:
            type: boolean
          agent_type:
            type: string
            
  compliance:
    type: object
    description: Enterprise compliance configurations
    properties:
      standards:
        type: array
        items:
          type: string
          enum: [iso_42001, nist_ai_rmf, eu_ai_act, sox, hipaa, gdpr]
          
      data_handling:
        type: object
        properties:
          encryption:
            type: string
            enum: [none, at_rest, in_transit, both]
            default: both
          retention:
            type: string
            default: "30d"
          classification:
            type: array
            items:
              type: string
              enum: [public, internal, confidential, restricted]
              
      audit:
        type: object
        properties:
          enabled:
            type: boolean
            default: true
          level:
            type: string
            enum: [basic, detailed, forensic]
            default: basic
            
  integration:
    type: object
    properties:
      authentication:
        type: object
        properties:
          type:
            type: string
            enum: [none, api_key, oauth2, jwt, mtls]
            default: api_key
          config:
            type: object
            
      rate_limiting:
        type: object
        properties:
          enabled:
            type: boolean
            default: true
          requests_per_minute:
            type: integer
            default: 60
          burst:
            type: integer
            default: 100
            
      retry:
        type: object
        properties:
          enabled:
            type: boolean
            default: true
          max_attempts:
            type: integer
            default: 3
          backoff:
            type: string
            enum: [linear, exponential]
            default: exponential
            
  deployment:
    type: object
    properties:
      environments:
        type: array
        items:
          type: string
          enum: [development, staging, production]
          
      scaling:
        type: object
        properties:
          min_instances:
            type: integer
            default: 1
          max_instances:
            type: integer
            default: 10
          auto_scale:
            type: boolean
            default: false
            
      health_check:
        type: object
        properties:
          endpoint:
            type: string
            default: /health
          interval:
            type: integer
            default: 30
            
  monitoring:
    type: object
    properties:
      metrics:
        type: object
        properties:
          enabled:
            type: boolean
            default: true
          export:
            type: string
            enum: [prometheus, datadog, cloudwatch, azure_monitor]
            
      logging:
        type: object
        properties:
          level:
            type: string
            enum: [debug, info, warn, error]
            default: info
          format:
            type: string
            enum: [json, text]
            default: json
          destinations:
            type: array
            items:
              type: string
              
      tracing:
        type: object
        properties:
          enabled:
            type: boolean
            default: false
          provider:
            type: string
            enum: [jaeger, zipkin, xray]
            
  data:
    type: object
    description: Agent data configuration
    properties:
      training_data:
        type: string
        description: Path to training data
      knowledge_base:
        type: string
        description: Path to knowledge base
      examples:
        type: string
        description: Path to example interactions
      configurations:
        type: string
        description: Path to additional configurations
        
  metadata:
    type: object
    properties:
      author:
        type: string
      organization:
        type: string
      license:
        type: string
      repository:
        type: string
        format: uri
      documentation:
        type: string
        format: uri
      support:
        type: string
        format: email
      tags:
        type: array
        items:
          type: string