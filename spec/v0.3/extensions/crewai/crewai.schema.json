{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://openstandardagents.org/schemas/v0.3.5/extensions/crewai/crewai.json",
  "title": "CrewAI Extension",
  "description": "Native integration with CrewAI framework for role-based multi-agent collaboration with sequential and hierarchical processes.",
  "type": "object",
  "properties": {
    "enabled": {
      "type": "boolean",
      "default": true,
      "description": "Enable CrewAI integration"
    },
    "crew": {
      "$ref": "#/definitions/CrewConfig",
      "description": "Crew configuration"
    },
    "agent": {
      "$ref": "#/definitions/AgentConfig",
      "description": "Agent-specific configuration"
    },
    "task": {
      "$ref": "#/definitions/TaskConfig",
      "description": "Task configuration"
    },
    "process": {
      "type": "string",
      "enum": ["sequential", "hierarchical"],
      "default": "sequential",
      "description": "Crew process type"
    },
    "manager_llm": {
      "type": "object",
      "description": "Manager LLM configuration for hierarchical process"
    },
    "memory": {
      "type": "boolean",
      "default": false,
      "description": "Enable crew memory"
    },
    "cache": {
      "type": "boolean",
      "default": true,
      "description": "Enable tool result caching"
    },
    "max_rpm": {
      "type": "integer",
      "minimum": 1,
      "description": "Maximum requests per minute"
    },
    "verbose": {
      "type": "integer",
      "minimum": 0,
      "maximum": 2,
      "default": 0,
      "description": "Verbosity level (0=silent, 1=normal, 2=debug)"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "CrewConfig": {
      "type": "object",
      "description": "Crew configuration",
      "required": ["agents", "tasks"],
      "properties": {
        "agents": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "pattern": "^@[a-z0-9-]+$"
          },
          "description": "Agent IDs in the crew"
        },
        "tasks": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/CrewTask"
          },
          "description": "Tasks for the crew"
        },
        "process": {
          "type": "string",
          "enum": ["sequential", "hierarchical"],
          "default": "sequential",
          "description": "Task execution process"
        },
        "manager_agent": {
          "type": "string",
          "pattern": "^@[a-z0-9-]+$",
          "description": "Manager agent ID (for hierarchical process)"
        },
        "function_calling_llm": {
          "type": "object",
          "description": "LLM for function calling"
        },
        "config": {
          "type": "object",
          "additionalProperties": true,
          "description": "Additional crew configuration"
        }
      },
      "additionalProperties": false
    },
    "AgentConfig": {
      "type": "object",
      "description": "CrewAI agent configuration",
      "properties": {
        "role": {
          "type": "string",
          "description": "Agent role (e.g., 'Senior Developer', 'Content Writer')"
        },
        "goal": {
          "type": "string",
          "description": "Agent goal"
        },
        "backstory": {
          "type": "string",
          "description": "Agent backstory providing context"
        },
        "allow_delegation": {
          "type": "boolean",
          "default": true,
          "description": "Allow agent to delegate tasks"
        },
        "verbose": {
          "type": "boolean",
          "default": false,
          "description": "Verbose logging for agent"
        },
        "max_iter": {
          "type": "integer",
          "minimum": 1,
          "default": 15,
          "description": "Maximum iterations for task completion"
        },
        "max_rpm": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum requests per minute"
        },
        "max_execution_time": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum execution time in seconds"
        },
        "step_callback": {
          "type": "string",
          "description": "Step callback function"
        }
      },
      "additionalProperties": false
    },
    "TaskConfig": {
      "type": "object",
      "description": "CrewAI task configuration",
      "properties": {
        "description": {
          "type": "string",
          "description": "Task description"
        },
        "expected_output": {
          "type": "string",
          "description": "Expected output format/content"
        },
        "agent": {
          "type": "string",
          "pattern": "^@[a-z0-9-]+$",
          "description": "Agent ID assigned to task"
        },
        "async_execution": {
          "type": "boolean",
          "default": false,
          "description": "Execute task asynchronously"
        },
        "context": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Context task IDs"
        },
        "config": {
          "type": "object",
          "additionalProperties": true,
          "description": "Additional task configuration"
        },
        "output_file": {
          "type": "string",
          "description": "Output file path"
        },
        "output_json": {
          "type": "object",
          "description": "JSON schema for output"
        },
        "output_pydantic": {
          "type": "string",
          "description": "Pydantic model for output"
        },
        "callback": {
          "type": "string",
          "description": "Task completion callback"
        }
      },
      "additionalProperties": false
    },
    "CrewTask": {
      "type": "object",
      "description": "Crew task definition",
      "required": ["id", "description", "agent"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Task identifier"
        },
        "description": {
          "type": "string",
          "description": "Task description"
        },
        "expected_output": {
          "type": "string",
          "description": "Expected output"
        },
        "agent": {
          "type": "string",
          "pattern": "^@[a-z0-9-]+$",
          "description": "Assigned agent ID"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tools available for task"
        },
        "async_execution": {
          "type": "boolean",
          "default": false,
          "description": "Execute asynchronously"
        },
        "context": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Context task IDs"
        },
        "output_file": {
          "type": "string",
          "description": "Output file path"
        }
      },
      "additionalProperties": false
    }
  }
}
