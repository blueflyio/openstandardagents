apiVersion: ossa/v0.3.5
kind: Agent
metadata:
  name: kagent-test-agent
  description: GitLab Kagent extension conformance test agent
  version: "1.0.0"
  labels:
    platform: gitlab
    extension: kagent
spec:
  role: assistant
  type: service
  identity:
    id: kagent-test-agent
    version: "1.0.0"
  completion:
    criteria:
      - type: task_completed
        description: Task completed successfully
    timeout_ms: 180000
  checkpointing:
    enabled: true
    interval_ms: 60000
    strategy: full
  monitoring:
    metrics:
      enabled: true
      interval_ms: 30000
    alerts:
      enabled: true
  security:
    authentication:
      required: true
      method: oauth2
    authorization:
      rbac: true
  capabilities:
    - name: gitlab_operations
      description: Perform GitLab operations
  llm:
    provider: anthropic
    model: claude-3-5-sonnet-20241022
  autonomy:
    level: monitored
    approval_required: true
  constraints:
    cost:
      max_cost_per_task: 0.50
    performance:
      max_execution_time_ms: 30000
  observability:
    tracing:
      enabled: true
    metrics:
      enabled: true
    logging:
      enabled: true
  extensions:
    kagent:
      enabled: true
      version: "1.0.0"
      kubernetes:
        namespace: kagent-agents
        resourceLimits:
          cpu: "1000m"
          memory: "2Gi"
        requests:
          cpu: "500m"
          memory: "1Gi"
      gitlab_integration:
        enabled: true
        ci_cd:
          enabled: true
        issues:
          enabled: true
        merge_requests:
          enabled: true
        pipelines:
          enabled: true
      observability:
        traces:
          enabled: true
          exporter: jaeger
        metrics:
          enabled: true
          exporter: prometheus
      security:
        rbac:
          enabled: true
        secrets_management:
          provider: vault
