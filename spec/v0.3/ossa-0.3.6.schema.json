{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://openstandardagents.org/schemas/v0.3/manifest.json",
  "title": "OSSA v0.3.x Agent Manifest Schema",
  "description": "Open Standard for Software Agents (OSSA) v0.3.x series - The Next OpenAPI for Software Agents. A specification standard (not a framework) that defines contracts/metadata for production agent systems. v0.3.6 adds token efficiency (95% cost savings), GitLab Duo integration, and knowledge graph support.",
  "type": "object",
  "required": [
    "apiVersion",
    "kind",
    "metadata"
  ],
  "properties": {
    "apiVersion": {
      "type": "string",
      "pattern": "^ossa/v(0\\.3(\\.[4-9]|\\.[0-9]+(-[a-zA-Z0-9.]+)?)?|0\\.2\\.[2-9](-dev)?|1)(\\.[0-9]+)?(-[a-zA-Z0-9.]+)?$",
      "description": "OSSA API version (v0.3+ uses minor version pattern, supports Task and Workflow kinds)",
      "examples": [
        "ossa/v0.3",
        "ossa/v0.3.5",
        "ossa/v0.3.4",
        "ossa/v1"
      ]
    },
    "kind": {
      "type": "string",
      "enum": [
        "Agent",
        "Task",
        "Workflow",
        "Flow"
      ],
      "description": "Resource type: Agent (agentic loops), Task (deterministic steps), or Workflow (composition)"
    },
    "metadata": {
      "$ref": "#/definitions/Metadata"
    },
    "spec": {
      "description": "Specification varies based on kind"
    },
    "extensions": {
      "type": "object",
      "description": "Framework-specific extensions",
      "properties": {
        "mcp": {
          "$ref": "#/definitions/MCPExtension"
        },
        "skills": {
          "$ref": "#/definitions/SkillsExtension"
        },
        "autogen": {
          "$ref": "#/definitions/AutoGenExtension"
        },
        "langflow": {
          "$ref": "#/definitions/LangFlowExtension"
        },
        "vercel_ai": {
          "$ref": "#/definitions/VercelAIExtension"
        },
        "openai_assistants": {
          "$ref": "#/definitions/OpenAIAssistantsExtension"
        },
        "langchain": {
          "$ref": "#/definitions/LangChainExtension"
        },
        "openai_swarm": {
          "$ref": "#/definitions/OpenAISwarmExtension"
        },
        "agents_md": {
          "$ref": "#/definitions/AgentsMdExtension"
        },
        "llms_txt": {
          "$ref": "#/definitions/LlmsTxtExtension"
        },
        "dify": {
          "$ref": "#/definitions/DifyExtension"
        },
        "crewai": {
          "$ref": "#/definitions/CrewAIExtension"
        },
        "bedrock": {
          "$ref": "#/definitions/BedrockAgentsExtension"
        },
        "semanticKernel": {
          "$ref": "#/definitions/SemanticKernelExtension"
        },
        "llamaindex": {
          "$ref": "#/definitions/LlamaIndexExtension"
        },
        "vertexai": {
          "$ref": "#/definitions/VertexAIExtension"
        },
        "langgraph": {
          "$ref": "#/definitions/LangGraphExtension"
        },
        "haystack": {
          "$ref": "#/definitions/HaystackExtension"
        },
        "pydantic_ai": {
          "$ref": "#/definitions/PydanticAIExtension"
        },
        "smolagents": {
          "$ref": "#/definitions/SmolagentsExtension"
        },
        "phidata": {
          "$ref": "#/definitions/PhidataExtension"
        },
        "instructor": {
          "$ref": "#/definitions/InstructorExtension"
        },
        "autogpt": {
          "$ref": "#/definitions/AutoGPTExtension"
        },
        "metagpt": {
          "$ref": "#/definitions/MetaGPTExtension"
        },
        "kubernetes": {
          "$ref": "#/definitions/KubernetesExtension"
        },
        "kagent": {
          "$ref": "#/definitions/KagentExtension"
        }
      },
      "additionalProperties": true
    },
    "runtime": {
      "$ref": "#/definitions/RuntimeBinding",
      "description": "Runtime-specific capability bindings (for Task and Workflow kinds)"
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "kind": {
            "const": "Agent"
          }
        }
      },
      "then": {
        "properties": {
          "spec": {
            "$ref": "#/definitions/AgentSpec"
          }
        },
        "required": [
          "spec"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "kind": {
            "const": "Task"
          }
        }
      },
      "then": {
        "properties": {
          "spec": {
            "$ref": "#/definitions/TaskSpec"
          }
        },
        "required": [
          "spec"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "kind": {
            "const": "Workflow"
          }
        }
      },
      "then": {
        "properties": {
          "spec": {
            "$ref": "#/definitions/WorkflowSpec"
          }
        },
        "required": [
          "spec"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "kind": {
            "const": "Flow"
          }
        }
      },
      "then": {
        "properties": {
          "spec": {
            "$ref": "#/definitions/FlowSpec"
          }
        },
        "required": [
          "spec"
        ]
      }
    }
  ],
  "definitions": {
    "AccessTier": {
      "type": "object",
      "description": "Access tier configuration for separation of duties (v0.3.4+). Defines privilege levels and role separations for agents.",
      "required": [
        "tier"
      ],
      "properties": {
        "tier": {
          "type": "string",
          "enum": [
            "tier_1_read",
            "tier_2_write_limited",
            "tier_3_write_elevated",
            "tier_4_policy"
          ],
          "description": "Access tier level: tier_1_read (analyzers), tier_2_write_limited (workers), tier_3_write_elevated (operators), tier_4_policy (governors)"
        },
        "permissions": {
          "type": "array",
          "description": "Explicit permissions granted to this agent",
          "items": {
            "type": "string",
            "enum": [
              "read_code",
              "read_configs",
              "read_metrics",
              "read_logs",
              "read_issues",
              "read_mrs",
              "execute_queries",
              "write_docs",
              "write_tests",
              "write_scaffolds",
              "write_configs_draft",
              "create_issues",
              "create_mrs_draft",
              "execute_sandboxed",
              "write_production_code",
              "merge_mrs",
              "delete_branches",
              "modify_infrastructure",
              "modify_secrets",
              "execute_deployments",
              "modify_pipelines",
              "modify_configs",
              "execute_commands",
              "define_policies",
              "publish_policies",
              "audit_compliance",
              "report_violations"
            ]
          },
          "uniqueItems": true
        },
        "prohibited": {
          "type": "array",
          "description": "Explicitly prohibited actions for this agent",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        },
        "audit_level": {
          "type": "string",
          "enum": [
            "standard",
            "detailed",
            "comprehensive"
          ],
          "default": "standard",
          "description": "Audit logging level: standard (30 days), detailed (90 days), comprehensive (365 days)"
        },
        "requires_approval": {
          "type": "boolean",
          "default": false,
          "description": "Whether operations require approval chain"
        },
        "approval_chain": {
          "type": "string",
          "enum": [
            "standard",
            "elevated",
            "critical"
          ],
          "description": "Approval workflow to use when requires_approval is true"
        },
        "isolation": {
          "type": "string",
          "enum": [
            "none",
            "standard",
            "strict"
          ],
          "default": "none",
          "description": "Isolation level: none (default), standard (limited delegation), strict (no execution, policy only)"
        }
      },
      "additionalProperties": false
    },
    "SeparationOfDuties": {
      "type": "object",
      "description": "Role separation rules for preventing conflicts of interest",
      "properties": {
        "role": {
          "type": "string",
          "description": "Primary role of this agent",
          "enum": [
            "analyzer",
            "auditor",
            "scanner",
            "reviewer",
            "monitor",
            "generator",
            "scaffolder",
            "documenter",
            "test_writer",
            "deployer",
            "operator",
            "executor",
            "maintainer",
            "governor",
            "policy_definer",
            "compliance_officer",
            "approver",
            "critic",
            "remediator",
            "enforcer"
          ]
        },
        "conflicts_with": {
          "type": "array",
          "description": "Roles that this agent must NOT also perform (separation of duties)",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        },
        "can_delegate_to": {
          "type": "array",
          "description": "Roles/tiers this agent can delegate tasks to",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        },
        "prohibited_actions": {
          "type": "array",
          "description": "Specific actions this role must never perform",
          "items": {
            "type": "string",
            "enum": [
              "approve",
              "merge",
              "execute",
              "deploy",
              "delete",
              "modify_production",
              "define_policies",
              "bypass_approvals"
            ]
          },
          "uniqueItems": true
        }
      },
      "additionalProperties": false
    },
    "DelegationConfig": {
      "type": "object",
      "description": "Configuration for delegating tasks to other agents",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether this agent can delegate to others"
        },
        "allowed_tiers": {
          "type": "array",
          "description": "Tiers this agent can delegate to",
          "items": {
            "type": "string",
            "enum": [
              "tier_1_read",
              "tier_2_write_limited",
              "tier_3_write_elevated"
            ]
          },
          "uniqueItems": true
        },
        "allowed_operations": {
          "type": "array",
          "description": "Operations that can be delegated",
          "items": {
            "type": "string"
          }
        },
        "requires": {
          "type": "array",
          "description": "Requirements for delegation",
          "items": {
            "type": "string",
            "enum": [
              "delegation_token",
              "audit_trail",
              "violation_report",
              "task_specification",
              "approval"
            ]
          }
        }
      },
      "additionalProperties": false
    },
    "TaxonomyClassification": {
      "type": "object",
      "description": "Hierarchical taxonomy classification for agents (v0.3.4+). Links to taxonomy.yaml spec.",
      "required": [
        "domain"
      ],
      "properties": {
        "domain": {
          "type": "string",
          "enum": [
            "security",
            "infrastructure",
            "documentation",
            "backend",
            "frontend",
            "data",
            "agents",
            "development",
            "content"
          ],
          "description": "Primary domain classification - every agent belongs to exactly one domain"
        },
        "subdomain": {
          "type": "string",
          "description": "Subdomain within the primary domain (e.g., auth, ci-cd, api-docs)"
        },
        "capability": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_]*$",
          "description": "Primary capability this agent provides"
        },
        "concerns": {
          "type": "array",
          "description": "Cross-cutting concerns that apply to this agent",
          "items": {
            "type": "string",
            "enum": [
              "quality",
              "observability",
              "governance",
              "performance",
              "architecture",
              "cost",
              "reliability"
            ]
          },
          "uniqueItems": true
        },
        "recommended_tier": {
          "type": "string",
          "enum": [
            "tier_1_read",
            "tier_2_write_limited",
            "tier_3_write_elevated",
            "tier_4_policy"
          ],
          "description": "Recommended access tier based on domain defaults"
        }
      },
      "additionalProperties": false
    },
    "AgentIdentity": {
      "type": "object",
      "description": "Comprehensive agent identity configuration for service accounts, authentication, and observability",
      "properties": {
        "provider": {
          "type": "string",
          "enum": [
            "gitlab",
            "github",
            "azure-devops",
            "bitbucket",
            "generic"
          ],
          "description": "Identity provider type for service account integration"
        },
        "service_account": {
          "type": "object",
          "description": "Service account details for automated operations",
          "required": [
            "username",
            "email"
          ],
          "properties": {
            "id": {
              "oneOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "string"
                }
              ],
              "description": "Provider-specific account ID"
            },
            "username": {
              "type": "string",
              "pattern": "^[a-z0-9_\\[\\]-]+$",
              "minLength": 1,
              "maxLength": 64,
              "description": "Service account username"
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "Service account email for git attribution"
            },
            "display_name": {
              "type": "string",
              "description": "Human-readable display name"
            },
            "roles": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "developer",
                  "maintainer",
                  "owner",
                  "reporter",
                  "guest"
                ]
              },
              "description": "Roles assigned to this service account"
            }
          }
        },
        "authentication": {
          "type": "object",
          "description": "Authentication method configuration",
          "properties": {
            "method": {
              "type": "string",
              "enum": [
                "personal_access_token",
                "project_access_token",
                "group_access_token",
                "deploy_token",
                "oauth2",
                "ssh_key",
                "mtls",
                "github_app",
                "azure_service_principal"
              ],
              "default": "personal_access_token",
              "description": "Authentication method type"
            },
            "scopes": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Required token scopes (provider-specific)"
            },
            "auto_refresh": {
              "type": "boolean",
              "default": false,
              "description": "Automatically refresh token before expiry"
            },
            "expiry_warning_days": {
              "type": "integer",
              "default": 7,
              "minimum": 1,
              "maximum": 90,
              "description": "Days before expiry to warn about token rotation"
            },
            "rotation_policy": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "interval_days": {
                  "type": "integer",
                  "default": 90,
                  "minimum": 7,
                  "maximum": 365
                },
                "notify_on_rotation": {
                  "type": "boolean",
                  "default": true
                }
              }
            }
          }
        },
        "token_source": {
          "type": "object",
          "description": "Token/credential source configuration with priority order",
          "properties": {
            "env_var": {
              "type": "string",
              "pattern": "^[A-Z][A-Z0-9_]*$",
              "description": "Environment variable name containing the token (highest priority)"
            },
            "file_path": {
              "type": "string",
              "description": "Path to token file (second priority, supports ~ expansion)"
            },
            "vault": {
              "type": "object",
              "properties": {
                "path": {
                  "type": "string",
                  "description": "Vault secret path"
                },
                "key": {
                  "type": "string",
                  "default": "value"
                },
                "role": {
                  "type": "string",
                  "description": "Vault role for authentication"
                }
              }
            },
            "kubernetes_secret": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "namespace": {
                  "type": "string"
                },
                "key": {
                  "type": "string",
                  "default": "token"
                }
              }
            }
          }
        },
        "patterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Glob patterns for auto-detection based on working directory (picomatch syntax)"
        },
        "fallback": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "provider",
              "service_account"
            ],
            "properties": {
              "provider": {
                "type": "string",
                "enum": [
                  "gitlab",
                  "github",
                  "azure-devops",
                  "bitbucket",
                  "generic"
                ]
              },
              "service_account": {
                "$ref": "#/definitions/AgentIdentity/properties/service_account"
              },
              "token_source": {
                "$ref": "#/definitions/AgentIdentity/properties/token_source"
              },
              "condition": {
                "type": "object",
                "properties": {
                  "pattern_match": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "platform_unavailable": {
                    "type": "boolean"
                  }
                }
              }
            }
          },
          "description": "Fallback identity chain for high availability"
        },
        "dora_tracking": {
          "type": "object",
          "description": "DORA metrics tracking configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "metrics": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "deployment_frequency",
                  "lead_time",
                  "change_failure_rate",
                  "mttr"
                ]
              },
              "uniqueItems": true
            },
            "labels": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "description": "Additional labels for metrics"
            },
            "prometheus": {
              "type": "object",
              "properties": {
                "push_gateway": {
                  "type": "string",
                  "format": "uri"
                },
                "job_name": {
                  "type": "string"
                }
              }
            }
          }
        },
        "session": {
          "type": "object",
          "description": "Session management for Claude Code integration",
          "properties": {
            "init_on_start": {
              "type": "boolean",
              "default": true
            },
            "propagate_to_subprocesses": {
              "type": "boolean",
              "default": true
            },
            "git_attribution": {
              "type": "boolean",
              "default": true
            },
            "heartbeat_interval": {
              "type": "integer",
              "default": 300,
              "minimum": 30,
              "maximum": 3600
            },
            "timeout": {
              "type": "integer",
              "default": 3600,
              "minimum": 60,
              "maximum": 86400
            },
            "hooks": {
              "type": "object",
              "properties": {
                "pre_prompt_submit": {
                  "type": "boolean",
                  "default": true
                },
                "post_session": {
                  "type": "boolean",
                  "default": false
                }
              }
            }
          }
        },
        "observability": {
          "type": "object",
          "description": "OpenTelemetry service identity for distributed tracing",
          "properties": {
            "service_name": {
              "type": "string"
            },
            "service_namespace": {
              "type": "string"
            },
            "service_version": {
              "type": "string",
              "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9.]+)?$"
            },
            "service_instance_id": {
              "type": "string"
            },
            "resource_attributes": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        },
        "security": {
          "type": "object",
          "description": "Security policies for identity management",
          "properties": {
            "token_encryption": {
              "type": "string",
              "enum": [
                "none",
                "at_rest",
                "in_transit",
                "both"
              ],
              "default": "both"
            },
            "minimum_token_length": {
              "type": "integer",
              "default": 32
            },
            "prohibited_actions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "required_approvals": {
              "type": "object",
              "properties": {
                "force_push": {
                  "type": "boolean",
                  "default": true
                },
                "delete_protected_branch": {
                  "type": "boolean",
                  "default": true
                },
                "modify_ci_config": {
                  "type": "boolean",
                  "default": false
                }
              }
            },
            "rate_limits": {
              "type": "object",
              "properties": {
                "requests_per_minute": {
                  "type": "integer",
                  "default": 60
                },
                "requests_per_hour": {
                  "type": "integer",
                  "default": 1000
                },
                "git_operations_per_hour": {
                  "type": "integer",
                  "default": 100
                }
              }
            }
          }
        },
        "access_tier": {
          "type": "string",
          "enum": [
            "tier_1_read",
            "tier_2_write_limited",
            "tier_3_write_elevated",
            "tier_4_policy",
            "read",
            "limited",
            "elevated",
            "policy"
          ],
          "description": "Access tier - supports both full names (tier_1_read) and shorthand (read, limited, elevated, policy)"
        },
        "composite": {
          "type": "object",
          "description": "Composite identity configuration (v0.3.6+). Merges service account + human user for attribution and security. GitLab Duo Agent Platform feature, vendor-neutral.",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable composite identity"
            },
            "primary_identity": {
              "type": "object",
              "description": "Primary identity (typically service account)",
              "properties": {
                "username": {
                  "type": "string"
                },
                "email": {
                  "type": "string",
                  "format": "email"
                },
                "roles": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "secondary_identity": {
              "type": "object",
              "description": "Secondary identity (typically human user for attribution)",
              "properties": {
                "user_id": {
                  "type": "string",
                  "description": "User ID from provider (e.g., $GITLAB_USER_ID)"
                },
                "username": {
                  "type": "string",
                  "description": "Username from provider (e.g., $GITLAB_USERNAME)"
                },
                "email": {
                  "type": "string",
                  "format": "email",
                  "description": "Email from provider (e.g., $GITLAB_USER_EMAIL)"
                }
              }
            },
            "merge_strategy": {
              "type": "string",
              "enum": [
                "restrictive",
                "permissive",
                "custom"
              ],
              "default": "restrictive",
              "description": "Permission merge strategy: restrictive (intersection), permissive (union), custom (explicit rules)"
            },
            "permissions": {
              "type": "object",
              "description": "Explicit permissions for composite identity",
              "properties": {
                "read": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Read permissions (e.g., repositories, deployments)"
                },
                "write": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Write permissions (e.g., deployments)"
                },
                "execute": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Execute permissions (e.g., deploy-production)"
                }
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    },
    "Metadata": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "maxLength": 253,
          "description": "Resource identifier (DNS-1123 subdomain format for Kubernetes compatibility)"
        },
        "namespace": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "maxLength": 63,
          "description": "Logical grouping namespace (like Kubernetes namespace)"
        },
        "version": {
          "type": "string",
          "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
          "description": "Semantic version (semver 2.0.0)"
        },
        "description": {
          "type": "string",
          "maxLength": 2000,
          "description": "Human-readable description"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string",
            "maxLength": 63
          },
          "description": "Key-value labels for organization and filtering"
        },
        "annotations": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Arbitrary metadata for tooling"
        },
        "efficiency_tier": {
          "type": "string",
          "enum": [
            "premium",
            "standard",
            "economy",
            "custom"
          ],
          "description": "Token efficiency tier (v0.3.6+): premium (no optimization), standard (basic pruning), economy (aggressive optimization), custom (explicit config)"
        },
        "catalog": {
          "type": "object",
          "description": "Agent catalog metadata for discovery and publication (v0.3.6+). Vendor-neutral support for GitLab AI Catalog, GitHub Marketplace, etc.",
          "properties": {
            "published": {
              "type": "boolean",
              "default": false,
              "description": "Whether this agent is published to a catalog"
            },
            "catalog_id": {
              "type": "string",
              "description": "Unique identifier in the catalog"
            },
            "visibility": {
              "type": "string",
              "enum": [
                "public",
                "private",
                "internal"
              ],
              "default": "private",
              "description": "Agent visibility: public (anyone), private (owner only), internal (organization)"
            },
            "categories": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Agent categories (e.g., code-quality, security, devops)"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Searchable tags"
            },
            "icon_url": {
              "type": "string",
              "format": "uri",
              "description": "URL to agent icon/logo"
            },
            "documentation_url": {
              "type": "string",
              "format": "uri",
              "description": "URL to agent documentation"
            },
            "pricing": {
              "type": "object",
              "description": "Pricing information",
              "properties": {
                "model": {
                  "type": "string",
                  "enum": [
                    "free",
                    "freemium",
                    "paid",
                    "enterprise"
                  ],
                  "default": "free"
                },
                "cost_per_use": {
                  "type": "number",
                  "description": "Cost per use (USD)"
                },
                "subscription_monthly": {
                  "type": "number",
                  "description": "Monthly subscription cost (USD)"
                }
              }
            },
            "ratings": {
              "type": "object",
              "description": "Catalog ratings",
              "properties": {
                "average": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 5,
                  "description": "Average rating (0-5 stars)"
                },
                "count": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Number of ratings"
                }
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "TaskSpec": {
      "type": "object",
      "description": "Specification for deterministic, non-agentic workflow steps (kind: Task)",
      "required": [
        "execution"
      ],
      "properties": {
        "execution": {
          "type": "object",
          "description": "Execution configuration for the task",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "deterministic",
                "idempotent",
                "transactional"
              ],
              "default": "deterministic",
              "description": "Execution type: deterministic (pure function), idempotent (safe to retry), transactional (all-or-nothing)"
            },
            "runtime": {
              "type": "string",
              "description": "Target runtime environment",
              "examples": [
                "drupal",
                "symfony",
                "node",
                "python",
                "any"
              ]
            },
            "entrypoint": {
              "type": "string",
              "description": "Entry point for execution (class::method, function name, or script path)"
            },
            "timeout_seconds": {
              "type": "integer",
              "minimum": 1,
              "maximum": 86400,
              "default": 300,
              "description": "Maximum execution time in seconds"
            }
          },
          "additionalProperties": false
        },
        "capabilities": {
          "type": "array",
          "description": "Abstract capabilities this task requires (bound at runtime)",
          "items": {
            "type": "string",
            "pattern": "^[a-z][a-z0-9_]*$",
            "description": "Capability identifier (e.g., publish_content, send_email)"
          },
          "uniqueItems": true,
          "examples": [
            [
              "publish_content",
              "send_notification"
            ],
            [
              "transform_data",
              "validate_schema"
            ]
          ]
        },
        "input": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for task input validation"
        },
        "output": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for task output validation"
        },
        "batch": {
          "type": "object",
          "description": "Batch processing configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable batch processing mode"
            },
            "parallelism": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1000,
              "default": 10,
              "description": "Maximum parallel executions"
            },
            "chunk_size": {
              "type": "integer",
              "minimum": 1,
              "default": 100,
              "description": "Items per batch chunk"
            },
            "retry": {
              "type": "object",
              "properties": {
                "max_attempts": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10,
                  "default": 3
                },
                "backoff_strategy": {
                  "type": "string",
                  "enum": [
                    "fixed",
                    "exponential",
                    "linear"
                  ],
                  "default": "exponential"
                },
                "initial_delay_ms": {
                  "type": "integer",
                  "minimum": 100,
                  "default": 1000
                }
              },
              "additionalProperties": false
            },
            "on_item_error": {
              "type": "string",
              "enum": [
                "skip",
                "fail",
                "retry"
              ],
              "default": "retry",
              "description": "Behavior when individual item fails"
            }
          },
          "additionalProperties": false
        },
        "dependencies": {
          "type": "array",
          "description": "Other tasks or agents this task depends on",
          "items": {
            "type": "object",
            "required": [
              "ref"
            ],
            "properties": {
              "ref": {
                "type": "string",
                "description": "Reference to dependency (file path or name)"
              },
              "kind": {
                "type": "string",
                "enum": [
                  "Task",
                  "Agent"
                ],
                "description": "Kind of dependency"
              },
              "optional": {
                "type": "boolean",
                "default": false,
                "description": "Whether this dependency is optional"
              }
            },
            "additionalProperties": false
          }
        },
        "preconditions": {
          "type": "array",
          "description": "Conditions that must be true before task execution",
          "items": {
            "type": "object",
            "required": [
              "expression"
            ],
            "properties": {
              "expression": {
                "type": "string",
                "description": "Condition expression (e.g., '${{ input.status == \"draft\" }}')"
              },
              "error_message": {
                "type": "string",
                "description": "Error message if condition fails"
              }
            },
            "additionalProperties": false
          }
        },
        "postconditions": {
          "type": "array",
          "description": "Conditions that must be true after task execution",
          "items": {
            "type": "object",
            "required": [
              "expression"
            ],
            "properties": {
              "expression": {
                "type": "string",
                "description": "Condition expression"
              },
              "error_message": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "error_handling": {
          "type": "object",
          "description": "Error handling configuration",
          "properties": {
            "on_error": {
              "type": "string",
              "enum": [
                "fail",
                "retry",
                "fallback",
                "ignore"
              ],
              "default": "fail"
            },
            "fallback_task": {
              "type": "string",
              "description": "Reference to fallback task on failure"
            },
            "error_mapping": {
              "type": "object",
              "description": "Map error codes to actions",
              "additionalProperties": {
                "type": "string",
                "enum": [
                  "fail",
                  "retry",
                  "fallback",
                  "ignore"
                ]
              }
            }
          },
          "additionalProperties": false
        },
        "observability": {
          "type": "object",
          "description": "Observability configuration",
          "properties": {
            "logging": {
              "type": "object",
              "properties": {
                "level": {
                  "type": "string",
                  "enum": [
                    "debug",
                    "info",
                    "warn",
                    "error"
                  ],
                  "default": "info"
                },
                "include_input": {
                  "type": "boolean",
                  "default": false,
                  "description": "Log input data (caution: may contain sensitive data)"
                },
                "include_output": {
                  "type": "boolean",
                  "default": false,
                  "description": "Log output data"
                }
              }
            },
            "metrics": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "custom_labels": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            },
            "tracing": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "sample_rate": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1,
                  "default": 1
                }
              }
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "AgentSpec": {
      "type": "object",
      "description": "Specification for agentic loops with LLM (kind: Agent) - inherits from v0.2.9. Either 'role' or 'prompts.system.template' is required.",
      "properties": {
        "role": {
          "type": "string",
          "minLength": 1,
          "description": "Agent role/system prompt (alternative: use prompts.system.template)"
        },
        "prompts": {
          "type": "object",
          "description": "Structured prompts configuration (alternative to role)",
          "properties": {
            "system": {
              "oneOf": [
                {
                  "type": "string",
                  "description": "System prompt template (shorthand format)"
                },
                {
                  "type": "object",
                  "description": "System prompt with metadata (verbose format)",
                  "properties": {
                    "template": {
                      "type": "string",
                      "description": "System prompt template"
                    },
                    "version": {
                      "type": "string",
                      "description": "Prompt version"
                    }
                  }
                }
              ],
              "description": "System prompt - can be string (shorthand) or object with template/version"
            }
          },
          "additionalProperties": true
        },
        "llm": {
          "$ref": "#/definitions/LLMConfig"
        },
        "tools": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Tool"
          }
        },
        "knowledge_sources": {
          "type": "array",
          "description": "Optional knowledge sources for RAG and context retrieval",
          "items": {
            "$ref": "#/definitions/KnowledgeSource"
          }
        },
        "mandatory_knowledge_sources": {
          "type": "array",
          "description": "Platform-enforced knowledge sources that ALL agents must use. These are automatically injected by the runtime and cannot be disabled.",
          "items": {
            "$ref": "#/definitions/MandatoryKnowledgeSource"
          },
          "default": []
        },
        "code_compliance": {
          "$ref": "#/definitions/CodeCompliance",
          "description": "Code quality and best practices enforcement configuration. Defines which knowledge bases must be queried when working with specific code types."
        },
        "autonomy": {
          "$ref": "#/definitions/Autonomy"
        },
        "constraints": {
          "$ref": "#/definitions/Constraints"
        },
        "state": {
          "$ref": "#/definitions/State"
        },
        "observability": {
          "$ref": "#/definitions/AgentObservability"
        },
        "safety": {
          "$ref": "#/definitions/Safety"
        },
        "messaging": {
          "$ref": "#/definitions/MessagingExtension",
          "description": "Agent-to-agent messaging configuration (v0.3.4+)"
        },
        "functions": {
          "type": "array",
          "description": "A2A/OpenAI-style function definitions for structured tool calling",
          "items": {
            "$ref": "#/definitions/FunctionDefinition"
          }
        },
        "identity": {
          "$ref": "#/definitions/AgentIdentity",
          "description": "Agent identity configuration including service accounts, authentication, and observability (v0.3.4+)"
        },
        "access": {
          "$ref": "#/definitions/AccessTier",
          "description": "Access tier configuration for separation of duties (v0.3.4+). Defines privilege level and allowed operations."
        },
        "separation": {
          "$ref": "#/definitions/SeparationOfDuties",
          "description": "Role separation configuration to prevent conflicts of interest (v0.3.4+)"
        },
        "delegation": {
          "$ref": "#/definitions/DelegationConfig",
          "description": "Delegation configuration for multi-agent hierarchies (v0.3.4+)"
        },
        "type": {
          "type": "string",
          "enum": [
            "analyzer",
            "worker",
            "operator",
            "supervisor",
            "orchestrator",
            "governor",
            "specialist",
            "critic"
          ],
          "description": "Agent type classification aligned with access tiers (v0.3.4+)"
        },
        "taxonomy": {
          "$ref": "#/definitions/TaxonomyClassification",
          "description": "Taxonomy classification for domain and cross-cutting concerns (v0.3.4+)"
        },
        "compliance": {
          "type": "object",
          "description": "Regulatory compliance and data governance configuration",
          "properties": {
            "frameworks": {
              "type": "array",
              "description": "Applicable compliance frameworks",
              "items": {
                "type": "string",
                "enum": [
                  "SOC2",
                  "HIPAA",
                  "GDPR",
                  "FedRAMP",
                  "PCI-DSS",
                  "ISO27001"
                ]
              },
              "uniqueItems": true
            },
            "data_residency": {
              "type": "string",
              "description": "Required data residency region (e.g., us-east-1, eu-west-1)"
            },
            "audit_logging": {
              "type": "string",
              "enum": [
                "required",
                "optional",
                "disabled"
              ],
              "default": "optional",
              "description": "Audit logging requirement level"
            },
            "pii_handling": {
              "type": "string",
              "enum": [
                "encrypt_at_rest",
                "anonymize",
                "redact",
                "none"
              ],
              "default": "none",
              "description": "Personally Identifiable Information handling strategy"
            }
          },
          "additionalProperties": false
        },
        "lifecycle": {
          "type": "object",
          "description": "Agent lifecycle, execution, and environment management configuration",
          "properties": {
            "max_turns": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of agentic turns/iterations"
            },
            "turn_timeout": {
              "type": "string",
              "pattern": "^[0-9]+(s|m|h)$",
              "description": "Timeout per turn (e.g., '300s', '5m')"
            },
            "idle_timeout": {
              "type": "string",
              "pattern": "^[0-9]+(s|m|h)$",
              "description": "Idle timeout before agent suspension (e.g., '30m')"
            },
            "checkpoint_interval": {
              "type": "integer",
              "minimum": 1,
              "description": "Checkpoint state every N turns"
            },
            "phases": {
              "type": "array",
              "description": "Ordered lifecycle phases for turn execution",
              "items": {
                "type": "string",
                "enum": [
                  "init",
                  "normalize",
                  "resolve",
                  "infer",
                  "execute",
                  "assemble",
                  "emit"
                ]
              }
            },
            "environments": {
              "type": "object",
              "description": "Environment-specific configurations",
              "additionalProperties": {
                "type": "object",
                "description": "Configuration for a specific environment (e.g., development, staging, production)",
                "additionalProperties": true
              }
            },
            "dependencies": {
              "type": "array",
              "description": "External dependencies required by this agent",
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "version"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Dependency name"
                  },
                  "version": {
                    "type": "string",
                    "description": "Dependency version (semver recommended)"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "runtime",
                      "build",
                      "optional"
                    ],
                    "default": "runtime",
                    "description": "Dependency type"
                  },
                  "source": {
                    "type": "string",
                    "description": "Dependency source (e.g., npm, pip, composer, docker)"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "token_efficiency": {
          "$ref": "#/definitions/TokenEfficiency",
          "description": "Token efficiency configuration (v0.3.6+). Enables 70-95% cost savings through intelligent optimization."
        },
        "completion": {
          "$ref": "#/definitions/CompletionSignalConfiguration"
        },
        "checkpointing": {
          "$ref": "#/definitions/CheckpointConfiguration"
        }
      },
      "additionalProperties": true
    },
    "WorkflowSpec": {
      "type": "object",
      "description": "Specification for workflow composition (kind: Workflow) - composes Tasks and Agents into executable pipelines",
      "required": [
        "steps"
      ],
      "properties": {
        "triggers": {
          "type": "array",
          "description": "Events that trigger workflow execution",
          "items": {
            "$ref": "#/definitions/Trigger"
          }
        },
        "inputs": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for workflow input validation"
        },
        "outputs": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for workflow output validation"
        },
        "steps": {
          "type": "array",
          "description": "Workflow steps (Tasks and/or Agents)",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/WorkflowStep"
          }
        },
        "context": {
          "type": "object",
          "description": "Shared context available to all steps",
          "properties": {
            "variables": {
              "type": "object",
              "description": "Workflow-level variables",
              "additionalProperties": true
            },
            "secrets": {
              "type": "array",
              "description": "Secret references available to steps",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Secret name available to steps"
                  },
                  "ref": {
                    "type": "string",
                    "description": "Secret reference (e.g., vault://secret/api-key)"
                  }
                },
                "required": [
                  "name",
                  "ref"
                ]
              }
            }
          },
          "additionalProperties": false
        },
        "concurrency": {
          "type": "object",
          "description": "Concurrency control",
          "properties": {
            "group": {
              "type": "string",
              "description": "Concurrency group name (workflows in same group are serialized)"
            },
            "cancel_in_progress": {
              "type": "boolean",
              "default": false,
              "description": "Cancel running workflow if new one starts in same group"
            }
          },
          "additionalProperties": false
        },
        "error_handling": {
          "type": "object",
          "description": "Workflow-level error handling",
          "properties": {
            "on_failure": {
              "type": "string",
              "enum": [
                "halt",
                "continue",
                "rollback",
                "notify",
                "compensate",
                "compensation"
              ],
              "default": "halt",
              "description": "Action on step failure"
            },
            "compensation_steps": {
              "type": "array",
              "description": "Steps to run on rollback/compensate",
              "items": {
                "$ref": "#/definitions/WorkflowStep"
              }
            },
            "notification": {
              "type": "object",
              "description": "Notification on failure",
              "properties": {
                "channels": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "email",
                      "slack",
                      "webhook",
                      "pagerduty"
                    ]
                  }
                },
                "template": {
                  "type": "string",
                  "description": "Notification template reference"
                }
              }
            },
            "retry_policy": {
              "type": "object",
              "properties": {
                "max_attempts": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10,
                  "default": 3
                },
                "backoff": {
                  "type": "string",
                  "enum": [
                    "fixed",
                    "exponential",
                    "linear"
                  ],
                  "default": "exponential"
                },
                "initial_delay_ms": {
                  "type": "integer",
                  "minimum": 100,
                  "default": 1000
                },
                "max_delay_ms": {
                  "type": "integer",
                  "default": 60000
                }
              }
            }
          },
          "additionalProperties": true
        },
        "timeout_seconds": {
          "type": "integer",
          "minimum": 1,
          "maximum": 86400,
          "description": "Maximum workflow execution time in seconds"
        },
        "observability": {
          "type": "object",
          "description": "Workflow observability configuration",
          "properties": {
            "tracing": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "propagate_context": {
                  "type": "boolean",
                  "default": true,
                  "description": "Propagate trace context to steps"
                }
              }
            },
            "metrics": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "custom_labels": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            },
            "logging": {
              "type": "object",
              "properties": {
                "level": {
                  "type": "string",
                  "enum": [
                    "debug",
                    "info",
                    "warn",
                    "error"
                  ],
                  "default": "info"
                }
              }
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "RuntimeBinding": {
      "type": "object",
      "description": "Multi-runtime compatibility declaration",
      "properties": {
        "type": {
          "type": "string",
          "description": "Primary runtime type",
          "enum": [
            "unified",
            "google-a2a",
            "gitlab-duo",
            "ossa-mesh",
            "mcp",
            "local",
            "drupal",
            "symfony_messenger",
            "kagent",
            "temporal",
            "node"
          ],
          "default": "unified"
        },
        "supports": {
          "type": "array",
          "description": "List of compatible runtimes",
          "items": {
            "type": "string",
            "enum": [
              "google-a2a",
              "gitlab-duo",
              "ossa-mesh",
              "mcp",
              "local-execution",
              "kubernetes",
              "serverless",
              "lambda",
              "cloudflare-workers",
              "drupal",
              "symfony"
            ]
          },
          "uniqueItems": true
        },
        "transport": {
          "type": "string",
          "description": "Message transport for async runtimes",
          "examples": [
            "async",
            "sync",
            "amqp",
            "redis"
          ]
        },
        "scheduling": {
          "$ref": "#/definitions/SchedulingConfig",
          "description": "Agent scheduling configuration"
        },
        "resource_limits": {
          "$ref": "#/definitions/ResourceLimits",
          "description": "Compute resource constraints"
        },
        "extensions": {
          "type": "array",
          "description": "External runtime extensions",
          "items": {
            "$ref": "#/definitions/RuntimeExtension"
          }
        },
        "bindings": {
          "type": "object",
          "description": "Map of capability names to runtime-specific handlers",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "handler": {
                "type": "string",
                "description": "Handler class/function (e.g., 'Drupal\\node\\NodeQuery::getList')"
              },
              "mcp_server": {
                "type": "string",
                "description": "MCP server name for MCP-based bindings"
              },
              "tool": {
                "type": "string",
                "description": "Tool name within MCP server"
              },
              "config": {
                "type": "object",
                "description": "Additional binding configuration",
                "additionalProperties": true
              }
            },
            "additionalProperties": false
          }
        },
        "kubernetes": {
          "$ref": "#/definitions/KubernetesConfig",
          "description": "Kubernetes-specific configuration (KAS-inspired)"
        }
      },
      "additionalProperties": false
    },
    "Trigger": {
      "type": "object",
      "description": "Workflow trigger configuration",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "webhook",
            "cron",
            "event",
            "manual"
          ],
          "description": "Trigger type"
        },
        "path": {
          "type": "string",
          "description": "Webhook path (for type=webhook)"
        },
        "schedule": {
          "type": "string",
          "description": "Cron expression (for type=cron)",
          "examples": [
            "0 8 * * *",
            "*/15 * * * *"
          ]
        },
        "source": {
          "type": "string",
          "description": "Event source (for type=event)",
          "examples": [
            "drupal",
            "kafka",
            "webhook"
          ]
        },
        "event": {
          "type": "string",
          "description": "Event name (for type=event)",
          "examples": [
            "node.created",
            "user.login",
            "order.placed"
          ]
        },
        "filter": {
          "type": "object",
          "description": "Event filter conditions",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "WorkflowStep": {
      "type": "object",
      "description": "A step in a workflow - can be a Task, Agent, or control structure",
      "required": [
        "id"
      ],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "description": "Step identifier (unique within workflow)"
        },
        "name": {
          "type": "string",
          "description": "Human-readable step name for display"
        },
        "kind": {
          "type": "string",
          "enum": [
            "Task",
            "Agent",
            "Parallel",
            "Conditional",
            "Loop"
          ],
          "description": "Step type"
        },
        "ref": {
          "type": "string",
          "description": "Reference to Task or Agent manifest file",
          "examples": [
            "./tasks/publish-content.yaml",
            "./agents/content-reviewer.yaml"
          ]
        },
        "inline": {
          "type": "object",
          "description": "Inline Task or Agent specification (alternative to ref)"
        },
        "input": {
          "type": "object",
          "description": "Input mapping using expression syntax",
          "additionalProperties": true,
          "examples": [
            {
              "content": "${{ steps.fetch.output.content }}",
              "priority": "${{ workflow.input.priority }}"
            }
          ]
        },
        "output": {
          "type": "object",
          "description": "Output mapping to workflow context",
          "properties": {
            "to": {
              "type": "string",
              "description": "Variable name to store output"
            },
            "fields": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Specific fields to extract from output"
            }
          }
        },
        "condition": {
          "type": "string",
          "description": "Condition expression for conditional execution",
          "examples": [
            "${{ steps.review.output.approved }}",
            "${{ workflow.input.priority == 'high' }}",
            "${{ steps.check.output.status == 'ready' && context.retry_count < 3 }}"
          ]
        },
        "depends_on": {
          "type": "array",
          "description": "Explicit dependencies on other steps",
          "items": {
            "type": "string"
          },
          "examples": [
            [
              "fetch",
              "validate"
            ]
          ]
        },
        "parallel": {
          "type": "array",
          "description": "Steps to run in parallel (for kind: Parallel)",
          "items": {
            "$ref": "#/definitions/WorkflowStep"
          }
        },
        "branches": {
          "type": "array",
          "description": "Conditional branches (for kind: Conditional)",
          "items": {
            "type": "object",
            "properties": {
              "condition": {
                "type": "string",
                "description": "Branch condition expression"
              },
              "steps": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/WorkflowStep"
                }
              }
            },
            "required": [
              "condition",
              "steps"
            ]
          }
        },
        "else": {
          "type": "array",
          "description": "Steps to run if no branch condition matches (for kind: Conditional)",
          "items": {
            "$ref": "#/definitions/WorkflowStep"
          }
        },
        "loop": {
          "type": "object",
          "description": "Loop configuration (for kind: Loop)",
          "properties": {
            "over": {
              "type": "string",
              "description": "Expression returning array to iterate over",
              "examples": [
                "${{ steps.fetch.output.items }}",
                "${{ workflow.input.recipients }}"
              ]
            },
            "as": {
              "type": "string",
              "description": "Variable name for current item",
              "default": "item"
            },
            "index": {
              "type": "string",
              "description": "Variable name for current index",
              "default": "index"
            },
            "parallelism": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum parallel iterations"
            }
          },
          "required": [
            "over"
          ]
        },
        "steps": {
          "type": "array",
          "description": "Nested steps (for Loop and Conditional kinds)",
          "items": {
            "$ref": "#/definitions/WorkflowStep"
          }
        },
        "retry": {
          "type": "object",
          "description": "Step-specific retry configuration",
          "properties": {
            "max_attempts": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "default": 3
            },
            "backoff_strategy": {
              "type": "string",
              "enum": [
                "fixed",
                "exponential",
                "linear"
              ],
              "default": "exponential"
            },
            "initial_delay_ms": {
              "type": "integer",
              "minimum": 100,
              "default": 1000
            },
            "retryable_errors": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Error codes that should trigger retry"
            }
          }
        },
        "timeout_seconds": {
          "type": "integer",
          "minimum": 1,
          "maximum": 86400,
          "description": "Step-specific timeout"
        },
        "continue_on_error": {
          "type": "boolean",
          "default": false,
          "description": "Continue workflow even if this step fails"
        },
        "on_error": {
          "type": "object",
          "description": "Step-specific error handling",
          "properties": {
            "action": {
              "type": "string",
              "enum": [
                "fail",
                "continue",
                "goto",
                "compensate"
              ],
              "default": "fail"
            },
            "goto": {
              "type": "string",
              "description": "Step ID to jump to on error (for action: goto)"
            },
            "compensation": {
              "$ref": "#/definitions/WorkflowStep",
              "description": "Compensation step to run on error"
            }
          }
        },
        "labels": {
          "type": "object",
          "description": "Step labels for filtering and organization",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "additionalProperties": true
    },
    "JSONSchemaDefinition": {
      "type": "object",
      "description": "JSON Schema definition for input/output validation",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "object",
            "array",
            "string",
            "number",
            "integer",
            "boolean",
            "null"
          ]
        },
        "properties": {
          "type": "object",
          "additionalProperties": true
        },
        "required": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "items": {
          "type": "object"
        },
        "additionalProperties": {
          "type": [
            "boolean",
            "object"
          ]
        }
      },
      "additionalProperties": true
    },
    "LLMConfig": {
      "type": "object",
      "required": [
        "provider",
        "model"
      ],
      "properties": {
        "provider": {
          "description": "LLM provider - literal value or environment variable with default (e.g., ${LLM_PROVIDER:-anthropic})",
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "google",
                "azure",
                "ollama",
                "mistral",
                "cohere",
                "groq",
                "together",
                "fireworks",
                "deepseek",
                "custom"
              ]
            },
            {
              "type": "string",
              "pattern": "^[$]\\{[A-Za-z_][A-Za-z0-9_]*(?::-[a-zA-Z0-9_-]+)?\\}$",
              "description": "Environment variable reference with optional default"
            }
          ]
        },
        "model": {
          "type": "string",
          "description": "Model identifier (e.g., gpt-4o, claude-sonnet-4.5-20250929)"
        },
        "temperature": {
          "oneOf": [
            {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            },
            {
              "type": "string",
              "pattern": "^[$]\\{[A-Za-z_][A-Za-z0-9_]*(?::-[0-9.]+)?\\}$"
            }
          ],
          "description": "Sampling temperature for response generation (supports env var substitution)"
        },
        "maxTokens": {
          "oneOf": [
            {
              "type": "integer",
              "minimum": 1
            },
            {
              "type": "string",
              "pattern": "^[$]\\{[A-Za-z_][A-Za-z0-9_]*(?::-[0-9]+)?\\}$"
            }
          ],
          "description": "Maximum tokens in response (supports env var substitution)"
        },
        "fallback_models": {
          "type": "array",
          "description": "Ordered list of fallback LLM configurations for resilience",
          "items": {
            "$ref": "#/definitions/FallbackLLM"
          }
        },
        "retry_config": {
          "$ref": "#/definitions/RetryConfig",
          "description": "Retry and backoff configuration for transient failures"
        },
        "cost_tracking": {
          "$ref": "#/definitions/CostTracking",
          "description": "Cost governance and allocation tracking"
        },
        "profile": {
          "description": "Execution profile for task-specific optimization (A2A compatible)",
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "fast",
                "balanced",
                "deep",
                "safe"
              ]
            },
            {
              "type": "string",
              "pattern": "^[$]\\{[A-Za-z_][A-Za-z0-9_]*(?::-[a-zA-Z0-9_-]+)?\\}$",
              "description": "Environment variable reference with optional default"
            }
          ],
          "default": "balanced"
        },
        "execution_profiles": {
          "$ref": "#/definitions/ExecutionProfiles",
          "description": "Custom execution profile definitions"
        }
      },
      "additionalProperties": true
    },
    "FallbackLLM": {
      "type": "object",
      "description": "Fallback LLM configuration for resilience",
      "required": [
        "provider",
        "model"
      ],
      "properties": {
        "provider": {
          "description": "LLM provider - literal value or environment variable",
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "google",
                "azure",
                "ollama",
                "mistral",
                "cohere",
                "groq",
                "together",
                "fireworks",
                "deepseek",
                "custom"
              ]
            },
            {
              "type": "string",
              "pattern": "^[$]\\{[A-Za-z_][A-Za-z0-9_]*(?::-[a-zA-Z0-9_-]+)?\\}$"
            }
          ]
        },
        "model": {
          "type": "string",
          "description": "Model identifier"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2
        },
        "trigger": {
          "type": "object",
          "description": "Conditions that trigger fallback",
          "properties": {
            "on_error": {
              "type": "boolean",
              "description": "Trigger on any error from primary"
            },
            "max_retries": {
              "type": "integer",
              "description": "Retries before falling back"
            },
            "error_codes": {
              "type": "array",
              "items": {
                "type": "integer"
              },
              "description": "Specific error codes to trigger on"
            },
            "latency_threshold_ms": {
              "type": "integer",
              "description": "Trigger when latency exceeds this threshold"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "RetryConfig": {
      "type": "object",
      "description": "Retry and backoff configuration for LLM calls",
      "properties": {
        "max_attempts": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "default": 3,
          "description": "Maximum number of retry attempts"
        },
        "backoff_strategy": {
          "type": "string",
          "enum": [
            "none",
            "linear",
            "exponential"
          ],
          "default": "exponential",
          "description": "Backoff strategy between retries"
        },
        "initial_delay_ms": {
          "type": "integer",
          "minimum": 0,
          "default": 1000,
          "description": "Initial delay in milliseconds before first retry"
        },
        "max_delay_ms": {
          "type": "integer",
          "minimum": 0,
          "default": 30000,
          "description": "Maximum delay between retries"
        }
      },
      "additionalProperties": false
    },
    "CostTracking": {
      "type": "object",
      "description": "Cost governance and allocation tracking for LLM usage",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable cost tracking for this agent"
        },
        "budget_alert_threshold": {
          "type": "number",
          "minimum": 0,
          "description": "Alert threshold in dollars for budget monitoring"
        },
        "budget_limit_usd": {
          "type": "number",
          "minimum": 0,
          "description": "Hard budget limit in USD"
        },
        "cost_allocation_tags": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Tags for cost allocation and chargeback (e.g., project, team, service)"
        }
      },
      "additionalProperties": true
    },
    "Tool": {
      "type": "object",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "mcp",
            "kubernetes",
            "http",
            "api",
            "grpc",
            "function",
            "a2a",
            "webhook",
            "schedule",
            "pipeline",
            "workflow",
            "artifact",
            "git-commit",
            "ci-status",
            "comment",
            "library",
            "custom"
          ],
          "description": "Tool/trigger type: mcp (Model Context Protocol), kubernetes (K8s API), http (HTTP endpoints), api (REST APIs), grpc (gRPC), function (local), a2a (agent-to-agent), webhook (event triggers), schedule (cron triggers), pipeline (CI/CD events), workflow (status changes), artifact (file outputs), git-commit (commit outputs), ci-status (pipeline status), comment (MR/issue comments), library (reusable logic), custom"
        },
        "name": {
          "type": "string",
          "description": "Tool name/identifier"
        },
        "description": {
          "type": "string",
          "description": "Tool description"
        },
        "handler": {
          "type": "object",
          "description": "Tool handler configuration",
          "properties": {
            "runtime": {
              "type": "string"
            },
            "capability": {
              "type": "string"
            }
          },
          "additionalProperties": true
        },
        "capabilities": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Capability"
          }
        }
      },
      "additionalProperties": true
    },
    "TokenBudget": {
      "type": "object",
      "description": "Token budget configuration for cost control (v0.3.6+). Enforces hard limits on token usage.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "input_limit": {
          "type": "integer",
          "minimum": 100,
          "description": "Maximum input tokens per request"
        },
        "output_limit": {
          "type": "integer",
          "minimum": 100,
          "description": "Maximum output tokens per request"
        },
        "total_limit": {
          "type": "integer",
          "minimum": 200,
          "description": "Maximum total tokens (input + output) per request"
        },
        "daily_limit": {
          "type": "integer",
          "description": "Maximum tokens per day across all requests"
        },
        "enforcement": {
          "type": "string",
          "enum": [
            "soft",
            "hard",
            "adaptive"
          ],
          "default": "hard",
          "description": "Budget enforcement: soft (warn), hard (block), adaptive (scale down)"
        },
        "overflow_behavior": {
          "type": "string",
          "enum": [
            "truncate",
            "error",
            "summarize"
          ],
          "default": "truncate",
          "description": "Behavior when budget exceeded: truncate (cut off), error (reject), summarize (compress)"
        }
      },
      "additionalProperties": false
    },
    "TokenEfficiency": {
      "type": "object",
      "description": "Comprehensive token efficiency configuration (v0.3.6+). Enables 70-95% cost savings through declarative optimization.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable token efficiency optimizations"
        },
        "context_management": {
          "$ref": "#/definitions/ContextManagement",
          "description": "Context pruning, summarization, and caching"
        },
        "prompt_caching": {
          "$ref": "#/definitions/PromptCaching",
          "description": "Provider-specific prompt caching (Anthropic, OpenAI)"
        },
        "token_budget": {
          "$ref": "#/definitions/TokenBudget",
          "description": "Hard token limits and enforcement"
        },
        "tool_output_limits": {
          "$ref": "#/definitions/ToolOutputLimits",
          "description": "Limits on tool output sizes"
        },
        "streaming": {
          "type": "object",
          "description": "Streaming configuration for reduced latency",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "chunk_size": {
              "type": "integer",
              "default": 512,
              "description": "Chunk size in tokens for streaming"
            }
          }
        },
        "knowledge_graph": {
          "type": "object",
          "description": "Knowledge graph efficiency (98% token reduction)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "max_context_tokens": {
              "type": "integer",
              "default": 10000,
              "description": "Maximum tokens for knowledge graph context (vs 500k+ full codebase)"
            },
            "indexing_strategy": {
              "type": "string",
              "enum": [
                "full",
                "selective",
                "on_demand"
              ],
              "default": "selective"
            }
          }
        },
        "checkpoint_compression": {
          "type": "object",
          "description": "Checkpoint compression for long-running agents",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "strategy": {
              "type": "string",
              "enum": [
                "delta",
                "full",
                "hybrid"
              ],
              "default": "delta",
              "description": "Compression strategy: delta (only changes), full (entire state), hybrid (adaptive)"
            },
            "compression_ratio": {
              "type": "number",
              "minimum": 0.1,
              "maximum": 0.9,
              "default": 0.2,
              "description": "Target compression ratio (0.2 = 80% reduction)"
            }
          }
        },
        "estimated_savings": {
          "type": "object",
          "description": "Estimated cost savings (for documentation)",
          "properties": {
            "percentage": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "Estimated percentage cost savings"
            },
            "baseline_cost": {
              "type": "number",
              "description": "Baseline cost per request (USD)"
            },
            "optimized_cost": {
              "type": "number",
              "description": "Optimized cost per request (USD)"
            }
          }
        }
      },
      "additionalProperties": false
    },
    "ToolOutputLimits": {
      "type": "object",
      "description": "Tool output size limits for token efficiency (v0.3.6+). Prevents excessive tool outputs.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "max_tokens_per_tool": {
          "type": "integer",
          "default": 5000,
          "description": "Maximum tokens per tool output"
        },
        "max_total_tokens": {
          "type": "integer",
          "default": 50000,
          "description": "Maximum total tokens from all tool outputs"
        },
        "truncation_strategy": {
          "type": "string",
          "enum": [
            "head",
            "tail",
            "middle",
            "smart"
          ],
          "default": "smart",
          "description": "Truncation strategy: head (keep start), tail (keep end), middle (keep start+end), smart (semantic truncation)"
        },
        "large_output_handling": {
          "type": "string",
          "enum": [
            "truncate",
            "summarize",
            "error",
            "stream"
          ],
          "default": "summarize",
          "description": "Behavior for large outputs: truncate (cut off), summarize (compress), error (reject), stream (chunk)"
        }
      },
      "additionalProperties": false
    },
    "Capability": {
      "type": "object",
      "required": [
        "name",
        "type"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
        },
        "type": {
          "type": "string",
          "enum": [
            "tool",
            "expert",
            "infrastructure",
            "agent"
          ]
        },
        "description": {
          "type": "string"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": true
        },
        "available": {
          "type": "boolean",
          "default": true
        },
        "version": {
          "type": "string"
        }
      }
    },
    "Autonomy": {
      "type": "object",
      "description": "Agent autonomy configuration",
      "properties": {
        "level": {
          "type": "string",
          "enum": [
            "supervised",
            "assisted",
            "semi_autonomous",
            "autonomous",
            "fully_autonomous"
          ],
          "description": "Autonomy level: supervised (all approval), assisted (guidance with approval), semi_autonomous (limited autonomy), autonomous (self-directed), fully_autonomous (no oversight)"
        },
        "approval_required": {
          "description": "Whether human approval is required, or list of specific actions requiring approval",
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of action types that require human approval"
            }
          ]
        },
        "allowed_actions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Actions the agent is allowed to perform"
        },
        "blocked_actions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Actions the agent is explicitly blocked from"
        },
        "escalation_policy": {
          "type": "object",
          "description": "Policy for escalating to humans or other agents",
          "properties": {
            "triggers": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Conditions that trigger escalation"
            },
            "notify": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Notification channels (e.g., slack:#channel, gitlab:@team)"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "Constraints": {
      "type": "object",
      "description": "Agent resource and operational constraints",
      "properties": {
        "cost": {
          "type": "object",
          "description": "Cost constraints for LLM usage",
          "properties": {
            "maxTokensPerDay": {
              "type": "integer",
              "description": "Maximum tokens per day"
            },
            "maxTokensPerRequest": {
              "type": "integer",
              "description": "Maximum tokens per request"
            },
            "maxCostPerDay": {
              "type": "number",
              "description": "Maximum cost per day"
            },
            "currency": {
              "type": "string",
              "description": "Currency for cost tracking (e.g., USD, EUR)"
            }
          },
          "additionalProperties": true
        },
        "performance": {
          "type": "object",
          "description": "Performance constraints",
          "properties": {
            "maxLatencySeconds": {
              "type": "number",
              "description": "Maximum response latency in seconds"
            },
            "maxConcurrentRequests": {
              "type": "integer",
              "description": "Maximum concurrent requests"
            },
            "timeoutSeconds": {
              "type": "number",
              "description": "Request timeout in seconds"
            }
          },
          "additionalProperties": true
        },
        "resources": {
          "type": "object",
          "description": "Compute resource constraints (Kubernetes-style)",
          "properties": {
            "cpu": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                }
              ],
              "description": "CPU limit (e.g., '1', '500m', 1)"
            },
            "memory": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                }
              ],
              "description": "Memory limit (e.g., '2Gi', '512Mi')"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "ContextManagement": {
      "type": "object",
      "description": "Token efficiency configuration for context management (v0.3.6+). Enables 70-95% cost savings through intelligent context optimization.",
      "properties": {
        "strategy": {
          "type": "string",
          "enum": [
            "none",
            "basic_pruning",
            "semantic_pruning",
            "adaptive"
          ],
          "default": "none",
          "description": "Context optimization strategy: none (no optimization), basic_pruning (remove old messages), semantic_pruning (keep relevant context), adaptive (model-driven)"
        },
        "pruning": {
          "type": "object",
          "description": "Context pruning configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "threshold": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3,
              "description": "Relevance threshold for keeping context (0.0-1.0)"
            },
            "max_tokens": {
              "type": "integer",
              "minimum": 100,
              "description": "Maximum tokens to keep in context"
            },
            "preserve_recent": {
              "type": "integer",
              "default": 5,
              "description": "Always preserve N most recent messages"
            }
          }
        },
        "summarization": {
          "type": "object",
          "description": "Context summarization configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "model": {
              "type": "string",
              "enum": ["haiku", "gpt-4o-mini", "custom"],
              "default": "haiku",
              "description": "Model for summarization (use cheap models)"
            },
            "compression_ratio": {
              "type": "number",
              "minimum": 0.1,
              "maximum": 0.9,
              "default": 0.3,
              "description": "Target compression ratio (0.3 = 70% reduction)"
            },
            "trigger_threshold": {
              "type": "integer",
              "default": 50000,
              "description": "Trigger summarization when context exceeds this token count"
            }
          }
        },
        "caching": {
          "type": "object",
          "description": "Context caching configuration (provider-specific)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ttl": {
              "type": "integer",
              "default": 300,
              "description": "Cache TTL in seconds"
            },
            "strategy": {
              "type": "string",
              "enum": ["static", "dynamic", "hybrid"],
              "default": "static",
              "description": "Caching strategy"
            }
          }
        }
      },
      "additionalProperties": false
    },
    "State": {
      "type": "object",
      "description": "Agent state management configuration",
      "properties": {
        "mode": {
          "type": "string",
          "enum": [
            "stateless",
            "session",
            "long_running"
          ],
          "description": "State persistence mode"
        },
        "storage": {
          "type": "object",
          "description": "State storage configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "memory",
                "vector-db",
                "kv",
                "rdbms",
                "custom"
              ],
              "description": "Storage backend type"
            },
            "retention": {
              "type": "string",
              "description": "Data retention period (e.g., '30d', '1h')"
            },
            "config": {
              "type": "object",
              "description": "Storage-specific configuration",
              "properties": {
                "provider": {
                  "type": "string",
                  "description": "Storage provider (e.g., redis, postgres, pinecone)"
                },
                "prefix": {
                  "type": "string",
                  "description": "Key prefix for namespacing"
                },
                "endpoint": {
                  "type": "string",
                  "description": "Storage endpoint URL"
                }
              },
              "additionalProperties": true
            },
            "encryption": {
              "type": "object",
              "description": "Storage encryption configuration",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "algorithm": {
                  "type": "string",
                  "description": "Encryption algorithm (e.g., aes-256-gcm)"
                },
                "keyRef": {
                  "type": "string",
                  "description": "Reference to encryption key (e.g., env:ENCRYPTION_KEY)"
                }
              },
              "additionalProperties": true
            }
          },
          "additionalProperties": true
        },
        "context_window": {
          "type": "object",
          "description": "Context window management for conversation history",
          "properties": {
            "max_messages": {
              "type": "integer",
              "description": "Maximum messages to retain"
            },
            "max_tokens": {
              "type": "integer",
              "description": "Maximum tokens in context"
            },
            "strategy": {
              "type": "string",
              "enum": [
                "truncation",
                "summarization",
                "sliding_window"
              ],
              "description": "Strategy for managing context overflow"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "AgentObservability": {
      "type": "object",
      "description": "Agent observability configuration",
      "properties": {
        "tracing": {
          "type": "object",
          "description": "Distributed tracing configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "exporter": {
              "type": "string",
              "description": "Trace exporter (e.g., otlp, jaeger, zipkin)"
            },
            "endpoint": {
              "type": "string",
              "description": "Trace collector endpoint"
            }
          },
          "additionalProperties": true
        },
        "metrics": {
          "type": "object",
          "description": "Metrics collection configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "exporter": {
              "type": "string",
              "description": "Metrics exporter (e.g., prometheus, otlp)"
            },
            "endpoint": {
              "type": "string",
              "description": "Metrics endpoint"
            },
            "port": {
              "type": "integer",
              "description": "Metrics server port"
            },
            "customMetrics": {
              "type": "array",
              "description": "Custom metrics definitions",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "counter",
                      "gauge",
                      "histogram"
                    ]
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "additionalProperties": true
        },
        "logging": {
          "type": "object",
          "description": "Logging configuration",
          "properties": {
            "level": {
              "type": "string",
              "enum": [
                "debug",
                "info",
                "warn",
                "error"
              ],
              "description": "Log level"
            },
            "format": {
              "type": "string",
              "enum": [
                "json",
                "text"
              ],
              "description": "Log format"
            }
          },
          "additionalProperties": true
        },
        "alerting": {
          "type": "object",
          "description": "Alerting configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "channels": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "rules": {
              "type": "array",
              "items": {
                "type": "object"
              }
            }
          },
          "additionalProperties": true
        },
        "slo": {
          "type": "object",
          "description": "Service level objectives",
          "properties": {
            "availability": {
              "type": "number"
            },
            "latency_p95_ms": {
              "type": "integer"
            },
            "error_budget": {
              "type": "number"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "Safety": {
      "type": "object",
      "description": "Agent safety and security configuration",
      "properties": {
        "content_filtering": {
          "type": "object",
          "description": "Content filtering for inputs/outputs",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "categories": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Categories to filter (e.g., pii, credentials)"
            },
            "threshold": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high"
              ],
              "description": "Filtering sensitivity"
            },
            "action": {
              "type": "string",
              "enum": [
                "warn",
                "block",
                "redact"
              ],
              "description": "Action when content matches"
            }
          },
          "additionalProperties": true
        },
        "pii_detection": {
          "type": "object",
          "description": "PII detection and handling",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "types": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "PII types to detect (email, phone, ssn, api_key, etc.)"
            },
            "action": {
              "type": "string",
              "enum": [
                "warn",
                "block",
                "redact"
              ],
              "description": "Action when PII detected"
            }
          },
          "additionalProperties": true
        },
        "rate_limiting": {
          "type": "object",
          "description": "Rate limiting configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "requests_per_minute": {
              "type": "integer"
            },
            "burst_limit": {
              "type": "integer"
            }
          },
          "additionalProperties": true
        },
        "guardrails": {
          "type": "object",
          "description": "Guardrails for agent behavior",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "policies": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "description": "Policy definitions"
            },
            "max_tool_calls": {
              "type": "integer",
              "description": "Maximum tool calls per turn"
            },
            "max_execution_time_seconds": {
              "type": "integer",
              "description": "Maximum execution time"
            }
          },
          "additionalProperties": true
        },
        "human_in_loop": {
          "type": "object",
          "description": "Human-in-the-loop configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "triggers": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Conditions that require human approval"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "MCPExtension": {
      "type": "object",
      "description": "Model Context Protocol (MCP) extension for agents - supports tools, resources, and prompts",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether MCP is enabled for this agent"
        },
        "server_type": {
          "type": "string",
          "enum": [
            "stdio",
            "http",
            "sse"
          ],
          "description": "MCP server transport mechanism"
        },
        "server_name": {
          "type": "string",
          "description": "Name of the MCP server"
        },
        "tools": {
          "type": "array",
          "description": "MCP tools (functions/actions the agent can invoke)",
          "items": {
            "$ref": "#/definitions/MCPTool"
          }
        },
        "resources": {
          "type": "array",
          "description": "MCP resources (read-only context/data sources)",
          "items": {
            "$ref": "#/definitions/MCPResource"
          }
        },
        "prompts": {
          "type": "array",
          "description": "MCP prompts (templated workflows and interactions)",
          "items": {
            "$ref": "#/definitions/MCPPrompt"
          }
        }
      },
      "additionalProperties": false
    },
    "SkillsExtension": {
      "type": "object",
      "description": "Anthropic/AgentSkills.io compatibility extension - enables OSSA agents to be packaged as Skills",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable Skills format export/import for this agent"
        },
        "allowedTools": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Pre-approved tools list (maps to spec.capabilities). Matches Skills allowed-tools field."
        },
        "platforms": {
          "type": "array",
          "items": {
            "type": "string",
            "examples": [
              "Claude",
              "Claude Code",
              "Cursor",
              "Kiro"
            ]
          },
          "description": "Compatible AI platforms/environments"
        },
        "license": {
          "type": "string",
          "description": "License for the skill (e.g., Apache-2.0, MIT, GPL-2.0-or-later)"
        },
        "progressiveDisclosure": {
          "type": "object",
          "description": "Token budget for progressive disclosure stages",
          "properties": {
            "metadataTokens": {
              "type": "integer",
              "default": 100,
              "description": "Max tokens for metadata stage (name + description)"
            },
            "instructionsTokens": {
              "type": "integer",
              "default": 5000,
              "description": "Max tokens for instructions stage (full SKILL.md body)"
            }
          }
        },
        "directories": {
          "type": "object",
          "description": "Skills directory structure mapping",
          "properties": {
            "references": {
              "type": "string",
              "description": "Path to on-demand documentation"
            },
            "assets": {
              "type": "string",
              "description": "Path to static resources"
            }
          }
        }
      },
      "additionalProperties": true
    },
    "AgentsMdExtension": {
      "type": "object",
      "description": "Agents.md extension for bidirectional markdown/OSSA conversion - enables generation, parsing, synchronization, and validation between AGENTS.md files and OSSA manifests",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable agents_md extension"
        },
        "file_path": {
          "type": "string",
          "default": "AGENTS.md",
          "description": "Path to AGENTS.md file (relative to repository root)",
          "examples": [
            "AGENTS.md",
            ".github/AGENTS.md",
            "docs/AGENTS.md"
          ]
        },
        "generate": {
          "type": "boolean",
          "default": true,
          "description": "Auto-generate AGENTS.md from manifest"
        },
        "auto_discover": {
          "type": "boolean",
          "default": false,
          "description": "Auto-discover agents from AGENTS.md sections"
        },
        "sections": {
          "type": "object",
          "description": "Section-level configuration for AGENTS.md",
          "properties": {
            "dev_environment": {
              "$ref": "#/definitions/AgentsMdSection"
            },
            "testing": {
              "$ref": "#/definitions/AgentsMdSection"
            },
            "pr_instructions": {
              "$ref": "#/definitions/AgentsMdSection"
            },
            "code_style": {
              "$ref": "#/definitions/AgentsMdSection"
            },
            "security": {
              "$ref": "#/definitions/AgentsMdSection"
            },
            "architecture": {
              "$ref": "#/definitions/AgentsMdSection"
            },
            "custom": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AgentsMdSection"
              },
              "description": "Additional custom sections"
            }
          },
          "additionalProperties": {
            "$ref": "#/definitions/AgentsMdSection"
          }
        },
        "sync": {
          "type": "object",
          "description": "Synchronization configuration",
          "properties": {
            "on_manifest_change": {
              "type": "boolean",
              "default": true,
              "description": "Regenerate AGENTS.md when manifest changes"
            },
            "include_comments": {
              "type": "boolean",
              "default": true,
              "description": "Include generation comments in output"
            },
            "preserve_custom": {
              "type": "boolean",
              "default": true,
              "description": "Preserve custom sections not mapped to manifest"
            },
            "watch": {
              "type": "boolean",
              "default": false,
              "description": "Watch for file changes"
            }
          },
          "additionalProperties": false
        },
        "mapping": {
          "type": "object",
          "description": "Explicit mapping between OSSA and agents.md",
          "properties": {
            "tools_to_dev_environment": {
              "type": "boolean",
              "default": true,
              "description": "Map spec.tools to Development Environment section"
            },
            "constraints_to_testing": {
              "type": "boolean",
              "default": true,
              "description": "Map spec.constraints to Testing section"
            },
            "autonomy_to_pr_instructions": {
              "type": "boolean",
              "default": true,
              "description": "Map spec.autonomy to PR Instructions section"
            },
            "safety_to_security": {
              "type": "boolean",
              "default": true,
              "description": "Map spec.safety to Security section"
            },
            "role_to_overview": {
              "type": "boolean",
              "default": true,
              "description": "Map spec.role to Overview section"
            }
          },
          "additionalProperties": false
        },
        "cursor_integration": {
          "type": "boolean",
          "default": false,
          "description": "Generate Cursor-compatible content"
        },
        "include_metadata": {
          "type": "boolean",
          "default": true,
          "description": "Include OSSA metadata in generated AGENTS.md"
        }
      },
      "additionalProperties": false
    },
    "AgentsMdSection": {
      "type": "object",
      "description": "Configuration for an individual AGENTS.md section",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether this section is enabled"
        },
        "source": {
          "type": "string",
          "description": "OSSA manifest path to derive content from",
          "examples": [
            "spec.tools",
            "spec.constraints",
            "spec.autonomy",
            "spec.role"
          ]
        },
        "custom": {
          "type": "string",
          "description": "Custom markdown content for this section"
        },
        "append": {
          "type": "string",
          "description": "Content to append after auto-generated content"
        },
        "prepend": {
          "type": "string",
          "description": "Content to prepend before auto-generated content"
        },
        "title": {
          "type": "string",
          "description": "Override default section title"
        },
        "title_format": {
          "type": "string",
          "description": "Format string for section title",
          "examples": [
            "[{metadata.labels.domain}] {title}"
          ]
        }
      },
      "additionalProperties": false
    },
    "LlmsTxtExtension": {
      "type": "object",
      "description": "llms.txt extension for bidirectional markdown/OSSA conversion - enables generation, parsing, synchronization, and validation between llms.txt files and OSSA manifests",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable llms_txt extension"
        },
        "file_path": {
          "type": "string",
          "default": "llms.txt",
          "description": "Path to llms.txt file (relative to repository root)",
          "examples": [
            "llms.txt",
            "docs/llms.txt",
            ".llms.txt"
          ]
        },
        "generate": {
          "type": "boolean",
          "default": true,
          "description": "Auto-generate llms.txt from manifest"
        },
        "auto_discover": {
          "type": "boolean",
          "default": false,
          "description": "Auto-discover agents from llms.txt sections"
        },
        "format": {
          "type": "object",
          "description": "llms.txt format configuration",
          "properties": {
            "include_h1_title": {
              "type": "boolean",
              "default": true,
              "description": "Include H1 title"
            },
            "include_blockquote": {
              "type": "boolean",
              "default": true,
              "description": "Include blockquote summary"
            },
            "include_h2_sections": {
              "type": "boolean",
              "default": true,
              "description": "Include H2 sections with file lists"
            },
            "include_optional": {
              "type": "boolean",
              "default": true,
              "description": "Include Optional section for secondary info"
            }
          },
          "additionalProperties": false
        },
        "sections": {
          "type": "object",
          "description": "Section-level configuration for llms.txt",
          "properties": {
            "core_specification": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "quick_start": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "cli_tools": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "sdks": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "examples": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "migration_guides": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "development": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "specification_versions": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "openapi_specifications": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "documentation": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "optional": {
              "$ref": "#/definitions/LlmsTxtSection"
            },
            "custom": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/LlmsTxtSection"
              },
              "description": "Additional custom sections"
            }
          },
          "additionalProperties": {
            "$ref": "#/definitions/LlmsTxtSection"
          }
        },
        "sync": {
          "type": "object",
          "description": "Synchronization configuration",
          "properties": {
            "on_manifest_change": {
              "type": "boolean",
              "default": true,
              "description": "Regenerate llms.txt when manifest changes"
            },
            "include_comments": {
              "type": "boolean",
              "default": false,
              "description": "Include generation comments in output (llms.txt should be clean)"
            },
            "preserve_custom": {
              "type": "boolean",
              "default": true,
              "description": "Preserve custom sections not mapped to manifest"
            },
            "watch": {
              "type": "boolean",
              "default": false,
              "description": "Watch for file changes"
            }
          },
          "additionalProperties": false
        },
        "mapping": {
          "type": "object",
          "description": "Explicit mapping between OSSA and llms.txt",
          "properties": {
            "metadata_to_h1": {
              "type": "boolean",
              "default": true,
              "description": "Map metadata.name to H1 title"
            },
            "description_to_blockquote": {
              "type": "boolean",
              "default": true,
              "description": "Map metadata.description to blockquote"
            },
            "spec_to_core_specification": {
              "type": "boolean",
              "default": true,
              "description": "Map spec to Core Specification section"
            },
            "tools_to_cli_tools": {
              "type": "boolean",
              "default": true,
              "description": "Map spec.tools to CLI Tools section"
            },
            "examples_to_examples": {
              "type": "boolean",
              "default": true,
              "description": "Map examples to Examples section"
            },
            "migrations_to_migration_guides": {
              "type": "boolean",
              "default": true,
              "description": "Map migrations to Migration Guides section"
            }
          },
          "additionalProperties": false
        },
        "include_metadata": {
          "type": "boolean",
          "default": false,
          "description": "Include OSSA metadata in generated llms.txt (usually false for clean output)"
        }
      },
      "additionalProperties": false
    },
    "LlmsTxtSection": {
      "type": "object",
      "description": "Configuration for an individual llms.txt section",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether this section is enabled"
        },
        "source": {
          "type": "string",
          "description": "OSSA manifest path to derive content from",
          "examples": [
            "spec.tools",
            "metadata.description",
            "examples"
          ]
        },
        "custom": {
          "type": "string",
          "description": "Custom markdown content for this section"
        },
        "append": {
          "type": "string",
          "description": "Content to append after auto-generated content"
        },
        "prepend": {
          "type": "string",
          "description": "Content to prepend before auto-generated content"
        },
        "title": {
          "type": "string",
          "description": "Override default section title"
        },
        "file_list": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of files/links to include in this section"
        }
      },
      "additionalProperties": false
    },
    "AutoGenExtension": {
      "type": "object",
      "description": "Microsoft AutoGen multi-agent framework extension for OSSA v0.3.4 - supports ConversableAgent, AssistantAgent, UserProxyAgent, GroupChat, and nested delegation patterns",
      "properties": {
        "agent_type": {
          "type": "string",
          "enum": [
            "conversable_agent",
            "assistant_agent",
            "user_proxy_agent",
            "group_chat_manager",
            "teachable_agent",
            "reasoning_agent",
            "captain_agent",
            "custom_agent"
          ],
          "description": "AutoGen agent class type - determines base behavior and capabilities"
        },
        "llm_config": {
          "type": "object",
          "description": "LLM configuration for the agent (mirrors AutoGen's llm_config)",
          "properties": {
            "config_list": {
              "type": "array",
              "description": "List of LLM configurations (model, api_key reference, base_url)",
              "items": {
                "type": "object",
                "properties": {
                  "model": {
                    "type": "string",
                    "description": "Model identifier (e.g., gpt-4, claude-3-opus)"
                  },
                  "api_key_env": {
                    "type": "string",
                    "pattern": "^[A-Z][A-Z0-9_]*$",
                    "description": "Environment variable containing API key (never store keys directly)"
                  },
                  "base_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Custom API endpoint (for Azure, local models, etc.)"
                  },
                  "api_type": {
                    "type": "string",
                    "enum": [
                      "openai",
                      "azure",
                      "anthropic",
                      "ollama",
                      "litellm"
                    ],
                    "description": "API provider type"
                  },
                  "api_version": {
                    "type": "string",
                    "description": "API version (required for Azure)"
                  }
                }
              }
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2,
              "default": 0.7,
              "description": "Sampling temperature"
            },
            "timeout": {
              "type": "integer",
              "minimum": 1,
              "default": 600,
              "description": "Request timeout in seconds"
            },
            "cache_seed": {
              "oneOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Seed for response caching (null disables caching)"
            }
          }
        },
        "human_input_mode": {
          "type": "string",
          "enum": [
            "ALWAYS",
            "NEVER",
            "TERMINATE"
          ],
          "default": "NEVER",
          "description": "When to request human input: ALWAYS (after every response), NEVER (fully autonomous), TERMINATE (on termination conditions)"
        },
        "code_execution_config": {
          "oneOf": [
            {
              "type": "object",
              "description": "Code execution sandbox configuration",
              "properties": {
                "work_dir": {
                  "type": "string",
                  "description": "Working directory for code execution",
                  "default": "workspace"
                },
                "use_docker": {
                  "oneOf": [
                    {
                      "type": "boolean"
                    },
                    {
                      "type": "string"
                    }
                  ],
                  "description": "Docker image for sandboxed execution (true, false, or image name)",
                  "default": false
                },
                "timeout": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 60,
                  "description": "Code execution timeout in seconds"
                },
                "last_n_messages": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 1,
                  "description": "Number of messages to scan for code blocks"
                },
                "executor_type": {
                  "type": "string",
                  "enum": [
                    "local_command_line",
                    "docker_command_line",
                    "jupyter",
                    "azure_container_instance"
                  ],
                  "default": "local_command_line",
                  "description": "Type of code executor to use"
                },
                "allowed_languages": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "python",
                      "bash",
                      "shell",
                      "javascript",
                      "powershell"
                    ]
                  },
                  "default": [
                    "python",
                    "bash"
                  ],
                  "description": "Languages allowed for code execution"
                }
              }
            },
            {
              "type": "boolean",
              "const": false,
              "description": "Disable code execution"
            }
          ],
          "description": "Code execution configuration or false to disable"
        },
        "max_consecutive_auto_reply": {
          "type": "integer",
          "minimum": 0,
          "default": 10,
          "description": "Maximum auto-replies before requiring human input"
        },
        "termination_config": {
          "type": "object",
          "description": "Conversation termination settings",
          "properties": {
            "is_termination_msg": {
              "type": "string",
              "description": "Python lambda or function reference to check for termination"
            },
            "termination_keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": [
                "TERMINATE"
              ],
              "description": "Keywords that trigger conversation termination"
            },
            "max_turns": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum conversation turns before termination"
            }
          }
        },
        "group_chat_config": {
          "type": "object",
          "description": "GroupChat configuration for multi-agent orchestration",
          "properties": {
            "agents": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "References to OSSA agents participating in group chat"
            },
            "max_round": {
              "type": "integer",
              "minimum": 1,
              "default": 10,
              "description": "Maximum conversation rounds"
            },
            "admin_name": {
              "type": "string",
              "default": "Admin",
              "description": "Name of the admin agent"
            },
            "speaker_selection_method": {
              "type": "string",
              "enum": [
                "auto",
                "manual",
                "random",
                "round_robin",
                "custom"
              ],
              "default": "auto",
              "description": "Method for selecting next speaker"
            },
            "custom_speaker_selection_func": {
              "type": "string",
              "description": "Reference to custom speaker selection function"
            },
            "allow_repeat_speaker": {
              "oneOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ],
              "default": true,
              "description": "Allow same speaker consecutive turns (true/false or list of agent names)"
            },
            "send_introductions": {
              "type": "boolean",
              "default": false,
              "description": "Send agent introductions at conversation start"
            }
          }
        },
        "function_map": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Mapping of function names to implementations (module.function or class.method)"
        },
        "register_for_llm": {
          "type": "array",
          "description": "Functions registered for LLM to call (tool definitions)",
          "items": {
            "type": "object",
            "required": [
              "name"
            ],
            "properties": {
              "name": {
                "type": "string",
                "description": "Function name"
              },
              "description": {
                "type": "string",
                "description": "Function description for LLM"
              },
              "parameters": {
                "$ref": "#/definitions/JSONSchemaDefinition",
                "description": "Function parameter schema"
              }
            }
          }
        },
        "register_for_execution": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Function names that this agent can execute"
        },
        "nested_chat_config": {
          "type": "object",
          "description": "Configuration for nested agent conversations (delegation)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable nested chat delegation"
            },
            "inner_agents": {
              "type": "array",
              "description": "Agents that can be delegated to",
              "items": {
                "type": "object",
                "properties": {
                  "agent_ref": {
                    "type": "string",
                    "description": "Reference to inner OSSA agent"
                  },
                  "trigger": {
                    "type": "string",
                    "description": "Trigger condition (regex pattern or keyword)"
                  },
                  "max_turns": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Maximum turns for nested conversation"
                  }
                }
              }
            },
            "message_transformer": {
              "type": "string",
              "description": "Function to transform messages between outer/inner chats"
            }
          }
        },
        "system_message": {
          "type": "string",
          "description": "System message/prompt for the agent (maps to OSSA spec.instructions)"
        },
        "description": {
          "type": "string",
          "description": "Short description for speaker selection in group chat"
        },
        "teachability_config": {
          "type": "object",
          "description": "Configuration for TeachableAgent learning capabilities",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable teachability/learning"
            },
            "verbosity": {
              "type": "integer",
              "minimum": 0,
              "maximum": 3,
              "default": 0,
              "description": "Logging verbosity level"
            },
            "reset_db": {
              "type": "boolean",
              "default": false,
              "description": "Reset teachability database on start"
            },
            "path_to_db_dir": {
              "type": "string",
              "description": "Path to teachability database directory"
            },
            "recall_threshold": {
              "type": "number",
              "minimum": 0,
              "maximum": 2,
              "default": 1.5,
              "description": "Similarity threshold for memory recall"
            }
          }
        }
      },
      "additionalProperties": true
    },
    "LangFlowExtension": {
      "type": "object",
      "description": "LangFlow visual flow builder integration - enables bidirectional mapping between LangFlow flows and OSSA manifests",
      "required": [
        "flow_id"
      ],
      "properties": {
        "flow_id": {
          "type": "string",
          "format": "uuid",
          "description": "LangFlow flow UUID (from flow URL or API)"
        },
        "components": {
          "type": "array",
          "description": "LangFlow component mappings to OSSA capabilities",
          "items": {
            "type": "object",
            "required": [
              "node_id",
              "component_type"
            ],
            "properties": {
              "node_id": {
                "type": "string",
                "pattern": "^[A-Za-z]+-[A-Za-z0-9]+$",
                "description": "LangFlow node ID (format: ComponentType-UUID)"
              },
              "component_type": {
                "type": "string",
                "enum": [
                  "ChatInput",
                  "ChatOutput",
                  "TextInput",
                  "TextOutput",
                  "OpenAIModel",
                  "AnthropicModel",
                  "OllamaModel",
                  "Agent",
                  "Tool",
                  "VectorStore",
                  "Retriever",
                  "Memory",
                  "Prompt",
                  "Parser",
                  "Chain",
                  "Embeddings",
                  "Document",
                  "Custom"
                ],
                "description": "LangFlow component type"
              },
              "ossa_capability": {
                "type": "string",
                "pattern": "^[a-z][a-z0-9_]*$",
                "description": "Mapped OSSA capability identifier"
              },
              "config": {
                "type": "object",
                "description": "Component-specific configuration",
                "additionalProperties": true
              }
            },
            "additionalProperties": false
          }
        },
        "tweaks": {
          "type": "object",
          "description": "Runtime parameter overrides for flow execution. Keys are parameter names or component IDs.",
          "additionalProperties": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "object"
              }
            ]
          }
        },
        "api_endpoint": {
          "type": "object",
          "description": "LangFlow API configuration",
          "required": [
            "base_url"
          ],
          "properties": {
            "base_url": {
              "type": "string",
              "format": "uri",
              "description": "LangFlow server base URL"
            },
            "auth_method": {
              "type": "string",
              "enum": [
                "api_key",
                "bearer_token",
                "none"
              ],
              "default": "api_key",
              "description": "Authentication method"
            },
            "api_key_env": {
              "type": "string",
              "pattern": "^[A-Z][A-Z0-9_]*$",
              "default": "LANGFLOW_API_KEY",
              "description": "Environment variable containing API key"
            },
            "custom_endpoint": {
              "type": "string",
              "description": "Custom endpoint name (if configured in LangFlow)"
            },
            "timeout_seconds": {
              "type": "integer",
              "minimum": 1,
              "maximum": 600,
              "default": 120,
              "description": "API request timeout in seconds"
            }
          },
          "additionalProperties": false
        },
        "execution_mode": {
          "type": "string",
          "enum": [
            "sync",
            "async",
            "stream",
            "batch"
          ],
          "default": "sync",
          "description": "Flow execution mode: sync (blocking), async (non-blocking), stream (SSE), batch (parallel)"
        },
        "input_mapping": {
          "type": "object",
          "description": "Map OSSA input_schema fields to LangFlow inputs",
          "properties": {
            "target_components": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Component IDs to receive input"
            },
            "field_mappings": {
              "type": "object",
              "description": "Map OSSA input fields to component parameters",
              "additionalProperties": {
                "type": "object",
                "required": [
                  "component",
                  "parameter"
                ],
                "properties": {
                  "component": {
                    "type": "string",
                    "description": "Target component ID"
                  },
                  "parameter": {
                    "type": "string",
                    "description": "Component parameter name"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "output_mapping": {
          "type": "object",
          "description": "Map LangFlow outputs to OSSA output_schema",
          "properties": {
            "source_components": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Component IDs to extract output from"
            },
            "field_mappings": {
              "type": "object",
              "description": "Map component outputs to OSSA output fields",
              "additionalProperties": {
                "type": "object",
                "required": [
                  "component"
                ],
                "properties": {
                  "component": {
                    "type": "string",
                    "description": "Source component ID"
                  },
                  "output_field": {
                    "type": "string",
                    "description": "Component output field name"
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "state_persistence": {
          "type": "object",
          "description": "Map flow variables to OSSA state",
          "properties": {
            "memory_component": {
              "type": "string",
              "description": "Memory component ID for conversation history"
            },
            "session_id_field": {
              "type": "string",
              "default": "session_id",
              "description": "Input field containing session identifier"
            },
            "persist_outputs": {
              "type": "boolean",
              "default": true,
              "description": "Persist outputs across invocations"
            }
          },
          "additionalProperties": false
        },
        "openapi_spec": {
          "type": "object",
          "description": "OpenAPI specification for flow endpoints",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable OpenAPI spec generation/discovery"
            },
            "spec_url": {
              "type": "string",
              "format": "uri",
              "description": "URL to generated OpenAPI spec"
            },
            "zod_schema": {
              "type": "boolean",
              "default": true,
              "description": "Generate Zod validation schemas from OpenAPI"
            }
          },
          "additionalProperties": false
        },
        "validation": {
          "type": "object",
          "description": "Runtime validation configuration",
          "properties": {
            "validate_inputs": {
              "type": "boolean",
              "default": true,
              "description": "Validate inputs against OSSA input_schema"
            },
            "validate_outputs": {
              "type": "boolean",
              "default": true,
              "description": "Validate outputs against OSSA output_schema"
            },
            "zod_runtime": {
              "type": "boolean",
              "default": true,
              "description": "Use Zod for runtime validation"
            },
            "openapi_validation": {
              "type": "boolean",
              "default": false,
              "description": "Validate against OpenAPI spec"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "MCPTool": {
      "type": "object",
      "description": "MCP tool definition - actions/functions the agent can invoke",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Unique tool name"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of what the tool does"
        },
        "input_schema": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for tool input parameters (snake_case)"
        },
        "inputSchema": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for tool input parameters (camelCase - MCP SDK convention)"
        }
      },
      "additionalProperties": true
    },
    "MCPResource": {
      "type": "object",
      "description": "MCP resource definition - read-only context and data sources",
      "required": [
        "uri",
        "name"
      ],
      "properties": {
        "uri": {
          "type": "string",
          "format": "uri",
          "description": "Unique resource identifier (URI)"
        },
        "name": {
          "type": "string",
          "description": "Human-readable resource name"
        },
        "description": {
          "type": "string",
          "description": "Description of the resource and its contents"
        },
        "mimeType": {
          "type": "string",
          "description": "MIME type of the resource content",
          "examples": [
            "text/plain",
            "application/json",
            "text/markdown",
            "image/png"
          ]
        },
        "metadata": {
          "type": "object",
          "description": "Additional resource metadata",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    },
    "MCPPrompt": {
      "type": "object",
      "description": "MCP prompt definition - templated messages and workflows",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Unique prompt identifier"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of the prompt purpose"
        },
        "arguments": {
          "type": "array",
          "description": "Template arguments that can be substituted",
          "items": {
            "$ref": "#/definitions/MCPPromptArgument"
          }
        }
      },
      "additionalProperties": false
    },
    "MCPPromptArgument": {
      "type": "object",
      "description": "Argument definition for MCP prompts",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Argument name"
        },
        "description": {
          "type": "string",
          "description": "Description of what this argument represents"
        },
        "required": {
          "type": "boolean",
          "default": false,
          "description": "Whether this argument is required"
        }
      },
      "additionalProperties": false
    },
    "MessagingExtension": {
      "type": "object",
      "description": "Agent-to-agent messaging configuration (v0.3.4+)",
      "properties": {
        "transport": {
          "type": "string",
          "enum": [
            "redis",
            "nats",
            "memory",
            "kafka",
            "amqp"
          ],
          "description": "Message transport type (shorthand for broker.type)"
        },
        "queues": {
          "type": "array",
          "description": "Queue definitions for messaging",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Queue name"
              },
              "description": {
                "type": "string",
                "description": "Human-readable description"
              }
            },
            "required": [
              "name"
            ]
          }
        },
        "mesh_endpoint": {
          "type": "string",
          "description": "Agent mesh endpoint URL for A2A communication"
        },
        "broker": {
          "type": "object",
          "description": "Message broker configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "redis",
                "nats",
                "memory",
                "kafka"
              ],
              "description": "Broker type"
            },
            "url": {
              "type": "string",
              "description": "Broker connection URL"
            }
          }
        },
        "publishes": {
          "type": "array",
          "description": "Channels this agent publishes to",
          "items": {
            "$ref": "#/definitions/PublishedChannel"
          }
        },
        "subscribes": {
          "type": "array",
          "description": "Channels this agent subscribes to",
          "items": {
            "$ref": "#/definitions/Subscription"
          }
        },
        "commands": {
          "type": "array",
          "description": "Commands this agent accepts (RPC-style operations)",
          "items": {
            "$ref": "#/definitions/Command"
          }
        },
        "reliability": {
          "$ref": "#/definitions/ReliabilityConfig",
          "description": "Message reliability configuration"
        }
      },
      "additionalProperties": true
    },
    "PublishedChannel": {
      "type": "object",
      "description": "Channel that an agent publishes messages to",
      "required": [
        "channel",
        "schema"
      ],
      "properties": {
        "channel": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_]*(\\.[a-z][a-z0-9_]*)*$",
          "description": "Channel name (e.g., 'security.vulnerabilities')"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of the channel"
        },
        "schema": {
          "type": "object",
          "description": "JSON Schema for published messages",
          "additionalProperties": true
        },
        "examples": {
          "type": "array",
          "description": "Example messages",
          "items": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "contentType": {
          "type": "string",
          "description": "Content type of messages",
          "default": "application/json"
        },
        "tags": {
          "type": "array",
          "description": "Tags for categorization",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "Subscription": {
      "type": "object",
      "description": "Channel subscription configuration",
      "required": [
        "channel"
      ],
      "properties": {
        "channel": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_]*(\\.[a-z][a-z0-9_]*)*$",
          "description": "Channel name to subscribe to"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description"
        },
        "schema": {
          "type": "object",
          "description": "Expected message schema",
          "additionalProperties": true
        },
        "handler": {
          "type": "string",
          "description": "Handler function name"
        },
        "filter": {
          "type": "object",
          "description": "Message filter configuration - supports JSONPath-style filtering",
          "properties": {
            "expression": {
              "type": "string",
              "description": "Filter expression"
            },
            "fields": {
              "type": "object",
              "description": "Field-based filters",
              "additionalProperties": true
            }
          },
          "additionalProperties": true
        },
        "priority": {
          "type": "string",
          "enum": [
            "low",
            "normal",
            "high",
            "critical"
          ],
          "default": "normal",
          "description": "Message priority"
        },
        "maxConcurrency": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum concurrent message processing"
        }
      },
      "additionalProperties": false
    },
    "Command": {
      "type": "object",
      "description": "RPC-style command that an agent accepts",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_]*$",
          "description": "Command name (snake_case)"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description"
        },
        "inputSchema": {
          "type": "object",
          "description": "JSON Schema for command input (camelCase)",
          "additionalProperties": true
        },
        "input_schema": {
          "type": "object",
          "description": "JSON Schema for command input (snake_case alias)",
          "additionalProperties": true
        },
        "outputSchema": {
          "type": "object",
          "description": "JSON Schema for command output (camelCase)",
          "additionalProperties": true
        },
        "output_schema": {
          "type": "object",
          "description": "JSON Schema for command output (snake_case alias)",
          "additionalProperties": true
        },
        "timeoutSeconds": {
          "type": "integer",
          "minimum": 1,
          "maximum": 3600,
          "description": "Command execution timeout in seconds"
        },
        "timeout_seconds": {
          "type": "integer",
          "minimum": 1,
          "maximum": 3600,
          "description": "Command execution timeout (snake_case alias)"
        },
        "idempotent": {
          "type": "boolean",
          "default": false,
          "description": "Whether the command is idempotent"
        },
        "async": {
          "type": "boolean",
          "default": false,
          "description": "Whether the command executes asynchronously"
        }
      },
      "additionalProperties": true
    },
    "ReliabilityConfig": {
      "type": "object",
      "description": "Message delivery reliability configuration",
      "properties": {
        "deliveryGuarantee": {
          "type": "string",
          "enum": [
            "at-least-once",
            "at-most-once",
            "exactly-once",
            "at_least_once",
            "at_most_once",
            "exactly_once"
          ],
          "default": "at-least-once",
          "description": "Message delivery guarantee"
        },
        "delivery": {
          "type": "string",
          "enum": [
            "at-least-once",
            "at-most-once",
            "exactly-once",
            "at_least_once",
            "at_most_once",
            "exactly_once"
          ],
          "description": "Message delivery guarantee (alias for deliveryGuarantee)"
        },
        "retry": {
          "type": "object",
          "description": "Retry configuration",
          "properties": {
            "maxAttempts": {
              "type": "integer",
              "minimum": 0,
              "maximum": 10,
              "default": 3,
              "description": "Maximum retry attempts"
            },
            "backoff": {
              "type": "object",
              "description": "Backoff strategy configuration",
              "properties": {
                "strategy": {
                  "type": "string",
                  "enum": [
                    "exponential",
                    "linear",
                    "constant"
                  ],
                  "default": "exponential",
                  "description": "Backoff strategy"
                },
                "initialDelayMs": {
                  "type": "integer",
                  "minimum": 0,
                  "default": 1000,
                  "description": "Initial delay in milliseconds"
                },
                "maxDelayMs": {
                  "type": "integer",
                  "minimum": 0,
                  "default": 60000,
                  "description": "Maximum delay in milliseconds"
                },
                "multiplier": {
                  "type": "number",
                  "minimum": 1,
                  "default": 2,
                  "description": "Backoff multiplier"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "dlq": {
          "type": "object",
          "description": "Dead letter queue configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable dead letter queue"
            },
            "channel": {
              "type": "string",
              "description": "Dead letter queue channel name"
            },
            "retentionDays": {
              "type": "integer",
              "minimum": 1,
              "maximum": 90,
              "default": 7,
              "description": "Message retention in days"
            }
          },
          "additionalProperties": false
        },
        "ordering": {
          "type": "object",
          "description": "Message ordering configuration",
          "properties": {
            "guarantee": {
              "type": "string",
              "enum": [
                "per-source",
                "global"
              ],
              "default": "per-source",
              "description": "Ordering guarantee level"
            },
            "mode": {
              "type": "string",
              "enum": [
                "global",
                "per_channel",
                "per-channel",
                "none"
              ],
              "description": "Ordering mode (alias for guarantee)"
            },
            "timeoutSeconds": {
              "type": "integer",
              "minimum": 1,
              "description": "Ordering timeout in seconds"
            }
          },
          "additionalProperties": true
        },
        "acknowledgment": {
          "type": "object",
          "description": "Message acknowledgment configuration",
          "properties": {
            "mode": {
              "type": "string",
              "enum": [
                "manual",
                "automatic"
              ],
              "default": "automatic",
              "description": "Acknowledgment mode"
            },
            "timeoutSeconds": {
              "type": "integer",
              "minimum": 1,
              "default": 30,
              "description": "Acknowledgment timeout in seconds"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    },
    "ExecutionProfiles": {
      "type": "object",
      "description": "Execution profile presets for different use cases",
      "properties": {
        "default": {
          "type": "string",
          "description": "Default profile name"
        },
        "profiles": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/ExecutionProfileConfig"
          }
        }
      }
    },
    "ExecutionProfileConfig": {
      "type": "object",
      "description": "Individual execution profile configuration",
      "properties": {
        "maxTokens": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum tokens for this profile"
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "description": "Sampling temperature"
        },
        "reasoning_enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable extended thinking/reasoning"
        },
        "validation_required": {
          "type": "boolean",
          "default": false,
          "description": "Require output validation"
        },
        "audit_log": {
          "type": "boolean",
          "default": false,
          "description": "Enable detailed audit logging"
        },
        "description": {
          "type": "string",
          "description": "Profile description"
        }
      },
      "additionalProperties": false
    },
    "FunctionDefinition": {
      "type": "object",
      "description": "Function definition in A2A/OpenAI format",
      "required": [
        "name",
        "description",
        "parameters"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*$",
          "description": "Function name"
        },
        "description": {
          "type": "string",
          "description": "What the function does"
        },
        "parameters": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for function parameters"
        },
        "returns": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for return value"
        },
        "strict": {
          "type": "boolean",
          "default": true,
          "description": "Enforce strict schema validation"
        }
      },
      "additionalProperties": false
    },
    "SchedulingConfig": {
      "type": "object",
      "description": "Agent scheduling configuration",
      "properties": {
        "strategy": {
          "type": "string",
          "enum": [
            "fair",
            "priority",
            "deadline",
            "cost-optimized"
          ],
          "default": "fair",
          "description": "Scheduling strategy"
        },
        "priority": {
          "type": "string",
          "enum": [
            "critical",
            "high",
            "normal",
            "low",
            "background"
          ],
          "default": "normal",
          "description": "Execution priority"
        },
        "max_concurrent": {
          "type": "integer",
          "minimum": 1,
          "default": 10,
          "description": "Maximum concurrent executions"
        },
        "timeout_seconds": {
          "type": "integer",
          "minimum": 1,
          "default": 300,
          "description": "Execution timeout in seconds"
        }
      },
      "additionalProperties": false
    },
    "ResourceLimits": {
      "type": "object",
      "description": "Compute resource constraints (Kubernetes-style)",
      "properties": {
        "memory_mb": {
          "type": "integer",
          "minimum": 64,
          "description": "Memory limit in megabytes"
        },
        "cpu_millicores": {
          "type": "integer",
          "minimum": 100,
          "description": "CPU limit in millicores (1000 = 1 CPU)"
        },
        "gpu_required": {
          "type": "boolean",
          "default": false,
          "description": "Requires GPU acceleration"
        },
        "gpu_type": {
          "type": "string",
          "description": "Required GPU type (e.g., nvidia-a100, nvidia-h100)"
        }
      },
      "additionalProperties": false
    },
    "RuntimeExtension": {
      "type": "object",
      "description": "External runtime extension (A2A compatible)",
      "required": [
        "type",
        "name"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "http",
            "grpc",
            "mcp",
            "websocket",
            "kafka",
            "pubsub"
          ],
          "description": "Extension protocol type"
        },
        "name": {
          "type": "string",
          "description": "Extension name"
        },
        "endpoint": {
          "type": "string",
          "description": "Extension endpoint URL"
        },
        "credentials_ref": {
          "type": "string",
          "description": "Reference to credentials for authentication"
        }
      },
      "additionalProperties": false
    },
    "VercelAIExtension": {
      "type": "object",
      "description": "Vercel AI SDK extension for web AI applications - enables seamless integration with Next.js/React using useChat, useCompletion, useAssistant, and streamUI",
      "properties": {
        "provider": {
          "type": "object",
          "description": "LLM provider configuration (maps to OSSA spec.llm)",
          "properties": {
            "name": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "google",
                "mistral",
                "groq",
                "azure",
                "amazon-bedrock",
                "cohere",
                "fireworks",
                "custom"
              ],
              "description": "Provider identifier"
            },
            "model": {
              "type": "string",
              "description": "Model identifier (e.g., gpt-4o, claude-3-5-sonnet)"
            },
            "base_url": {
              "type": "string",
              "format": "uri",
              "description": "Custom API endpoint for OpenAI-compatible providers"
            },
            "api_key_env": {
              "type": "string",
              "pattern": "^[A-Z][A-Z0-9_]*$",
              "description": "Environment variable containing API key"
            },
            "headers": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "description": "Custom headers for API requests"
            }
          },
          "additionalProperties": false
        },
        "stream_protocol": {
          "type": "string",
          "enum": [
            "data",
            "text",
            "sse"
          ],
          "default": "data",
          "description": "Streaming protocol: data (AI SDK format), text (plain), sse (Server-Sent Events)"
        },
        "ui_components": {
          "type": "object",
          "description": "React component bindings for generative UI with streamUI",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable generative UI with streamUI"
            },
            "components": {
              "type": "array",
              "description": "Component mappings for streamUI",
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "render"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Component identifier for tool calls"
                  },
                  "render": {
                    "type": "string",
                    "description": "React component path (e.g., @/components/ui/Weather)"
                  },
                  "props_schema": {
                    "type": "object",
                    "description": "JSON Schema for component props",
                    "additionalProperties": true
                  }
                },
                "additionalProperties": false
              }
            },
            "loading_component": {
              "type": "string",
              "description": "Component to show during generation"
            },
            "error_component": {
              "type": "string",
              "description": "Component to show on errors"
            }
          },
          "additionalProperties": false
        },
        "state_config": {
          "type": "object",
          "description": "AI state management configuration (maps to OSSA spec.state)",
          "properties": {
            "ai_state": {
              "type": "object",
              "description": "Server-side AI state configuration",
              "properties": {
                "schema": {
                  "type": "object",
                  "description": "JSON/Zod schema for AI state",
                  "additionalProperties": true
                },
                "initial": {
                  "type": "object",
                  "description": "Initial AI state values",
                  "additionalProperties": true
                },
                "persist": {
                  "type": "boolean",
                  "default": false,
                  "description": "Persist AI state across sessions"
                }
              },
              "additionalProperties": false
            },
            "ui_state": {
              "type": "object",
              "description": "Client-side UI state configuration",
              "properties": {
                "schema": {
                  "type": "object",
                  "description": "JSON/Zod schema for UI state",
                  "additionalProperties": true
                },
                "sync_with_ai_state": {
                  "type": "boolean",
                  "default": true,
                  "description": "Sync UI state from AI state changes"
                }
              },
              "additionalProperties": false
            },
            "actions": {
              "type": "array",
              "description": "Server Actions for state mutations",
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "handler"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Server action name"
                  },
                  "handler": {
                    "type": "string",
                    "description": "Server action handler path"
                  },
                  "input_schema": {
                    "type": "object",
                    "description": "JSON Schema for action input",
                    "additionalProperties": true
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "hooks": {
          "type": "object",
          "description": "React hook bindings for Vercel AI SDK",
          "properties": {
            "use_chat": {
              "type": "object",
              "description": "useChat hook configuration (maps to OSSA Agent kind)",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable useChat hook"
                },
                "api_endpoint": {
                  "type": "string",
                  "default": "/api/chat",
                  "description": "API endpoint for chat"
                },
                "max_messages": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "Maximum messages to keep in memory"
                },
                "initial_messages": {
                  "type": "array",
                  "description": "Initial conversation messages",
                  "items": {
                    "type": "object",
                    "required": [
                      "role",
                      "content"
                    ],
                    "properties": {
                      "role": {
                        "type": "string",
                        "enum": [
                          "user",
                          "assistant",
                          "system"
                        ]
                      },
                      "content": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            },
            "use_completion": {
              "type": "object",
              "description": "useCompletion hook configuration (maps to OSSA Task kind)",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false,
                  "description": "Enable useCompletion hook"
                },
                "api_endpoint": {
                  "type": "string",
                  "default": "/api/completion",
                  "description": "API endpoint for completion"
                },
                "stream_mode": {
                  "type": "string",
                  "enum": [
                    "stream",
                    "complete"
                  ],
                  "default": "stream",
                  "description": "Streaming mode"
                }
              },
              "additionalProperties": false
            },
            "use_assistant": {
              "type": "object",
              "description": "useAssistant hook configuration (OpenAI Assistants API)",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false,
                  "description": "Enable useAssistant hook"
                },
                "assistant_id": {
                  "type": "string",
                  "description": "OpenAI Assistant ID"
                },
                "thread_persistence": {
                  "type": "string",
                  "enum": [
                    "session",
                    "database",
                    "none"
                  ],
                  "default": "session",
                  "description": "Thread persistence strategy"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "tool_calling": {
          "type": "object",
          "description": "Tool calling configuration (maps to OSSA capabilities/tools)",
          "properties": {
            "mode": {
              "type": "string",
              "enum": [
                "auto",
                "required",
                "none"
              ],
              "default": "auto",
              "description": "Tool calling mode"
            },
            "max_steps": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 5,
              "description": "Maximum agentic loop steps (maps to OSSA spec.autonomy.max_iterations)"
            },
            "tools": {
              "type": "array",
              "description": "Tool definitions",
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "description"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Tool name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Tool description for LLM"
                  },
                  "parameters": {
                    "type": "object",
                    "description": "Zod/JSON schema for tool parameters",
                    "additionalProperties": true
                  },
                  "execute": {
                    "type": "string",
                    "description": "Handler function path (e.g., @/lib/actions/orders#lookupOrder)"
                  },
                  "confirmation": {
                    "type": "boolean",
                    "default": false,
                    "description": "Require human confirmation before execution"
                  }
                },
                "additionalProperties": false
              }
            },
            "parallel_tool_calls": {
              "type": "boolean",
              "default": true,
              "description": "Allow parallel tool execution"
            }
          },
          "additionalProperties": false
        },
        "output_schema": {
          "type": "object",
          "description": "Structured output configuration (maps to OSSA spec.output)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Enable structured output with generateObject/streamObject"
            },
            "schema": {
              "type": "object",
              "description": "Zod/JSON schema for structured output",
              "additionalProperties": true
            },
            "mode": {
              "type": "string",
              "enum": [
                "json",
                "tool",
                "auto"
              ],
              "default": "auto",
              "description": "Output generation mode"
            },
            "partial": {
              "type": "boolean",
              "default": true,
              "description": "Allow partial objects during streaming"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "KubernetesConfig": {
      "type": "object",
      "description": "Kubernetes-specific runtime configuration (KAS-inspired)",
      "properties": {
        "namespace": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "description": "Kubernetes namespace (DNS-1123 subdomain)"
        },
        "service_account": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "description": "Kubernetes service account name"
        },
        "api_server_url": {
          "type": "string",
          "format": "uri",
          "description": "Kubernetes API server URL (similar to KAS private API URL)"
        },
        "network_family": {
          "type": "string",
          "enum": [
            "tcp",
            "tcp4",
            "tcp6"
          ],
          "default": "tcp",
          "description": "Network family (KAS pattern: tcp, tcp4, tcp6)"
        },
        "health_check_endpoint": {
          "type": "string",
          "format": "uri",
          "description": "Health check endpoint URL"
        },
        "config_map_ref": {
          "type": "string",
          "description": "Reference to Kubernetes ConfigMap"
        },
        "secret_ref": {
          "type": "string",
          "description": "Reference to Kubernetes Secret"
        },
        "rbac": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string",
              "description": "Kubernetes Role name"
            },
            "cluster_role": {
              "type": "string",
              "description": "Kubernetes ClusterRole name"
            },
            "role_binding": {
              "type": "string",
              "description": "Kubernetes RoleBinding name"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "LangChainExtension": {
      "type": "object",
      "description": "LangChain/LangGraph integration extension for OSSA v0.3.4. Provides bidirectional mapping between LangChain constructs (LCEL chains, LangGraph state machines, agents, memory, callbacks) and OSSA primitives.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable LangChain extension"
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
          "description": "LangChain version compatibility (e.g., 0.3.0)",
          "examples": [
            "0.3.0",
            "0.2.16"
          ]
        },
        "chains": {
          "type": "array",
          "description": "LCEL chain definitions mapped to OSSA constructs",
          "items": {
            "$ref": "#/definitions/LangChainChainConfig"
          }
        },
        "graphs": {
          "type": "array",
          "description": "LangGraph state machine definitions",
          "items": {
            "$ref": "#/definitions/LangGraphConfig"
          }
        },
        "memory_type": {
          "type": "string",
          "enum": [
            "conversation_buffer",
            "conversation_buffer_window",
            "conversation_summary",
            "vector_store",
            "entity",
            "combined",
            "none"
          ],
          "default": "none",
          "description": "Memory backend type for stateful interactions"
        },
        "memory_config": {
          "type": "object",
          "description": "Memory-specific configuration",
          "properties": {
            "max_token_limit": {
              "type": "integer",
              "minimum": 100,
              "maximum": 128000,
              "description": "Maximum tokens for memory buffer"
            },
            "k": {
              "type": "integer",
              "minimum": 1,
              "description": "Window size for conversation_buffer_window"
            },
            "vector_store": {
              "type": "object",
              "description": "Vector store configuration for vector_store memory type",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "chroma",
                    "qdrant",
                    "pinecone",
                    "weaviate",
                    "milvus",
                    "pgvector",
                    "faiss"
                  ],
                  "description": "Vector store backend type"
                },
                "collection_name": {
                  "type": "string",
                  "description": "Collection/index name in the vector store"
                },
                "embedding_model": {
                  "type": "string",
                  "description": "Embedding model for vectorization"
                },
                "connection_string": {
                  "type": "string",
                  "description": "Connection string reference (use env var)"
                }
              },
              "additionalProperties": true
            }
          },
          "additionalProperties": true
        },
        "callbacks": {
          "type": "array",
          "description": "LangChain callback handlers mapped to OSSA observability",
          "items": {
            "$ref": "#/definitions/LangChainCallbackConfig"
          }
        },
        "runnable_config": {
          "type": "object",
          "description": "Global RunnableConfig settings for all runnables",
          "properties": {
            "max_concurrency": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 5,
              "description": "Maximum concurrent runnable executions"
            },
            "recursion_limit": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 25,
              "description": "Maximum recursion depth for nested runnables"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Tags for filtering callbacks"
            },
            "metadata": {
              "type": "object",
              "additionalProperties": true,
              "description": "Arbitrary metadata passed to callbacks"
            },
            "configurable": {
              "type": "object",
              "additionalProperties": true,
              "description": "Configurable fields for runtime configuration"
            }
          },
          "additionalProperties": true
        },
        "agent_type": {
          "type": "string",
          "enum": [
            "react",
            "openai_functions",
            "openai_tools",
            "xml",
            "structured_chat",
            "tool_calling",
            "langgraph_react",
            "custom"
          ],
          "description": "LangChain agent architecture type"
        },
        "agent_config": {
          "type": "object",
          "description": "Agent-type-specific configuration",
          "properties": {
            "handle_parsing_errors": {
              "type": "boolean",
              "default": true,
              "description": "Whether to handle parsing errors gracefully"
            },
            "max_iterations": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 15,
              "description": "Maximum agent iterations"
            },
            "early_stopping_method": {
              "type": "string",
              "enum": [
                "force",
                "generate"
              ],
              "default": "generate",
              "description": "Method for early stopping"
            },
            "return_intermediate_steps": {
              "type": "boolean",
              "default": false,
              "description": "Whether to return intermediate agent steps"
            },
            "trim_intermediate_steps": {
              "type": "integer",
              "minimum": 1,
              "description": "Keep only last N intermediate steps"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "LangChainChainConfig": {
      "type": "object",
      "description": "LCEL chain configuration for LangChain integration",
      "required": [
        "name",
        "type"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "description": "Chain identifier"
        },
        "type": {
          "type": "string",
          "enum": [
            "llm",
            "prompt_template",
            "retrieval",
            "stuff_documents",
            "map_reduce",
            "refine",
            "map_rerank",
            "conversational_retrieval",
            "sql_database",
            "api",
            "transformation",
            "sequential",
            "router",
            "custom"
          ],
          "description": "Chain type"
        },
        "lcel_expression": {
          "type": "string",
          "description": "LCEL expression string (e.g., 'prompt | llm | parser')"
        },
        "components": {
          "type": "array",
          "description": "Chain components for sequential chains",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "prompt",
                  "llm",
                  "parser",
                  "retriever",
                  "tool",
                  "function",
                  "passthrough",
                  "itemgetter"
                ],
                "description": "Component type"
              },
              "ref": {
                "type": "string",
                "description": "Reference to component definition"
              },
              "config": {
                "type": "object",
                "additionalProperties": true,
                "description": "Component-specific configuration"
              }
            },
            "additionalProperties": true
          }
        },
        "input_schema": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for chain input"
        },
        "output_schema": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "JSON Schema for chain output"
        },
        "fallback": {
          "type": "object",
          "description": "Fallback chain configuration",
          "properties": {
            "chain_ref": {
              "type": "string",
              "description": "Reference to fallback chain"
            },
            "exceptions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Exception types that trigger fallback"
            }
          },
          "additionalProperties": true
        },
        "batch_config": {
          "type": "object",
          "description": "Batch processing configuration",
          "properties": {
            "max_concurrency": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum concurrent batch executions"
            },
            "return_exceptions": {
              "type": "boolean",
              "default": false,
              "description": "Whether to return exceptions in batch results"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "LangGraphConfig": {
      "type": "object",
      "description": "LangGraph state machine configuration",
      "required": [
        "name",
        "nodes"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "description": "Graph identifier"
        },
        "state_schema": {
          "$ref": "#/definitions/JSONSchemaDefinition",
          "description": "TypedDict/Pydantic state schema"
        },
        "nodes": {
          "type": "array",
          "description": "Graph nodes",
          "items": {
            "type": "object",
            "required": [
              "id",
              "type"
            ],
            "properties": {
              "id": {
                "type": "string",
                "description": "Node identifier"
              },
              "type": {
                "type": "string",
                "enum": [
                  "agent",
                  "tool",
                  "function",
                  "subgraph",
                  "passthrough",
                  "conditional",
                  "human_in_loop"
                ],
                "description": "Node type"
              },
              "handler": {
                "type": "string",
                "description": "Handler function/class reference"
              },
              "ossa_ref": {
                "type": "string",
                "description": "Reference to OSSA Task or Agent manifest"
              }
            },
            "additionalProperties": true
          }
        },
        "edges": {
          "type": "array",
          "description": "Graph edges (transitions)",
          "items": {
            "type": "object",
            "required": [
              "from",
              "to"
            ],
            "properties": {
              "from": {
                "type": "string",
                "description": "Source node ID or START"
              },
              "to": {
                "type": "string",
                "description": "Target node ID or END"
              },
              "condition": {
                "type": "string",
                "description": "Condition function reference for conditional edges"
              },
              "condition_map": {
                "type": "object",
                "description": "Map of condition values to target nodes",
                "additionalProperties": {
                  "type": "string"
                }
              }
            },
            "additionalProperties": true
          }
        },
        "entrypoint": {
          "type": "string",
          "default": "START",
          "description": "Entry point node ID"
        },
        "checkpointer": {
          "type": "object",
          "description": "State persistence configuration (MemorySaver, SqliteSaver, etc.)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "memory",
                "sqlite",
                "postgres",
                "redis"
              ],
              "description": "Checkpointer backend type"
            },
            "connection_string": {
              "type": "string",
              "description": "Connection string for persistent checkpointers"
            }
          },
          "additionalProperties": true
        },
        "interrupt_before": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Nodes to interrupt before (human-in-the-loop)"
        },
        "interrupt_after": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Nodes to interrupt after"
        }
      },
      "additionalProperties": true
    },
    "LangChainCallbackConfig": {
      "type": "object",
      "description": "LangChain callback handler configuration",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "langchain_tracer",
            "langsmith",
            "stdout",
            "file",
            "opentelemetry",
            "phoenix",
            "wandb",
            "mlflow",
            "custom"
          ],
          "description": "Callback handler type"
        },
        "config": {
          "type": "object",
          "additionalProperties": true,
          "description": "Handler-specific configuration"
        },
        "events": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "on_llm_start",
              "on_llm_end",
              "on_llm_error",
              "on_chain_start",
              "on_chain_end",
              "on_chain_error",
              "on_tool_start",
              "on_tool_end",
              "on_tool_error",
              "on_agent_action",
              "on_agent_finish",
              "on_retriever_start",
              "on_retriever_end",
              "on_text",
              "on_retry"
            ]
          },
          "description": "Events to handle (empty = all events)"
        }
      },
      "additionalProperties": true
    },
    "OpenAISwarmExtension": {
      "type": "object",
      "description": "OpenAI Swarm multi-agent framework extension - enables OSSA agents to operate within Swarm's handoff-based orchestration model",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable Swarm compatibility mode"
        },
        "agents": {
          "type": "array",
          "description": "Swarm agent definitions for multi-agent manifests",
          "items": {
            "$ref": "#/definitions/SwarmAgentConfig"
          }
        },
        "handoff_config": {
          "$ref": "#/definitions/SwarmHandoffConfig",
          "description": "Handoff behavior configuration"
        },
        "context_variables": {
          "$ref": "#/definitions/SwarmContextVariables",
          "description": "Shared context variable definitions"
        },
        "run_config": {
          "$ref": "#/definitions/SwarmRunConfig",
          "description": "Run loop configuration"
        }
      },
      "additionalProperties": true
    },
    "SwarmAgentConfig": {
      "type": "object",
      "description": "Swarm agent configuration within an OSSA manifest",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 128,
          "description": "Agent name identifier"
        },
        "is_primary": {
          "type": "boolean",
          "default": false,
          "description": "Whether this is the primary/entry agent"
        },
        "is_router": {
          "type": "boolean",
          "default": false,
          "description": "Whether this agent routes to other agents"
        },
        "routing_function": {
          "type": "string",
          "description": "Name of the routing function for router agents"
        },
        "model_override": {
          "type": "string",
          "description": "Override the default model for this agent"
        },
        "tool_choice": {
          "type": "string",
          "enum": [
            "auto",
            "none",
            "required"
          ],
          "description": "Tool selection strategy"
        },
        "parallel_tool_calls": {
          "type": "boolean",
          "default": true,
          "description": "Enable parallel tool execution"
        }
      },
      "additionalProperties": true
    },
    "SwarmHandoffConfig": {
      "type": "object",
      "description": "Configuration for agent handoff behavior",
      "properties": {
        "strategy": {
          "type": "string",
          "enum": [
            "function_return",
            "workflow_transition",
            "explicit"
          ],
          "default": "function_return",
          "description": "Handoff strategy: function_return (Swarm-native), workflow_transition (OSSA workflow), explicit (manual)"
        },
        "preserve_context": {
          "type": "boolean",
          "default": true,
          "description": "Preserve context variables during handoff"
        },
        "allow_cycles": {
          "type": "boolean",
          "default": false,
          "description": "Allow agents to hand off in cycles"
        },
        "max_handoffs": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 10,
          "description": "Maximum number of handoffs per session"
        },
        "handoffs": {
          "type": "array",
          "description": "Explicit handoff definitions",
          "items": {
            "type": "object",
            "required": [
              "function",
              "target_agent"
            ],
            "properties": {
              "function": {
                "type": "string",
                "description": "Function name that triggers the handoff"
              },
              "target_agent": {
                "type": "string",
                "description": "Target agent to hand off to"
              },
              "conditions": {
                "type": "array",
                "description": "Conditions that trigger this handoff",
                "items": {
                  "type": "object",
                  "required": [
                    "type"
                  ],
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "explicit_request",
                        "capability_mismatch",
                        "billing_keyword_detected",
                        "technical_issue_detected",
                        "custom"
                      ],
                      "description": "Condition type"
                    },
                    "expression": {
                      "type": "string",
                      "description": "Custom condition expression"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "SwarmContextVariables": {
      "type": "object",
      "description": "Swarm context variables configuration mapping to OSSA state",
      "properties": {
        "mapping": {
          "type": "object",
          "description": "Mapping of Swarm context variable names to OSSA state paths",
          "additionalProperties": {
            "type": "string"
          }
        },
        "propagation": {
          "type": "string",
          "enum": [
            "all_agents",
            "handoff_only",
            "none"
          ],
          "default": "all_agents",
          "description": "How context variables propagate between agents"
        },
        "mutability": {
          "type": "string",
          "enum": [
            "read_only",
            "read_write"
          ],
          "default": "read_write",
          "description": "Whether agents can modify context variables"
        },
        "lifecycle": {
          "type": "object",
          "description": "Context variable lifecycle configuration",
          "properties": {
            "inherit_on_handoff": {
              "type": "boolean",
              "default": true,
              "description": "Inherit context variables on agent handoff"
            },
            "merge_strategy": {
              "type": "string",
              "enum": [
                "shallow_merge",
                "deep_merge",
                "replace"
              ],
              "default": "deep_merge",
              "description": "Strategy for merging context variable updates"
            },
            "clear_on_complete": {
              "type": "boolean",
              "default": false,
              "description": "Clear context variables when session completes"
            }
          }
        }
      },
      "additionalProperties": true
    },
    "SwarmRunConfig": {
      "type": "object",
      "description": "Swarm run loop configuration mapping to OSSA runtime lifecycle",
      "properties": {
        "max_turns": {
          "type": "integer",
          "minimum": 1,
          "maximum": 1000,
          "default": 10,
          "description": "Maximum conversation turns (maps to spec.behavior.maxIterations)"
        },
        "execute_tools": {
          "type": "boolean",
          "default": true,
          "description": "Whether to execute tool calls"
        },
        "stream": {
          "type": "boolean",
          "default": false,
          "description": "Enable streaming responses"
        },
        "debug": {
          "type": "boolean",
          "default": false,
          "description": "Enable debug mode"
        },
        "dynamic_instructions": {
          "type": "boolean",
          "default": false,
          "description": "Enable dynamic instruction generation from context"
        },
        "instruction_source": {
          "type": "string",
          "enum": [
            "system_prompt",
            "system_prompt_template",
            "external"
          ],
          "description": "Source for agent instructions"
        },
        "lifecycle": {
          "type": "object",
          "description": "Lifecycle hooks for run events",
          "properties": {
            "on_start": {
              "type": "string",
              "description": "Handler called when run starts"
            },
            "on_turn": {
              "type": "string",
              "description": "Handler called on each turn"
            },
            "on_handoff": {
              "type": "string",
              "description": "Handler called on agent handoff"
            },
            "on_complete": {
              "type": "string",
              "description": "Handler called when run completes"
            },
            "on_error": {
              "type": "string",
              "description": "Handler called on error"
            }
          }
        },
        "tool_execution": {
          "type": "object",
          "description": "Tool execution configuration",
          "properties": {
            "parallel": {
              "type": "boolean",
              "default": false,
              "description": "Execute tools in parallel when possible"
            },
            "timeout_per_tool": {
              "type": "integer",
              "minimum": 1,
              "maximum": 3600,
              "default": 30,
              "description": "Timeout per tool execution in seconds"
            },
            "retry_on_failure": {
              "type": "boolean",
              "default": true,
              "description": "Retry failed tool calls"
            },
            "max_retries": {
              "type": "integer",
              "minimum": 0,
              "maximum": 10,
              "default": 3,
              "description": "Maximum retry attempts"
            }
          }
        },
        "result_handling": {
          "type": "object",
          "description": "Result and output handling configuration",
          "properties": {
            "parse_agent_handoff": {
              "type": "boolean",
              "default": true,
              "description": "Parse Result objects for agent handoff"
            },
            "apply_context_updates": {
              "type": "boolean",
              "default": true,
              "description": "Apply context variable updates from results"
            },
            "output_mapping": {
              "type": "object",
              "description": "JSONPath mapping for result fields",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "OpenAIAssistantsExtension": {
      "type": "object",
      "description": "OpenAI Assistants API integration extension - enables bidirectional mapping between OSSA agents and OpenAI Assistants",
      "properties": {
        "assistant_id": {
          "type": "string",
          "pattern": "^asst_[a-zA-Z0-9]+$",
          "description": "OpenAI Assistant ID (e.g., asst_abc123)"
        },
        "model": {
          "type": "string",
          "enum": [
            "gpt-4o",
            "gpt-4o-mini",
            "gpt-4-turbo",
            "gpt-4-turbo-preview",
            "gpt-4",
            "gpt-3.5-turbo",
            "gpt-3.5-turbo-16k"
          ],
          "description": "OpenAI model to use for this assistant"
        },
        "instructions": {
          "type": "string",
          "maxLength": 256000,
          "description": "System instructions for the assistant (maps to spec.prompts.system)"
        },
        "tools": {
          "type": "array",
          "description": "OpenAI tools configuration",
          "items": {
            "$ref": "#/definitions/OpenAIAssistantTool"
          }
        },
        "tool_resources": {
          "type": "object",
          "description": "Resources for tools (file_search, code_interpreter)",
          "properties": {
            "code_interpreter": {
              "type": "object",
              "properties": {
                "file_ids": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "pattern": "^file-[a-zA-Z0-9]+$"
                  },
                  "maxItems": 20,
                  "description": "File IDs for code interpreter (max 20)"
                }
              },
              "additionalProperties": false
            },
            "file_search": {
              "type": "object",
              "properties": {
                "vector_store_ids": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "pattern": "^vs_[a-zA-Z0-9]+$"
                  },
                  "maxItems": 1,
                  "description": "Vector store IDs for file search (max 1)"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "file_ids": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^file-[a-zA-Z0-9]+$"
          },
          "description": "Legacy file IDs (deprecated, use tool_resources)"
        },
        "thread_config": {
          "type": "object",
          "description": "Thread configuration for conversation state",
          "properties": {
            "auto_create": {
              "type": "boolean",
              "default": true,
              "description": "Automatically create threads for new conversations"
            },
            "retention_days": {
              "type": "integer",
              "minimum": 1,
              "maximum": 365,
              "default": 30,
              "description": "Thread retention period in days"
            },
            "metadata_schema": {
              "type": "object",
              "description": "JSON Schema for thread metadata",
              "additionalProperties": true
            },
            "initial_messages": {
              "type": "array",
              "description": "Initial messages to populate new threads",
              "items": {
                "$ref": "#/definitions/OpenAIAssistantMessage"
              }
            }
          },
          "additionalProperties": false
        },
        "run_config": {
          "type": "object",
          "description": "Run execution configuration",
          "properties": {
            "max_prompt_tokens": {
              "type": "integer",
              "minimum": 256,
              "description": "Maximum prompt tokens per run"
            },
            "max_completion_tokens": {
              "type": "integer",
              "minimum": 256,
              "description": "Maximum completion tokens per run"
            },
            "truncation_strategy": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "auto",
                    "last_messages"
                  ],
                  "default": "auto"
                },
                "last_messages": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "Number of recent messages to keep"
                }
              },
              "additionalProperties": false
            },
            "response_format": {
              "oneOf": [
                {
                  "type": "string",
                  "enum": [
                    "auto",
                    "text"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "json_object",
                        "json_schema"
                      ]
                    },
                    "json_schema": {
                      "type": "object",
                      "description": "JSON Schema for structured output",
                      "additionalProperties": true
                    }
                  },
                  "additionalProperties": false
                }
              ],
              "description": "Response format configuration"
            },
            "parallel_tool_calls": {
              "type": "boolean",
              "default": true,
              "description": "Allow parallel tool execution"
            },
            "timeout_seconds": {
              "type": "integer",
              "minimum": 1,
              "maximum": 600,
              "default": 300,
              "description": "Run execution timeout"
            }
          },
          "additionalProperties": false
        },
        "streaming": {
          "type": "object",
          "description": "SSE streaming configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable streaming responses"
            },
            "events": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "thread.created",
                  "thread.run.created",
                  "thread.run.queued",
                  "thread.run.in_progress",
                  "thread.run.requires_action",
                  "thread.run.completed",
                  "thread.run.incomplete",
                  "thread.run.failed",
                  "thread.run.cancelling",
                  "thread.run.cancelled",
                  "thread.run.expired",
                  "thread.run.step.created",
                  "thread.run.step.in_progress",
                  "thread.run.step.delta",
                  "thread.run.step.completed",
                  "thread.run.step.expired",
                  "thread.message.created",
                  "thread.message.in_progress",
                  "thread.message.delta",
                  "thread.message.completed",
                  "thread.message.incomplete",
                  "error",
                  "done"
                ]
              },
              "description": "Events to stream"
            },
            "buffer_size": {
              "type": "integer",
              "default": 4096,
              "description": "SSE buffer size in bytes"
            }
          },
          "additionalProperties": false
        },
        "api_config": {
          "type": "object",
          "description": "OpenAI API configuration",
          "properties": {
            "base_url": {
              "type": "string",
              "format": "uri",
              "default": "https://api.openai.com/v1",
              "description": "OpenAI API base URL"
            },
            "api_version": {
              "type": "string",
              "pattern": "^v[0-9]+(\\.[0-9]+)?$",
              "description": "OpenAI API version"
            },
            "organization_id": {
              "type": "string",
              "pattern": "^org-[a-zA-Z0-9]+$",
              "description": "OpenAI organization ID"
            },
            "project_id": {
              "type": "string",
              "description": "OpenAI project ID"
            },
            "timeout_ms": {
              "type": "integer",
              "default": 60000,
              "description": "API request timeout in milliseconds"
            },
            "retry": {
              "type": "object",
              "properties": {
                "max_retries": {
                  "type": "integer",
                  "default": 3,
                  "description": "Maximum retry attempts"
                },
                "backoff_factor": {
                  "type": "number",
                  "default": 2,
                  "description": "Backoff multiplier for retries"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "observability": {
          "type": "object",
          "description": "Run steps and observability configuration",
          "properties": {
            "trace_run_steps": {
              "type": "boolean",
              "default": true,
              "description": "Enable run step tracing"
            },
            "step_types": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "message_creation",
                  "tool_calls"
                ]
              },
              "description": "Step types to trace"
            },
            "include_usage": {
              "type": "boolean",
              "default": true,
              "description": "Include token usage in traces"
            },
            "otel_exporter": {
              "type": "string",
              "enum": [
                "otlp",
                "console",
                "none"
              ],
              "default": "otlp",
              "description": "OpenTelemetry exporter type"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "OpenAIAssistantTool": {
      "type": "object",
      "description": "OpenAI Assistant tool definition",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "code_interpreter",
            "file_search",
            "function"
          ],
          "description": "Tool type"
        },
        "function": {
          "type": "object",
          "description": "Function tool definition (when type=function)",
          "properties": {
            "name": {
              "type": "string",
              "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*$",
              "maxLength": 64,
              "description": "Function name"
            },
            "description": {
              "type": "string",
              "maxLength": 1024,
              "description": "Function description"
            },
            "parameters": {
              "type": "object",
              "description": "JSON Schema for function parameters",
              "additionalProperties": true
            },
            "strict": {
              "type": "boolean",
              "default": false,
              "description": "Enable strict mode for structured outputs"
            }
          },
          "required": [
            "name"
          ],
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "OpenAIAssistantMessage": {
      "type": "object",
      "description": "OpenAI Assistant message definition",
      "required": [
        "role",
        "content"
      ],
      "properties": {
        "role": {
          "type": "string",
          "enum": [
            "user",
            "assistant"
          ],
          "description": "Message role"
        },
        "content": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/OpenAIAssistantContentPart"
              }
            }
          ],
          "description": "Message content"
        },
        "attachments": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "file_id": {
                "type": "string",
                "description": "File ID to attach"
              },
              "tools": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "code_interpreter",
                        "file_search"
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            },
            "additionalProperties": false
          },
          "description": "File attachments"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "maxProperties": 16,
          "description": "Message metadata (max 16 key-value pairs)"
        }
      },
      "additionalProperties": false
    },
    "OpenAIAssistantContentPart": {
      "type": "object",
      "description": "Content part for multimodal messages",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "text",
            "image_url",
            "image_file"
          ],
          "description": "Content part type"
        },
        "text": {
          "type": "string",
          "description": "Text content (when type=text)"
        },
        "image_url": {
          "type": "object",
          "properties": {
            "url": {
              "type": "string",
              "format": "uri",
              "description": "Image URL"
            },
            "detail": {
              "type": "string",
              "enum": [
                "auto",
                "low",
                "high"
              ],
              "default": "auto",
              "description": "Image detail level"
            }
          },
          "additionalProperties": false,
          "description": "Image URL (when type=image_url)"
        },
        "image_file": {
          "type": "object",
          "properties": {
            "file_id": {
              "type": "string",
              "description": "File ID of the image"
            },
            "detail": {
              "type": "string",
              "enum": [
                "auto",
                "low",
                "high"
              ],
              "default": "auto",
              "description": "Image detail level"
            }
          },
          "additionalProperties": false,
          "description": "Image file (when type=image_file)"
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelExtension": {
      "type": "object",
      "description": "Microsoft Semantic Kernel integration extension for OSSA v0.3.4. Provides bidirectional mapping between Semantic Kernel constructs (Kernel, Plugins, Functions, Planners, Memory, Connectors, Filters, Agents) and OSSA primitives.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable Semantic Kernel runtime integration"
        },
        "plugins": {
          "type": "array",
          "description": "Semantic Kernel plugins to load (native, semantic, OpenAPI, gRPC)",
          "items": {
            "$ref": "#/definitions/SemanticKernelPlugin"
          }
        },
        "planner_type": {
          "type": "string",
          "enum": [
            "sequential",
            "stepwise",
            "action",
            "handlebars",
            "function_calling",
            "none"
          ],
          "default": "function_calling",
          "description": "Planner strategy for goal decomposition and task orchestration"
        },
        "planner_options": {
          "type": "object",
          "description": "Planner-specific configuration options",
          "properties": {
            "max_iterations": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10,
              "description": "Maximum planner iterations"
            },
            "max_tokens": {
              "type": "integer",
              "minimum": 100,
              "maximum": 128000,
              "default": 4096,
              "description": "Maximum tokens for planner operations"
            },
            "allow_loops": {
              "type": "boolean",
              "default": false,
              "description": "Allow looping in plans (stepwise planner)"
            },
            "excluded_plugins": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Plugin names to exclude from planning"
            },
            "excluded_functions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Function names to exclude from planning (format: PluginName.FunctionName)"
            },
            "semantic_memory_config": {
              "type": "object",
              "description": "Semantic memory configuration for planners",
              "properties": {
                "relevance_threshold": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1,
                  "default": 0.7,
                  "description": "Minimum relevance score for memory retrieval"
                },
                "max_results": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100,
                  "default": 5,
                  "description": "Maximum memory results to retrieve"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "memory_store": {
          "$ref": "#/definitions/SemanticKernelMemoryStore",
          "description": "Semantic memory store configuration"
        },
        "connectors": {
          "$ref": "#/definitions/SemanticKernelConnectors",
          "description": "AI service connectors (chat completion, embeddings, image generation, audio)"
        },
        "filters": {
          "$ref": "#/definitions/SemanticKernelFilters",
          "description": "Function, prompt, and auto-invocation filters for safety and observability"
        },
        "agent_config": {
          "type": "object",
          "description": "Semantic Kernel Agent configuration (ChatCompletionAgent, OpenAIAssistantAgent)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "chat_completion",
                "openai_assistant",
                "azure_assistant"
              ],
              "default": "chat_completion",
              "description": "Agent implementation type"
            },
            "instructions": {
              "type": "string",
              "description": "Agent system instructions (alternative to spec.role)"
            },
            "name": {
              "type": "string",
              "description": "Agent display name"
            },
            "description": {
              "type": "string",
              "description": "Agent description"
            },
            "execution_settings": {
              "type": "object",
              "properties": {
                "max_iterations": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 100,
                  "default": 10,
                  "description": "Maximum agent loop iterations"
                },
                "enable_code_interpreter": {
                  "type": "boolean",
                  "default": false,
                  "description": "Enable code interpreter (OpenAI Assistants)"
                },
                "enable_file_search": {
                  "type": "boolean",
                  "default": false,
                  "description": "Enable file search (OpenAI Assistants)"
                },
                "tool_choice": {
                  "type": "string",
                  "enum": [
                    "auto",
                    "required",
                    "none"
                  ],
                  "default": "auto",
                  "description": "Tool selection mode"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "telemetry": {
          "type": "object",
          "description": "OpenTelemetry configuration for Semantic Kernel",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable telemetry collection"
            },
            "activity_source_name": {
              "type": "string",
              "default": "Microsoft.SemanticKernel",
              "description": "OpenTelemetry activity source name"
            },
            "meter_name": {
              "type": "string",
              "default": "Microsoft.SemanticKernel",
              "description": "OpenTelemetry meter name"
            },
            "log_function_invocations": {
              "type": "boolean",
              "default": true,
              "description": "Log function invocations"
            },
            "log_prompt_template_content": {
              "type": "boolean",
              "default": false,
              "description": "Log prompt template content (caution: may contain sensitive data)"
            },
            "log_function_results": {
              "type": "boolean",
              "default": false,
              "description": "Log function results (caution: may contain sensitive data)"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelPlugin": {
      "type": "object",
      "description": "Semantic Kernel plugin definition",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Plugin name (unique identifier)"
        },
        "type": {
          "type": "string",
          "enum": [
            "native",
            "semantic",
            "openapi",
            "grpc"
          ],
          "default": "native",
          "description": "Plugin type: native (C#/Python class), semantic (prompt-based), openapi (OpenAPI spec), grpc (gRPC service)"
        },
        "source": {
          "type": "string",
          "description": "Plugin source: assembly name, directory path, or URL"
        },
        "functions": {
          "type": "array",
          "description": "Functions provided by this plugin",
          "items": {
            "type": "object",
            "required": [
              "name"
            ],
            "properties": {
              "name": {
                "type": "string",
                "description": "Function name"
              },
              "description": {
                "type": "string",
                "description": "Human-readable function description"
              },
              "parameters": {
                "type": "object",
                "description": "Function parameters (JSON Schema)",
                "additionalProperties": true
              },
              "returnType": {
                "type": "string",
                "description": "Return type (string, number, object, etc.)"
              }
            },
            "additionalProperties": false
          }
        },
        "authentication": {
          "type": "object",
          "description": "Authentication for OpenAPI/gRPC plugins",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "none",
                "bearer",
                "api_key",
                "oauth2",
                "basic"
              ],
              "default": "none"
            },
            "token_ref": {
              "type": "string",
              "description": "Reference to secret containing authentication token"
            },
            "header_name": {
              "type": "string",
              "description": "Custom header name for API key auth"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelMemoryStore": {
      "type": "object",
      "description": "Semantic memory store configuration",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "volatile",
            "azure_cognitive_search",
            "qdrant",
            "chroma",
            "pinecone",
            "redis",
            "postgres",
            "sqlite"
          ],
          "default": "volatile",
          "description": "Memory store backend type"
        },
        "collection": {
          "type": "string",
          "description": "Collection/index name for the memory store"
        },
        "connection": {
          "type": "object",
          "description": "Connection configuration",
          "properties": {
            "endpoint": {
              "type": "string",
              "format": "uri",
              "description": "Service endpoint URL"
            },
            "api_key_ref": {
              "type": "string",
              "description": "Reference to secret containing API key"
            },
            "options": {
              "type": "object",
              "description": "Backend-specific options",
              "additionalProperties": true
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelConnectors": {
      "type": "object",
      "description": "AI service connectors configuration",
      "properties": {
        "chat_completion": {
          "$ref": "#/definitions/SemanticKernelServiceConnector",
          "description": "Chat completion service connector"
        },
        "text_embedding": {
          "$ref": "#/definitions/SemanticKernelServiceConnector",
          "description": "Text embedding service connector"
        },
        "image_generation": {
          "$ref": "#/definitions/SemanticKernelServiceConnector",
          "description": "Image generation service connector"
        },
        "audio_to_text": {
          "$ref": "#/definitions/SemanticKernelServiceConnector",
          "description": "Audio to text (speech-to-text) service connector"
        },
        "text_to_audio": {
          "$ref": "#/definitions/SemanticKernelServiceConnector",
          "description": "Text to audio (text-to-speech) service connector"
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelServiceConnector": {
      "type": "object",
      "description": "AI service connector configuration",
      "properties": {
        "service_id": {
          "type": "string",
          "default": "default",
          "description": "Service identifier for dependency injection"
        },
        "provider": {
          "type": "string",
          "enum": [
            "azure_openai",
            "openai",
            "huggingface",
            "ollama",
            "anthropic",
            "google",
            "mistral"
          ],
          "description": "AI service provider"
        },
        "model_id": {
          "type": "string",
          "description": "Model identifier (e.g., gpt-4, text-embedding-ada-002)"
        },
        "endpoint": {
          "type": "string",
          "format": "uri",
          "description": "Service endpoint URL"
        },
        "api_key_ref": {
          "type": "string",
          "description": "Reference to secret containing API key"
        },
        "deployment_name": {
          "type": "string",
          "description": "Azure OpenAI deployment name"
        },
        "dimensions": {
          "type": "integer",
          "minimum": 1,
          "description": "Embedding vector dimensions (for embedding models)"
        },
        "options": {
          "type": "object",
          "description": "Provider-specific options",
          "properties": {
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2,
              "description": "Sampling temperature"
            },
            "max_tokens": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum tokens to generate"
            },
            "top_p": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Nucleus sampling parameter"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelFilters": {
      "type": "object",
      "description": "Semantic Kernel filter configuration for safety and observability",
      "properties": {
        "function_filters": {
          "type": "array",
          "description": "Pre/post function execution filters",
          "items": {
            "$ref": "#/definitions/SemanticKernelFilter"
          }
        },
        "prompt_filters": {
          "type": "array",
          "description": "Prompt rendering filters",
          "items": {
            "$ref": "#/definitions/SemanticKernelFilter"
          }
        },
        "auto_invoke_filters": {
          "type": "array",
          "description": "Auto function invocation filters",
          "items": {
            "$ref": "#/definitions/SemanticKernelFilter"
          }
        }
      },
      "additionalProperties": false
    },
    "SemanticKernelFilter": {
      "type": "object",
      "description": "Individual filter configuration",
      "required": [
        "name",
        "handler"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Filter name (unique identifier)"
        },
        "type": {
          "type": "string",
          "enum": [
            "pre",
            "post",
            "both",
            "pre_render",
            "post_render"
          ],
          "default": "both",
          "description": "Filter execution point"
        },
        "handler": {
          "type": "string",
          "description": "Handler class reference (e.g., Namespace.ClassName)"
        },
        "config": {
          "type": "object",
          "description": "Filter-specific configuration",
          "additionalProperties": true
        },
        "terminate_on_match": {
          "type": "boolean",
          "default": false,
          "description": "Stop execution if filter matches (for auto-invoke filters)"
        }
      },
      "additionalProperties": false
    },
    "DifyExtension": {
      "type": "object",
      "description": "Dify LLMOps platform integration for OSSA agents. Supports Chat, Completion, Agent, and Workflow app types with bidirectional mapping.",
      "properties": {
        "app_type": {
          "type": "string",
          "enum": [
            "chat",
            "completion",
            "agent",
            "workflow"
          ],
          "description": "Dify application type: chat (conversational), completion (single-shot), agent (autonomous with tools), workflow (DAG-based)"
        },
        "app_id": {
          "type": "string",
          "format": "uuid",
          "description": "Dify application UUID for API operations"
        },
        "dataset_ids": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "description": "Dify Knowledge/Dataset UUIDs for RAG retrieval"
        },
        "workflow_config": {
          "type": "object",
          "description": "Dify workflow configuration for workflow app type",
          "properties": {
            "graph": {
              "type": "object",
              "description": "Workflow DAG definition with nodes and edges",
              "properties": {
                "nodes": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "id",
                      "type"
                    ],
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "Unique node identifier"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "start",
                          "end",
                          "llm",
                          "knowledge-retrieval",
                          "code",
                          "template",
                          "http-request",
                          "tool",
                          "if-else",
                          "iterator",
                          "parameter-extractor",
                          "variable-aggregator",
                          "answer",
                          "human-review"
                        ],
                        "description": "Dify workflow node type"
                      },
                      "data": {
                        "type": "object",
                        "description": "Node-specific configuration data",
                        "additionalProperties": true
                      },
                      "position": {
                        "type": "object",
                        "properties": {
                          "x": {
                            "type": "number"
                          },
                          "y": {
                            "type": "number"
                          }
                        },
                        "description": "Visual position in workflow editor"
                      }
                    }
                  }
                },
                "edges": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "source",
                      "target"
                    ],
                    "properties": {
                      "source": {
                        "type": "string",
                        "description": "Source node ID"
                      },
                      "target": {
                        "type": "string",
                        "description": "Target node ID"
                      },
                      "condition": {
                        "oneOf": [
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "description": "Edge condition for branching"
                      }
                    }
                  }
                }
              },
              "additionalProperties": false
            },
            "variables": {
              "type": "object",
              "description": "Workflow input variable definitions",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "text",
                      "paragraph",
                      "select",
                      "number",
                      "file",
                      "file-list"
                    ],
                    "description": "Dify variable type"
                  },
                  "max_length": {
                    "type": "integer",
                    "description": "Maximum length for text variables"
                  },
                  "default": {
                    "description": "Default value"
                  },
                  "options": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Options for select type"
                  },
                  "required": {
                    "type": "boolean",
                    "default": false
                  }
                }
              }
            },
            "output_variables": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Names of workflow output variables"
            }
          },
          "additionalProperties": false
        },
        "api_config": {
          "type": "object",
          "description": "Dify API integration settings",
          "properties": {
            "base_url": {
              "type": "string",
              "format": "uri",
              "default": "https://api.dify.ai/v1",
              "description": "Dify API base URL"
            },
            "api_key_ref": {
              "type": "string",
              "pattern": "^[A-Z][A-Z0-9_]*$",
              "description": "Environment variable name containing API key"
            },
            "api_key_secret": {
              "type": "object",
              "properties": {
                "vault_path": {
                  "type": "string",
                  "description": "Vault secret path"
                },
                "key": {
                  "type": "string",
                  "default": "value"
                }
              },
              "description": "Vault-based API key reference"
            },
            "rate_limits": {
              "type": "object",
              "properties": {
                "requests_per_minute": {
                  "type": "integer",
                  "default": 60
                },
                "tokens_per_minute": {
                  "type": "integer",
                  "default": 100000
                },
                "concurrent_requests": {
                  "type": "integer",
                  "default": 10
                }
              }
            },
            "retry": {
              "type": "object",
              "properties": {
                "max_attempts": {
                  "type": "integer",
                  "default": 3,
                  "minimum": 1,
                  "maximum": 10
                },
                "backoff": {
                  "type": "string",
                  "enum": [
                    "fixed",
                    "exponential",
                    "linear"
                  ],
                  "default": "exponential"
                },
                "initial_delay_ms": {
                  "type": "integer",
                  "default": 1000,
                  "minimum": 100
                },
                "max_delay_ms": {
                  "type": "integer",
                  "default": 30000
                }
              }
            },
            "timeout_seconds": {
              "type": "integer",
              "default": 120,
              "minimum": 1,
              "maximum": 600
            },
            "openapi_spec": {
              "type": "string",
              "description": "Path to OpenAPI spec for tool generation"
            }
          },
          "additionalProperties": false
        },
        "conversation_config": {
          "type": "object",
          "description": "Dify conversation/messaging settings for chat app type",
          "properties": {
            "persistence": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "ttl_hours": {
                  "type": "integer",
                  "default": 24,
                  "minimum": 1
                },
                "max_messages": {
                  "type": "integer",
                  "default": 100,
                  "minimum": 1
                }
              }
            },
            "variables": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "description": "Conversation-scoped variable types"
            },
            "suggested_questions": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "max_suggestions": {
                  "type": "integer",
                  "default": 3,
                  "minimum": 1,
                  "maximum": 10
                }
              }
            },
            "streaming": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "chunk_size": {
                  "type": "integer",
                  "description": "Token chunk size for streaming"
                }
              }
            },
            "memory": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "buffer",
                    "buffer_window",
                    "summary",
                    "conversation_kg"
                  ],
                  "default": "buffer_window"
                },
                "window_size": {
                  "type": "integer",
                  "default": 10,
                  "minimum": 1
                },
                "summary_enabled": {
                  "type": "boolean",
                  "default": false
                }
              }
            }
          },
          "additionalProperties": false
        },
        "annotation_config": {
          "type": "object",
          "description": "Dify annotation and observability settings",
          "properties": {
            "feedback": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "types": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "like",
                      "dislike",
                      "regenerate",
                      "report_error"
                    ]
                  },
                  "default": [
                    "like",
                    "dislike"
                  ]
                }
              }
            },
            "thought_logging": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "detail_level": {
                  "type": "string",
                  "enum": [
                    "minimal",
                    "standard",
                    "comprehensive"
                  ],
                  "default": "standard"
                }
              }
            },
            "usage_tracking": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "export_format": {
                  "type": "string",
                  "enum": [
                    "prometheus",
                    "opentelemetry",
                    "json"
                  ],
                  "default": "prometheus"
                },
                "labels": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              }
            },
            "log_export": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "destination": {
                  "type": "string",
                  "enum": [
                    "opentelemetry",
                    "elasticsearch",
                    "loki"
                  ]
                },
                "endpoint": {
                  "type": "string",
                  "format": "uri"
                }
              }
            },
            "annotation_storage": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "format": {
                  "type": "string",
                  "enum": [
                    "jsonl",
                    "parquet",
                    "csv"
                  ],
                  "default": "jsonl"
                },
                "path": {
                  "type": "string",
                  "description": "Storage path with template variables"
                }
              }
            },
            "citation_tracking": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "format": {
                  "type": "string",
                  "enum": [
                    "inline",
                    "footnote",
                    "endnote"
                  ],
                  "default": "inline"
                }
              }
            }
          },
          "additionalProperties": false
        },
        "retrieval_config": {
          "type": "object",
          "description": "RAG retrieval configuration for datasets",
          "properties": {
            "mode": {
              "type": "string",
              "enum": [
                "semantic",
                "keyword",
                "hybrid"
              ],
              "default": "hybrid"
            },
            "top_k": {
              "type": "integer",
              "default": 5,
              "minimum": 1,
              "maximum": 100
            },
            "score_threshold": {
              "type": "number",
              "default": 0.7,
              "minimum": 0,
              "maximum": 1
            },
            "rerank_model": {
              "type": "string",
              "description": "Reranking model identifier"
            },
            "chunking": {
              "type": "object",
              "properties": {
                "mode": {
                  "type": "string",
                  "enum": [
                    "automatic",
                    "custom"
                  ],
                  "default": "automatic"
                },
                "max_tokens": {
                  "type": "integer",
                  "default": 500,
                  "minimum": 100
                },
                "overlap_tokens": {
                  "type": "integer",
                  "default": 50,
                  "minimum": 0
                }
              }
            },
            "embedding": {
              "type": "object",
              "properties": {
                "model": {
                  "type": "string",
                  "description": "Embedding model identifier"
                },
                "provider": {
                  "type": "string",
                  "description": "Embedding provider"
                },
                "dimensions": {
                  "type": "integer",
                  "description": "Embedding vector dimensions"
                }
              }
            }
          },
          "additionalProperties": false
        },
        "tool_mapping": {
          "type": "object",
          "description": "Mapping of OSSA tool names to Dify tool identifiers",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "required": [
        "app_type"
      ],
      "additionalProperties": false
    },
    "CrewAIExtension": {
      "type": "object",
      "description": "CrewAI multi-agent orchestration framework extension for OSSA v0.3.4. Provides bidirectional mapping between CrewAI crews, agents, tasks, processes, and OSSA primitives including workflows, agents, tasks, delegation, memory, and observability.",
      "properties": {
        "crew_name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "description": "Name of the CrewAI crew (DNS-1123 compatible)"
        },
        "agents": {
          "type": "array",
          "description": "CrewAI agents mapped to OSSA agents",
          "items": {
            "$ref": "#/definitions/CrewAIAgentConfig"
          }
        },
        "tasks": {
          "type": "array",
          "description": "CrewAI tasks mapped to OSSA workflow steps",
          "items": {
            "$ref": "#/definitions/CrewAITaskConfig"
          }
        },
        "process_type": {
          "type": "string",
          "enum": [
            "sequential",
            "hierarchical",
            "consensual"
          ],
          "default": "sequential",
          "description": "Process execution pattern - maps to OSSA workflow step ordering"
        },
        "delegation_enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable agent-to-agent delegation"
        },
        "memory_config": {
          "$ref": "#/definitions/CrewAIMemoryConfig",
          "description": "Memory system configuration"
        },
        "manager_llm": {
          "type": "object",
          "description": "LLM configuration for hierarchical manager (when process_type=hierarchical)",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "google",
                "azure",
                "ollama",
                "groq",
                "together",
                "fireworks"
              ]
            },
            "model": {
              "type": "string"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "additionalProperties": true
        },
        "max_rpm": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum requests per minute for rate limiting"
        },
        "share_crew": {
          "type": "boolean",
          "default": false,
          "description": "Share telemetry data with CrewAI platform"
        },
        "callbacks": {
          "$ref": "#/definitions/CrewAICallbacksConfig",
          "description": "Callback hooks for observability integration"
        },
        "verbose": {
          "type": "boolean",
          "default": false,
          "description": "Enable verbose logging"
        },
        "language": {
          "type": "string",
          "default": "en",
          "description": "Primary language for agent interactions"
        },
        "output_log_file": {
          "type": "string",
          "description": "Path to output log file"
        },
        "planning": {
          "type": "boolean",
          "default": false,
          "description": "Enable planning phase before execution"
        },
        "planning_llm": {
          "type": "object",
          "description": "LLM configuration for planning (if different from default)",
          "properties": {
            "provider": {
              "type": "string"
            },
            "model": {
              "type": "string"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "CrewAIAgentConfig": {
      "type": "object",
      "description": "CrewAI agent configuration mapped to OSSA Agent",
      "required": [
        "role",
        "goal"
      ],
      "properties": {
        "role": {
          "type": "string",
          "minLength": 1,
          "description": "Agent's role/persona (e.g., 'Senior Research Analyst')"
        },
        "goal": {
          "type": "string",
          "minLength": 1,
          "description": "Agent's primary objective"
        },
        "backstory": {
          "type": "string",
          "description": "Background context for the agent persona"
        },
        "llm": {
          "type": "object",
          "description": "LLM configuration for this agent",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "google",
                "azure",
                "ollama",
                "groq",
                "together",
                "fireworks"
              ]
            },
            "model": {
              "type": "string"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          },
          "additionalProperties": true
        },
        "tools": {
          "type": "array",
          "description": "Tools available to this agent (capability names)",
          "items": {
            "type": "string"
          }
        },
        "allow_delegation": {
          "type": "boolean",
          "default": true,
          "description": "Can this agent delegate to others"
        },
        "max_iter": {
          "type": "integer",
          "default": 25,
          "minimum": 1,
          "description": "Maximum reasoning iterations"
        },
        "max_rpm": {
          "type": "integer",
          "minimum": 1,
          "description": "Rate limit for this agent"
        },
        "max_execution_time": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum execution time in seconds"
        },
        "verbose": {
          "type": "boolean",
          "default": false,
          "description": "Enable verbose logging"
        },
        "cache": {
          "type": "boolean",
          "default": true,
          "description": "Enable response caching"
        },
        "system_template": {
          "type": "string",
          "description": "Custom system prompt template"
        },
        "prompt_template": {
          "type": "string",
          "description": "Custom prompt template"
        },
        "response_template": {
          "type": "string",
          "description": "Custom response template"
        },
        "allow_code_execution": {
          "type": "boolean",
          "default": false,
          "description": "Allow code execution capability"
        },
        "code_execution_mode": {
          "type": "string",
          "enum": [
            "safe",
            "unsafe"
          ],
          "default": "safe",
          "description": "Code execution security mode"
        },
        "ossa_agent_ref": {
          "type": "string",
          "description": "Reference to OSSA Agent manifest file"
        }
      },
      "additionalProperties": true
    },
    "CrewAITaskConfig": {
      "type": "object",
      "description": "CrewAI task configuration mapped to OSSA Task/WorkflowStep",
      "required": [
        "description",
        "agent"
      ],
      "properties": {
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "Detailed task description"
        },
        "agent": {
          "type": "string",
          "description": "Agent role assigned to this task"
        },
        "expected_output": {
          "type": "string",
          "description": "Description of expected output format"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Specific tools for this task"
        },
        "context": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "References to other tasks providing context"
        },
        "async_execution": {
          "type": "boolean",
          "default": false,
          "description": "Execute asynchronously"
        },
        "output_json": {
          "type": "object",
          "description": "JSON schema for structured output",
          "additionalProperties": true
        },
        "output_pydantic": {
          "type": "string",
          "description": "Pydantic model class name for validation"
        },
        "output_file": {
          "type": "string",
          "description": "File path for output"
        },
        "human_input": {
          "type": "boolean",
          "default": false,
          "description": "Require human input before completion"
        },
        "converter_cls": {
          "type": "string",
          "description": "Custom output converter class"
        },
        "ossa_task_ref": {
          "type": "string",
          "description": "Reference to OSSA Task manifest file"
        }
      },
      "additionalProperties": true
    },
    "CrewAIMemoryConfig": {
      "type": "object",
      "description": "CrewAI memory system configuration mapped to OSSA state",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable memory system"
        },
        "short_term": {
          "type": "object",
          "description": "Short-term memory (within session)",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "rag",
                "simple",
                "custom"
              ],
              "default": "rag"
            },
            "embedder": {
              "type": "object",
              "properties": {
                "provider": {
                  "type": "string",
                  "enum": [
                    "openai",
                    "cohere",
                    "google",
                    "huggingface"
                  ]
                },
                "model": {
                  "type": "string"
                },
                "config": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          },
          "additionalProperties": true
        },
        "long_term": {
          "type": "object",
          "description": "Long-term memory (persistent)",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "rag",
                "sqlite",
                "custom"
              ],
              "default": "rag"
            },
            "storage": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "chroma",
                    "qdrant",
                    "pinecone",
                    "weaviate",
                    "pgvector",
                    "milvus",
                    "faiss"
                  ]
                },
                "connection": {
                  "type": "string",
                  "description": "Connection string or path"
                }
              }
            }
          },
          "additionalProperties": true
        },
        "entity": {
          "type": "object",
          "description": "Entity memory (extracted entities)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "provider": {
              "type": "string",
              "enum": [
                "rag",
                "spacy",
                "custom"
              ]
            }
          },
          "additionalProperties": true
        },
        "contextual": {
          "type": "object",
          "description": "Contextual memory (RAG-based)",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "retriever": {
              "type": "object",
              "properties": {
                "k": {
                  "type": "integer",
                  "default": 5,
                  "description": "Number of results to retrieve"
                },
                "threshold": {
                  "type": "number",
                  "default": 0.7,
                  "description": "Similarity threshold"
                }
              }
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "CrewAICallbacksConfig": {
      "type": "object",
      "description": "CrewAI callback configuration mapped to OSSA observability",
      "properties": {
        "on_step": {
          "type": "object",
          "description": "Step completion callback",
          "properties": {
            "handler": {
              "type": "string",
              "description": "Handler function/class reference"
            },
            "otel_export": {
              "type": "boolean",
              "default": true,
              "description": "Export to OpenTelemetry"
            },
            "include_output": {
              "type": "boolean",
              "default": false,
              "description": "Include step output in trace"
            }
          },
          "additionalProperties": true
        },
        "on_task": {
          "type": "object",
          "description": "Task completion callback",
          "properties": {
            "handler": {
              "type": "string"
            },
            "otel_export": {
              "type": "boolean",
              "default": true
            },
            "include_output": {
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": true
        },
        "on_crew_start": {
          "type": "object",
          "description": "Crew start callback",
          "properties": {
            "handler": {
              "type": "string"
            },
            "otel_export": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": true
        },
        "on_crew_end": {
          "type": "object",
          "description": "Crew completion callback",
          "properties": {
            "handler": {
              "type": "string"
            },
            "otel_export": {
              "type": "boolean",
              "default": true
            },
            "include_final_output": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": true
        },
        "on_agent_action": {
          "type": "object",
          "description": "Agent action callback",
          "properties": {
            "handler": {
              "type": "string"
            },
            "otel_export": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": true
        },
        "on_tool_use": {
          "type": "object",
          "description": "Tool usage callback",
          "properties": {
            "handler": {
              "type": "string"
            },
            "otel_export": {
              "type": "boolean",
              "default": true
            },
            "track_latency": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "BedrockAgentsExtension": {
      "type": "object",
      "description": "AWS Bedrock Agents extension configuration for deploying OSSA agents as Amazon Bedrock Agents",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable Bedrock Agents integration"
        },
        "agent_id": {
          "type": "string",
          "description": "Existing Bedrock Agent ID to use"
        },
        "agent_alias_id": {
          "type": "string",
          "description": "Bedrock Agent alias ID for versioning"
        },
        "foundation_model": {
          "type": "string",
          "description": "Bedrock foundation model ID (e.g., anthropic.claude-3-sonnet-20240229-v1:0)",
          "examples": [
            "anthropic.claude-3-sonnet-20240229-v1:0",
            "anthropic.claude-3-haiku-20240307-v1:0"
          ]
        },
        "instruction": {
          "type": "string",
          "description": "Agent instructions (mapped from spec.role if not provided)"
        },
        "idle_session_ttl_seconds": {
          "type": "integer",
          "minimum": 60,
          "maximum": 3600,
          "default": 600,
          "description": "Session timeout in seconds"
        },
        "action_groups": {
          "type": "array",
          "description": "Bedrock action groups (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "action_group_name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "action_group_executor": {
                "type": "object",
                "properties": {
                  "lambda": {
                    "type": "string",
                    "description": "Lambda ARN for action execution"
                  }
                }
              },
              "api_schema": {
                "type": "object",
                "description": "OpenAPI schema for action group"
              },
              "function_schema": {
                "type": "object",
                "description": "Function schema for action group"
              }
            },
            "required": [
              "action_group_name"
            ]
          }
        },
        "knowledge_bases": {
          "type": "array",
          "description": "Knowledge base configurations for RAG",
          "items": {
            "type": "object",
            "properties": {
              "knowledge_base_id": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "retrieval_configuration": {
                "type": "object",
                "properties": {
                  "vector_search_configuration": {
                    "type": "object",
                    "properties": {
                      "number_of_results": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 100,
                        "default": 5
                      },
                      "override_search_type": {
                        "type": "string",
                        "enum": [
                          "HYBRID",
                          "SEMANTIC"
                        ]
                      }
                    }
                  }
                }
              }
            },
            "required": [
              "knowledge_base_id"
            ]
          }
        },
        "guardrail": {
          "type": "object",
          "description": "Bedrock Guardrail configuration (mapped from spec.safety)",
          "properties": {
            "guardrail_identifier": {
              "type": "string"
            },
            "guardrail_version": {
              "type": "string"
            }
          }
        },
        "memory_configuration": {
          "type": "object",
          "description": "Agent memory settings",
          "properties": {
            "enabled_memory_types": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "SESSION_SUMMARY"
                ]
              }
            },
            "storage_days": {
              "type": "integer",
              "minimum": 1,
              "maximum": 365,
              "default": 30
            }
          }
        },
        "prompt_override_configuration": {
          "type": "object",
          "description": "Override default prompts",
          "properties": {
            "prompt_configurations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "prompt_type": {
                    "type": "string",
                    "enum": [
                      "PRE_PROCESSING",
                      "ORCHESTRATION",
                      "POST_PROCESSING",
                      "KNOWLEDGE_BASE_RESPONSE_GENERATION"
                    ]
                  },
                  "prompt_state": {
                    "type": "string",
                    "enum": [
                      "ENABLED",
                      "DISABLED"
                    ]
                  },
                  "base_prompt_template": {
                    "type": "string"
                  },
                  "inference_configuration": {
                    "type": "object",
                    "properties": {
                      "temperature": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "top_p": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "top_k": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 500
                      },
                      "maximum_length": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 4096
                      },
                      "stop_sequences": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "LlamaIndexExtension": {
      "type": "object",
      "description": "LlamaIndex extension configuration for data-aware AI applications",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable LlamaIndex integration"
        },
        "agent_type": {
          "type": "string",
          "description": "LlamaIndex agent type",
          "enum": [
            "openai",
            "react",
            "structured_planner",
            "function_calling",
            "multi_document",
            "sub_question"
          ],
          "default": "openai"
        },
        "llm": {
          "type": "object",
          "description": "LLM configuration (mapped from spec.llm)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "huggingface",
                "azure_openai",
                "ollama",
                "bedrock"
              ],
              "description": "LLM provider type"
            },
            "model": {
              "type": "string",
              "description": "Model identifier"
            },
            "temperature": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            },
            "max_tokens": {
              "type": "integer",
              "minimum": 1
            },
            "additional_kwargs": {
              "type": "object",
              "description": "Additional LLM parameters"
            }
          }
        },
        "embed_model": {
          "type": "object",
          "description": "Embedding model configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "openai",
                "huggingface",
                "cohere",
                "bedrock",
                "local"
              ],
              "description": "Embedding model type"
            },
            "model_name": {
              "type": "string",
              "description": "Embedding model name"
            },
            "embed_batch_size": {
              "type": "integer",
              "minimum": 1,
              "default": 10
            }
          }
        },
        "tools": {
          "type": "array",
          "description": "LlamaIndex tools (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "function",
                  "query_engine",
                  "retriever",
                  "custom"
                ]
              },
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "fn_schema": {
                "type": "object",
                "description": "Function schema for tool"
              },
              "return_direct": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "name"
            ]
          }
        },
        "index": {
          "type": "object",
          "description": "Index configuration for RAG",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "vector",
                "list",
                "tree",
                "keyword",
                "knowledge_graph",
                "document_summary"
              ],
              "default": "vector"
            },
            "vector_store": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "simple",
                    "faiss",
                    "chroma",
                    "pinecone",
                    "qdrant",
                    "weaviate",
                    "milvus"
                  ]
                },
                "connection_string": {
                  "type": "string"
                },
                "collection_name": {
                  "type": "string"
                }
              }
            },
            "storage_context": {
              "type": "object",
              "properties": {
                "persist_dir": {
                  "type": "string"
                },
                "docstore": {
                  "type": "object"
                },
                "index_store": {
                  "type": "object"
                }
              }
            }
          }
        },
        "retriever": {
          "type": "object",
          "description": "Retriever configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "vector_index",
                "bm25",
                "hybrid",
                "auto_merging",
                "recursive"
              ]
            },
            "similarity_top_k": {
              "type": "integer",
              "minimum": 1,
              "default": 5
            },
            "node_postprocessors": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "similarity_cutoff",
                      "keyword",
                      "metadata",
                      "cohere_rerank",
                      "llm_rerank"
                    ]
                  },
                  "config": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "query_engine": {
          "type": "object",
          "description": "Query engine configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "simple",
                "citation",
                "sub_question",
                "router",
                "multi_step",
                "flare"
              ]
            },
            "response_mode": {
              "type": "string",
              "enum": [
                "refine",
                "compact",
                "tree_summarize",
                "simple_summarize",
                "accumulate",
                "compact_accumulate"
              ],
              "default": "compact"
            },
            "streaming": {
              "type": "boolean",
              "default": false
            },
            "response_synthesizer": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                },
                "text_qa_template": {
                  "type": "string"
                },
                "refine_template": {
                  "type": "string"
                }
              }
            }
          }
        },
        "memory": {
          "type": "object",
          "description": "Chat memory configuration (mapped from spec.state)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "buffer",
                "summary",
                "buffer_window",
                "entity"
              ],
              "default": "buffer"
            },
            "token_limit": {
              "type": "integer",
              "minimum": 1
            },
            "chat_store": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "simple",
                    "redis",
                    "dynamodb"
                  ]
                },
                "connection_string": {
                  "type": "string"
                }
              }
            }
          }
        },
        "callbacks": {
          "type": "object",
          "description": "Callback configuration (mapped from spec.observability)",
          "properties": {
            "handlers": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "llama_debug",
                      "wandb",
                      "arize_phoenix",
                      "langfuse",
                      "opentelemetry"
                    ]
                  },
                  "config": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "service_context": {
          "type": "object",
          "description": "Global service context configuration",
          "properties": {
            "chunk_size": {
              "type": "integer",
              "minimum": 1,
              "default": 1024
            },
            "chunk_overlap": {
              "type": "integer",
              "minimum": 0,
              "default": 20
            },
            "context_window": {
              "type": "integer",
              "minimum": 1
            },
            "num_output": {
              "type": "integer",
              "minimum": 1
            }
          }
        }
      },
      "additionalProperties": true
    },
    "VertexAIExtension": {
      "type": "object",
      "description": "Google Vertex AI Agent Builder mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "project_id": {
          "type": "string",
          "description": "GCP project ID"
        },
        "location": {
          "type": "string",
          "description": "GCP region",
          "default": "us-central1"
        },
        "agent_id": {
          "type": "string",
          "description": "Existing Vertex AI Agent ID"
        },
        "display_name": {
          "type": "string",
          "description": "Agent display name (mapped from metadata.name)"
        },
        "default_language_code": {
          "type": "string",
          "default": "en"
        },
        "time_zone": {
          "type": "string",
          "default": "America/Los_Angeles"
        },
        "generative_settings": {
          "type": "object",
          "properties": {
            "fallback_settings": {
              "type": "object",
              "properties": {
                "selected_prompt": {
                  "type": "string"
                },
                "prompt_templates": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "display_name": {
                        "type": "string"
                      },
                      "prompt_text": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "generative_safety_settings": {
              "type": "object",
              "properties": {
                "banned_phrases": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "knowledge_connector_settings": {
              "type": "object",
              "properties": {
                "business": {
                  "type": "string"
                },
                "agent": {
                  "type": "string"
                },
                "agent_identity": {
                  "type": "string"
                },
                "disable_data_store_fallback": {
                  "type": "boolean"
                }
              }
            },
            "llm_model_settings": {
              "type": "object",
              "properties": {
                "model": {
                  "type": "string",
                  "description": "Vertex AI model (mapped from spec.llm)"
                },
                "prompt_text": {
                  "type": "string"
                }
              }
            }
          }
        },
        "start_flow": {
          "type": "string",
          "description": "Starting flow reference"
        },
        "security_settings": {
          "type": "string",
          "description": "Security settings resource name"
        },
        "enable_stackdriver_logging": {
          "type": "boolean",
          "default": true
        },
        "enable_spell_correction": {
          "type": "boolean",
          "default": false
        },
        "locked": {
          "type": "boolean",
          "default": false
        },
        "advanced_settings": {
          "type": "object",
          "properties": {
            "audio_export_gcs_destination": {
              "type": "object",
              "properties": {
                "uri": {
                  "type": "string"
                }
              }
            },
            "speech_settings": {
              "type": "object",
              "properties": {
                "endpointer_sensitivity": {
                  "type": "integer"
                },
                "no_speech_timeout": {
                  "type": "string"
                },
                "use_timeout_based_endpointing": {
                  "type": "boolean"
                }
              }
            },
            "logging_settings": {
              "type": "object",
              "properties": {
                "enable_stackdriver_logging": {
                  "type": "boolean"
                },
                "enable_interaction_logging": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "git_integration_settings": {
          "type": "object",
          "properties": {
            "github_settings": {
              "type": "object",
              "properties": {
                "display_name": {
                  "type": "string"
                },
                "repository_uri": {
                  "type": "string"
                },
                "tracking_branch": {
                  "type": "string"
                },
                "branches": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "text_to_speech_settings": {
          "type": "object",
          "properties": {
            "synthesize_speech_configs": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "voice": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "LangGraphExtension": {
      "type": "object",
      "description": "LangGraph state machine and graph orchestration mapping",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "graph_type": {
          "type": "string",
          "enum": [
            "StateGraph",
            "MessageGraph",
            "CompiledGraph"
          ],
          "default": "StateGraph",
          "description": "LangGraph graph type"
        },
        "state_schema": {
          "type": "object",
          "description": "TypedDict state schema definition",
          "properties": {
            "name": {
              "type": "string"
            },
            "fields": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string"
                  },
                  "default": {},
                  "reducer": {
                    "type": "string",
                    "enum": [
                      "replace",
                      "append",
                      "merge"
                    ]
                  }
                }
              }
            }
          }
        },
        "nodes": {
          "type": "array",
          "description": "Graph nodes (mapped from workflow steps)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "function",
                  "agent",
                  "tool",
                  "subgraph",
                  "conditional"
                ]
              },
              "function_ref": {
                "type": "string",
                "description": "Python function reference"
              },
              "agent_ref": {
                "type": "string",
                "description": "OSSA agent reference"
              },
              "retry_policy": {
                "type": "object",
                "properties": {
                  "max_attempts": {
                    "type": "integer"
                  },
                  "backoff_factor": {
                    "type": "number"
                  }
                }
              }
            },
            "required": [
              "name"
            ]
          }
        },
        "edges": {
          "type": "array",
          "description": "Graph edges defining flow",
          "items": {
            "type": "object",
            "properties": {
              "from": {
                "type": "string"
              },
              "to": {
                "type": "string"
              },
              "condition": {
                "type": "string",
                "description": "Conditional edge function reference"
              }
            },
            "required": [
              "from",
              "to"
            ]
          }
        },
        "conditional_edges": {
          "type": "array",
          "description": "Conditional branching edges",
          "items": {
            "type": "object",
            "properties": {
              "from": {
                "type": "string"
              },
              "path_map": {
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "condition_function": {
                "type": "string"
              }
            }
          }
        },
        "entry_point": {
          "type": "string",
          "description": "Graph entry node"
        },
        "finish_point": {
          "type": "string",
          "description": "Graph finish node (END)"
        },
        "checkpointer": {
          "type": "object",
          "description": "State persistence configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "memory",
                "sqlite",
                "postgres",
                "redis"
              ]
            },
            "connection_string": {
              "type": "string"
            },
            "thread_id_key": {
              "type": "string"
            }
          }
        },
        "interrupt_before": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Nodes to interrupt before for human-in-the-loop"
        },
        "interrupt_after": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Nodes to interrupt after"
        },
        "recursion_limit": {
          "type": "integer",
          "default": 25,
          "description": "Maximum recursion depth"
        },
        "debug": {
          "type": "boolean",
          "default": false
        }
      },
      "additionalProperties": true
    },
    "HaystackExtension": {
      "type": "object",
      "description": "deepset Haystack pipeline mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "pipeline_type": {
          "type": "string",
          "enum": [
            "indexing",
            "query",
            "chat",
            "agent"
          ],
          "description": "Haystack pipeline type"
        },
        "components": {
          "type": "array",
          "description": "Pipeline components",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "description": "Haystack component class"
              },
              "init_parameters": {
                "type": "object",
                "description": "Component initialization parameters"
              }
            },
            "required": [
              "name",
              "type"
            ]
          }
        },
        "connections": {
          "type": "array",
          "description": "Component connections",
          "items": {
            "type": "object",
            "properties": {
              "sender": {
                "type": "string"
              },
              "sender_output": {
                "type": "string"
              },
              "receiver": {
                "type": "string"
              },
              "receiver_input": {
                "type": "string"
              }
            },
            "required": [
              "sender",
              "receiver"
            ]
          }
        },
        "metadata": {
          "type": "object",
          "properties": {
            "max_runs_per_component": {
              "type": "integer"
            }
          }
        },
        "document_store": {
          "type": "object",
          "description": "Document store configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "InMemoryDocumentStore",
                "ElasticsearchDocumentStore",
                "OpenSearchDocumentStore",
                "PineconeDocumentStore",
                "QdrantDocumentStore",
                "WeaviateDocumentStore",
                "ChromaDocumentStore",
                "PgvectorDocumentStore"
              ]
            },
            "connection_params": {
              "type": "object"
            }
          }
        },
        "chat_generator": {
          "type": "object",
          "description": "Chat generator configuration (mapped from spec.llm)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "OpenAIChatGenerator",
                "AnthropicChatGenerator",
                "AzureOpenAIChatGenerator",
                "HuggingFaceLocalChatGenerator",
                "HuggingFaceAPIChatGenerator",
                "OllamaChatGenerator",
                "GoogleAIGeminiChatGenerator",
                "CohereGenerator"
              ]
            },
            "model": {
              "type": "string"
            },
            "generation_kwargs": {
              "type": "object"
            }
          }
        },
        "embedder": {
          "type": "object",
          "description": "Embedding model configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "SentenceTransformersTextEmbedder",
                "OpenAITextEmbedder",
                "CohereTextEmbedder",
                "HuggingFaceAPITextEmbedder",
                "AzureOpenAITextEmbedder"
              ]
            },
            "model": {
              "type": "string"
            }
          }
        },
        "retriever": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "InMemoryEmbeddingRetriever",
                "InMemoryBM25Retriever",
                "ElasticsearchEmbeddingRetriever",
                "ElasticsearchBM25Retriever",
                "PineconeEmbeddingRetriever",
                "QdrantEmbeddingRetriever"
              ]
            },
            "top_k": {
              "type": "integer",
              "default": 10
            },
            "filters": {
              "type": "object"
            }
          }
        },
        "prompt_builder": {
          "type": "object",
          "properties": {
            "template": {
              "type": "string"
            },
            "required_variables": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "output_adapter": {
          "type": "object",
          "properties": {
            "template": {
              "type": "string"
            },
            "output_type": {
              "type": "string"
            }
          }
        },
        "tools": {
          "type": "array",
          "description": "Haystack tools (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "pipeline_ref": {
                "type": "string"
              },
              "parameters": {
                "type": "object"
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "PydanticAIExtension": {
      "type": "object",
      "description": "Pydantic AI agent mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "agent_class": {
          "type": "string",
          "description": "Custom Agent class name"
        },
        "model": {
          "type": "object",
          "description": "Model configuration (mapped from spec.llm)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "gemini",
                "groq",
                "mistral",
                "ollama",
                "test"
              ],
              "description": "Pydantic AI model provider"
            },
            "model_name": {
              "type": "string"
            },
            "base_url": {
              "type": "string"
            },
            "api_key_env": {
              "type": "string"
            }
          }
        },
        "result_type": {
          "type": "object",
          "description": "Pydantic model for structured output",
          "properties": {
            "name": {
              "type": "string"
            },
            "fields": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "default": {}
                }
              }
            }
          }
        },
        "deps_type": {
          "type": "object",
          "description": "Dependencies type for dependency injection",
          "properties": {
            "name": {
              "type": "string"
            },
            "fields": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "system_prompt": {
          "type": "string",
          "description": "System prompt (mapped from spec.role)"
        },
        "retries": {
          "type": "integer",
          "default": 1,
          "description": "Default retry count"
        },
        "result_retries": {
          "type": "integer",
          "description": "Retries for result validation"
        },
        "end_strategy": {
          "type": "string",
          "enum": [
            "early",
            "exhaustive"
          ],
          "default": "early"
        },
        "tools": {
          "type": "array",
          "description": "Tool definitions (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "function_ref": {
                "type": "string"
              },
              "retries": {
                "type": "integer"
              },
              "prepare_ref": {
                "type": "string"
              }
            },
            "required": [
              "name"
            ]
          }
        },
        "result_validators": {
          "type": "array",
          "description": "Result validation functions",
          "items": {
            "type": "object",
            "properties": {
              "function_ref": {
                "type": "string"
              }
            }
          }
        },
        "defer_model_check": {
          "type": "boolean",
          "default": false
        },
        "instrument": {
          "type": "object",
          "description": "Instrumentation configuration (mapped from spec.observability)",
          "properties": {
            "logfire": {
              "type": "boolean"
            },
            "opentelemetry": {
              "type": "boolean"
            }
          }
        }
      },
      "additionalProperties": true
    },
    "PromptCaching": {
      "type": "object",
      "description": "Prompt caching configuration for supported providers (v0.3.6+). Achieves up to 90% cost savings on repeated context.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable prompt caching (Anthropic Claude, OpenAI, etc.)"
        },
        "provider": {
          "type": "string",
          "enum": [
            "anthropic",
            "openai",
            "auto"
          ],
          "default": "auto",
          "description": "Caching provider (auto-detects from spec.llm.provider)"
        },
        "strategy": {
          "type": "string",
          "enum": [
            "static",
            "dynamic",
            "hybrid"
          ],
          "default": "static",
          "description": "Caching strategy: static (system prompts), dynamic (recent context), hybrid (both)"
        },
        "cache_breakpoints": {
          "type": "array",
          "description": "Explicit cache breakpoints (Anthropic: min 1024 tokens, max 4 breakpoints)",
          "items": {
            "type": "string",
            "enum": [
              "system_prompt",
              "knowledge_base",
              "recent_history",
              "tools"
            ]
          }
        },
        "min_tokens": {
          "type": "integer",
          "default": 1024,
          "description": "Minimum tokens to enable caching (provider-specific)"
        },
        "ttl": {
          "type": "integer",
          "default": 300,
          "description": "Cache TTL in seconds (Anthropic: 5 minutes, OpenAI: varies)"
        },
        "estimated_savings": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Estimated cost savings percentage (for documentation)"
        }
      },
      "additionalProperties": false
    },
    "SmolagentsExtension": {
      "type": "object",
      "description": "HuggingFace Smolagents mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "agent_type": {
          "type": "string",
          "enum": [
            "ToolCallingAgent",
            "CodeAgent",
            "ManagedAgent"
          ],
          "default": "ToolCallingAgent",
          "description": "Smolagents agent type"
        },
        "model": {
          "type": "object",
          "description": "Model configuration (mapped from spec.llm)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "HfApiModel",
                "TransformersModel",
                "LiteLLMModel",
                "OpenAIServerModel",
                "AzureOpenAIServerModel",
                "AmazonBedrockServerModel",
                "MLXModel"
              ],
              "description": "Smolagents model class"
            },
            "model_id": {
              "type": "string"
            },
            "token_env": {
              "type": "string"
            },
            "kwargs": {
              "type": "object"
            }
          }
        },
        "tools": {
          "type": "array",
          "description": "Tool definitions (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "builtin",
                  "custom",
                  "hub",
                  "langchain",
                  "mcp",
                  "space"
                ]
              },
              "hub_repo_id": {
                "type": "string",
                "description": "HuggingFace Hub tool repo"
              },
              "function_ref": {
                "type": "string"
              },
              "inputs": {
                "type": "object",
                "additionalProperties": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    }
                  }
                }
              },
              "output_type": {
                "type": "string"
              }
            },
            "required": [
              "name"
            ]
          }
        },
        "builtin_tools": {
          "type": "array",
          "description": "Built-in smolagent tools to enable",
          "items": {
            "type": "string",
            "enum": [
              "DuckDuckGoSearchTool",
              "VisitWebpageTool",
              "WikipediaSearchTool",
              "PythonInterpreterTool",
              "FinalAnswerTool",
              "UserInputTool",
              "SpeechToTextTool",
              "TextToSpeechTool",
              "TranslationTool",
              "ImageGenerationTool"
            ]
          }
        },
        "system_prompt": {
          "type": "string",
          "description": "System prompt (mapped from spec.role)"
        },
        "additional_authorized_imports": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Additional Python imports for CodeAgent"
        },
        "planning_interval": {
          "type": "integer",
          "description": "Steps between planning phases"
        },
        "max_steps": {
          "type": "integer",
          "default": 20
        },
        "verbosity_level": {
          "type": "integer",
          "enum": [
            0,
            1,
            2
          ],
          "default": 1
        },
        "grammar": {
          "type": "object",
          "description": "Output grammar constraints"
        },
        "managed_agents": {
          "type": "array",
          "description": "Sub-agents for ManagedAgent",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "agent_ref": {
                "type": "string",
                "description": "OSSA agent reference"
              },
              "description": {
                "type": "string"
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "PhidataExtension": {
      "type": "object",
      "description": "Phidata agent mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "agent_type": {
          "type": "string",
          "enum": [
            "Agent",
            "Assistant",
            "Team"
          ],
          "default": "Agent"
        },
        "model": {
          "type": "object",
          "description": "Model configuration (mapped from spec.llm)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "OpenAIChat",
                "Anthropic",
                "Gemini",
                "Groq",
                "Cohere",
                "Ollama",
                "Together",
                "Mistral",
                "AWS Bedrock",
                "Azure"
              ],
              "description": "Phidata model class"
            },
            "id": {
              "type": "string"
            },
            "api_key_env": {
              "type": "string"
            }
          }
        },
        "instructions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Agent instructions (mapped from spec.role)"
        },
        "tools": {
          "type": "array",
          "description": "Tool definitions (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "builtin",
                  "toolkit",
                  "function"
                ]
              },
              "toolkit_class": {
                "type": "string"
              },
              "function_ref": {
                "type": "string"
              }
            }
          }
        },
        "builtin_tools": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "DuckDuckGo",
              "Newspaper4k",
              "Arxiv",
              "PubMed",
              "Wikipedia",
              "Exa",
              "Tavily",
              "Firecrawl",
              "Calculator",
              "File",
              "Shell",
              "Sleep",
              "Yfinance",
              "Email",
              "Apify",
              "Zendesk",
              "Jira",
              "Linear",
              "Slack",
              "Discord",
              "Zoom"
            ]
          }
        },
        "knowledge": {
          "type": "object",
          "description": "Knowledge base configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "PDFKnowledgeBase",
                "PDFUrlKnowledgeBase",
                "TextKnowledgeBase",
                "JSONKnowledgeBase",
                "CSVKnowledgeBase",
                "DocxKnowledgeBase",
                "CombinedKnowledgeBase",
                "WebsiteKnowledgeBase",
                "WikipediaKnowledgeBase",
                "ArxivKnowledgeBase"
              ]
            },
            "sources": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "vector_db": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "PgVector",
                    "Pinecone",
                    "Qdrant",
                    "Chroma",
                    "LanceDb",
                    "Weaviate"
                  ]
                },
                "connection": {
                  "type": "string"
                },
                "collection": {
                  "type": "string"
                }
              }
            }
          }
        },
        "storage": {
          "type": "object",
          "description": "Session storage configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "PostgresAgentStorage",
                "SqliteAgentStorage",
                "MongoAgentStorage",
                "S3AgentStorage",
                "YamlAgentStorage",
                "JsonAgentStorage"
              ]
            },
            "connection": {
              "type": "string"
            },
            "table_name": {
              "type": "string"
            }
          }
        },
        "memory": {
          "type": "object",
          "description": "Memory configuration (mapped from spec.state)",
          "properties": {
            "db": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "PostgresMemoryDb",
                    "SqliteMemoryDb"
                  ]
                },
                "connection": {
                  "type": "string"
                }
              }
            },
            "create_user_memories": {
              "type": "boolean"
            },
            "create_session_summary": {
              "type": "boolean"
            }
          }
        },
        "reasoning": {
          "type": "boolean",
          "default": false,
          "description": "Enable reasoning mode"
        },
        "show_tool_calls": {
          "type": "boolean",
          "default": false
        },
        "markdown": {
          "type": "boolean",
          "default": true
        },
        "debug_mode": {
          "type": "boolean",
          "default": false
        },
        "team": {
          "type": "object",
          "description": "Team configuration for multi-agent",
          "properties": {
            "agents": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "agent_ref": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string"
                  }
                }
              }
            },
            "mode": {
              "type": "string",
              "enum": [
                "route",
                "collaborate",
                "coordinate"
              ]
            }
          }
        }
      },
      "additionalProperties": true
    },
    "InstructorExtension": {
      "type": "object",
      "description": "Instructor structured output mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "client": {
          "type": "object",
          "description": "Client configuration (mapped from spec.llm)",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "litellm",
                "cohere",
                "google",
                "vertexai",
                "mistral",
                "groq",
                "cerebras",
                "fireworks",
                "together",
                "ollama"
              ],
              "description": "Instructor client type"
            },
            "model": {
              "type": "string"
            },
            "mode": {
              "type": "string",
              "enum": [
                "FUNCTIONS",
                "TOOLS",
                "JSON",
                "MD_JSON",
                "JSON_SCHEMA",
                "TOOLS_STRICT",
                "ANTHROPIC_TOOLS",
                "ANTHROPIC_JSON",
                "COHERE_TOOLS",
                "GEMINI_JSON",
                "GEMINI_TOOLS",
                "VERTEXAI_TOOLS",
                "VERTEXAI_JSON",
                "MISTRAL_TOOLS"
              ],
              "description": "Instructor mode for structured output"
            }
          }
        },
        "response_model": {
          "type": "object",
          "description": "Pydantic model for response validation",
          "properties": {
            "name": {
              "type": "string"
            },
            "fields": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "default": {}
                }
              }
            }
          }
        },
        "max_retries": {
          "type": "integer",
          "default": 3,
          "description": "Max retries for validation errors"
        },
        "validation_context": {
          "type": "object",
          "description": "Context passed to validators"
        },
        "strict": {
          "type": "boolean",
          "description": "Enable strict mode"
        },
        "hooks": {
          "type": "object",
          "description": "Lifecycle hooks",
          "properties": {
            "on_completion": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "on_parse": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "on_exception": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "iterable": {
          "type": "boolean",
          "default": false,
          "description": "Enable streaming iterable response"
        },
        "partial": {
          "type": "boolean",
          "default": false,
          "description": "Enable partial streaming"
        },
        "cache": {
          "type": "object",
          "description": "Caching configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "enum": [
                "redis",
                "diskcache",
                "memory"
              ]
            },
            "ttl": {
              "type": "integer"
            }
          }
        }
      },
      "additionalProperties": true
    },
    "AutoGPTExtension": {
      "type": "object",
      "description": "AutoGPT autonomous agent mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "ai_settings": {
          "type": "object",
          "description": "AI personality settings",
          "properties": {
            "ai_name": {
              "type": "string",
              "description": "Agent name (mapped from metadata.name)"
            },
            "ai_role": {
              "type": "string",
              "description": "Agent role (mapped from spec.role)"
            },
            "ai_goals": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Agent goals"
            }
          }
        },
        "llm": {
          "type": "object",
          "description": "LLM configuration (mapped from spec.llm)",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "groq",
                "llamafile"
              ]
            },
            "model": {
              "type": "string"
            },
            "api_key_env": {
              "type": "string"
            }
          }
        },
        "commands": {
          "type": "array",
          "description": "Enabled commands (mapped from spec.tools)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "enabled": {
                "type": "boolean",
                "default": true
              },
              "category": {
                "type": "string",
                "enum": [
                  "web_search",
                  "web_browse",
                  "file_operations",
                  "code_execution",
                  "system",
                  "user_interaction"
                ]
              }
            }
          }
        },
        "builtin_commands": {
          "type": "object",
          "description": "Built-in command toggles",
          "properties": {
            "web_search": {
              "type": "boolean",
              "default": true
            },
            "web_browse": {
              "type": "boolean",
              "default": true
            },
            "read_file": {
              "type": "boolean",
              "default": true
            },
            "write_file": {
              "type": "boolean",
              "default": true
            },
            "execute_code": {
              "type": "boolean",
              "default": false
            },
            "execute_shell": {
              "type": "boolean",
              "default": false
            },
            "list_agents": {
              "type": "boolean",
              "default": true
            },
            "start_agent": {
              "type": "boolean",
              "default": true
            },
            "message_agent": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "memory": {
          "type": "object",
          "description": "Memory backend configuration",
          "properties": {
            "backend": {
              "type": "string",
              "enum": [
                "local",
                "pinecone",
                "redis",
                "milvus",
                "weaviate"
              ]
            },
            "index": {
              "type": "string"
            }
          }
        },
        "workspace": {
          "type": "object",
          "description": "Workspace configuration",
          "properties": {
            "restrict_to_workspace": {
              "type": "boolean",
              "default": true
            },
            "workspace_path": {
              "type": "string"
            }
          }
        },
        "continuous_mode": {
          "type": "boolean",
          "default": false,
          "description": "Run without user confirmation"
        },
        "continuous_limit": {
          "type": "integer",
          "default": 0,
          "description": "Max continuous iterations (0 = unlimited)"
        },
        "speak_mode": {
          "type": "boolean",
          "default": false
        },
        "debug_mode": {
          "type": "boolean",
          "default": false
        },
        "skip_reprompt": {
          "type": "boolean",
          "default": false
        },
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 2,
          "default": 0
        },
        "plugins": {
          "type": "array",
          "description": "AutoGPT plugins to load",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "enabled": {
                "type": "boolean"
              },
              "config": {
                "type": "object"
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "MetaGPTExtension": {
      "type": "object",
      "description": "MetaGPT multi-agent software team mapping configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "company": {
          "type": "object",
          "description": "Company/team configuration",
          "properties": {
            "name": {
              "type": "string",
              "description": "Company name"
            },
            "investment": {
              "type": "number",
              "description": "Budget in dollars"
            },
            "idea": {
              "type": "string",
              "description": "Product idea/requirement"
            }
          }
        },
        "team": {
          "type": "object",
          "description": "Team composition",
          "properties": {
            "roles": {
              "type": "array",
              "description": "Team roles (mapped from multi-agent spec)",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "role_type": {
                    "type": "string",
                    "enum": [
                      "ProductManager",
                      "Architect",
                      "ProjectManager",
                      "Engineer",
                      "QAEngineer",
                      "Researcher",
                      "DataAnalyst",
                      "Custom"
                    ],
                    "description": "MetaGPT role type"
                  },
                  "goal": {
                    "type": "string"
                  },
                  "constraints": {
                    "type": "string"
                  },
                  "agent_ref": {
                    "type": "string",
                    "description": "OSSA agent reference for custom roles"
                  }
                },
                "required": [
                  "name",
                  "role_type"
                ]
              }
            },
            "n_round": {
              "type": "integer",
              "default": 3,
              "description": "Number of collaboration rounds"
            }
          }
        },
        "llm": {
          "type": "object",
          "description": "LLM configuration (mapped from spec.llm)",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "openai",
                "anthropic",
                "azure",
                "zhipuai",
                "ollama",
                "fireworks",
                "open_llm",
                "gemini",
                "ark",
                "qianfan",
                "dashscope",
                "spark",
                "moonshot"
              ]
            },
            "model": {
              "type": "string"
            },
            "api_key_env": {
              "type": "string"
            },
            "base_url": {
              "type": "string"
            }
          }
        },
        "environment": {
          "type": "object",
          "description": "Execution environment",
          "properties": {
            "workspace_path": {
              "type": "string"
            },
            "git_reinit": {
              "type": "boolean",
              "default": true
            },
            "inc": {
              "type": "boolean",
              "default": false
            },
            "project_name": {
              "type": "string"
            },
            "reqa_file": {
              "type": "string"
            }
          }
        },
        "context": {
          "type": "object",
          "description": "Context configuration",
          "properties": {
            "max_budget": {
              "type": "number"
            },
            "src_workspace": {
              "type": "string"
            },
            "code_review": {
              "type": "boolean",
              "default": true
            }
          }
        },
        "actions": {
          "type": "object",
          "description": "Action configuration",
          "properties": {
            "search_and_summarize": {
              "type": "boolean"
            },
            "write_design": {
              "type": "boolean"
            },
            "write_tasks": {
              "type": "boolean"
            },
            "write_code": {
              "type": "boolean"
            },
            "write_code_review": {
              "type": "boolean"
            },
            "run_code": {
              "type": "boolean"
            },
            "write_test": {
              "type": "boolean"
            },
            "debug_error": {
              "type": "boolean"
            }
          }
        },
        "repair": {
          "type": "object",
          "description": "Repair/debug configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "max_auto_fix": {
              "type": "integer",
              "default": 3
            }
          }
        },
        "output": {
          "type": "object",
          "description": "Output configuration",
          "properties": {
            "code_path": {
              "type": "string"
            },
            "docs_path": {
              "type": "string"
            },
            "resources_path": {
              "type": "string"
            }
          }
        }
      },
      "additionalProperties": true
    },
    "KubernetesExtension": {
      "type": "object",
      "description": "Kubernetes deployment mapping configuration for OSSA agents. Supports kind, k3s, minikube, and production clusters.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "cluster": {
          "type": "object",
          "description": "Cluster configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "kind",
                "k3s",
                "minikube",
                "eks",
                "gke",
                "aks",
                "openshift",
                "rancher",
                "custom"
              ],
              "description": "Kubernetes cluster type"
            },
            "name": {
              "type": "string",
              "description": "Cluster name (for kind: cluster name, for cloud: cluster identifier)"
            },
            "context": {
              "type": "string",
              "description": "kubectl context to use"
            },
            "kubeconfig": {
              "type": "string",
              "description": "Path to kubeconfig file or env var reference"
            }
          }
        },
        "namespace": {
          "type": "object",
          "description": "Namespace configuration",
          "properties": {
            "name": {
              "type": "string",
              "default": "ossa-agents",
              "description": "Kubernetes namespace for agents"
            },
            "create": {
              "type": "boolean",
              "default": true,
              "description": "Create namespace if it doesn't exist"
            },
            "labels": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              },
              "description": "Labels to apply to namespace"
            }
          }
        },
        "deployment": {
          "type": "object",
          "description": "Deployment configuration",
          "properties": {
            "replicas": {
              "type": "integer",
              "default": 1,
              "description": "Number of agent pod replicas"
            },
            "strategy": {
              "type": "string",
              "enum": [
                "RollingUpdate",
                "Recreate"
              ],
              "default": "RollingUpdate"
            },
            "image": {
              "type": "object",
              "properties": {
                "repository": {
                  "type": "string"
                },
                "tag": {
                  "type": "string"
                },
                "pullPolicy": {
                  "type": "string",
                  "enum": [
                    "Always",
                    "IfNotPresent",
                    "Never"
                  ],
                  "default": "IfNotPresent"
                }
              }
            },
            "resources": {
              "type": "object",
              "description": "Resource requests and limits",
              "properties": {
                "requests": {
                  "type": "object",
                  "properties": {
                    "cpu": {
                      "type": "string"
                    },
                    "memory": {
                      "type": "string"
                    },
                    "gpu": {
                      "type": "string"
                    }
                  }
                },
                "limits": {
                  "type": "object",
                  "properties": {
                    "cpu": {
                      "type": "string"
                    },
                    "memory": {
                      "type": "string"
                    },
                    "gpu": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "nodeSelector": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "tolerations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "key": {
                    "type": "string"
                  },
                  "operator": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  },
                  "effect": {
                    "type": "string"
                  }
                }
              }
            },
            "affinity": {
              "type": "object",
              "description": "Pod affinity/anti-affinity rules"
            }
          }
        },
        "service": {
          "type": "object",
          "description": "Service configuration for agent networking",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "ClusterIP",
                "NodePort",
                "LoadBalancer"
              ],
              "default": "ClusterIP"
            },
            "port": {
              "type": "integer",
              "default": 8080
            },
            "targetPort": {
              "type": "integer"
            },
            "annotations": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        },
        "ingress": {
          "type": "object",
          "description": "Ingress configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "className": {
              "type": "string"
            },
            "host": {
              "type": "string"
            },
            "path": {
              "type": "string",
              "default": "/"
            },
            "tls": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "secretName": {
                  "type": "string"
                }
              }
            }
          }
        },
        "secrets": {
          "type": "object",
          "description": "Secret management for API keys and credentials",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "kubernetes",
                "vault",
                "aws-secrets-manager",
                "azure-keyvault",
                "gcp-secret-manager",
                "external-secrets"
              ],
              "default": "kubernetes"
            },
            "secretName": {
              "type": "string",
              "description": "Kubernetes secret name containing API keys"
            },
            "keys": {
              "type": "array",
              "description": "Secret keys to mount as environment variables",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "envVar": {
                    "type": "string"
                  },
                  "secretKey": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "envVar"
                ]
              }
            }
          }
        },
        "volumes": {
          "type": "array",
          "description": "Volume mounts for agent pods",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "emptyDir",
                  "configMap",
                  "secret",
                  "persistentVolumeClaim",
                  "hostPath"
                ]
              },
              "mountPath": {
                "type": "string"
              },
              "source": {
                "type": "string"
              },
              "readOnly": {
                "type": "boolean"
              }
            },
            "required": [
              "name",
              "type",
              "mountPath"
            ]
          }
        },
        "probes": {
          "type": "object",
          "description": "Health check probes",
          "properties": {
            "liveness": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "path": {
                  "type": "string",
                  "default": "/health"
                },
                "initialDelaySeconds": {
                  "type": "integer",
                  "default": 30
                },
                "periodSeconds": {
                  "type": "integer",
                  "default": 10
                }
              }
            },
            "readiness": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "path": {
                  "type": "string",
                  "default": "/ready"
                },
                "initialDelaySeconds": {
                  "type": "integer",
                  "default": 5
                },
                "periodSeconds": {
                  "type": "integer",
                  "default": 5
                }
              }
            }
          }
        },
        "serviceAccount": {
          "type": "object",
          "description": "Service account configuration",
          "properties": {
            "create": {
              "type": "boolean",
              "default": true
            },
            "name": {
              "type": "string"
            },
            "annotations": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            }
          }
        },
        "rbac": {
          "type": "object",
          "description": "RBAC configuration for agent permissions",
          "properties": {
            "create": {
              "type": "boolean",
              "default": true
            },
            "rules": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "apiGroups": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "resources": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "verbs": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "helm": {
          "type": "object",
          "description": "Helm chart configuration for agent deployment",
          "properties": {
            "chart": {
              "type": "string"
            },
            "version": {
              "type": "string"
            },
            "repository": {
              "type": "string"
            },
            "releaseName": {
              "type": "string"
            },
            "values": {
              "type": "object",
              "description": "Helm values override"
            },
            "valuesFiles": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "KagentExtension": {
      "type": "object",
      "description": "GitLab Kagent (Kubernetes Agents) extension - Comprehensive Kubernetes-native agent deployment, GitLab CI/CD integration, service mesh integration, and agent-to-agent communication. CRITICAL for GitLab adoption.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "apiVersion": {
          "type": "string",
          "default": "kagent.dev/v1alpha1",
          "description": "kagent CRD API version"
        },
        "agent": {
          "type": "object",
          "description": "Agent CRD configuration",
          "properties": {
            "name": {
              "type": "string",
              "description": "Agent resource name (DNS-1123 subdomain)"
            },
            "namespace": {
              "type": "string",
              "default": "kagent-system",
              "description": "Namespace for agent deployment"
            },
            "model": {
              "type": "object",
              "description": "Model configuration (mapped from spec.llm)",
              "properties": {
                "provider": {
                  "type": "string",
                  "enum": [
                    "openai",
                    "anthropic",
                    "azure",
                    "ollama",
                    "litellm",
                    "custom"
                  ],
                  "description": "LLM provider"
                },
                "name": {
                  "type": "string",
                  "description": "Model name"
                },
                "apiKeySecretRef": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "key": {
                      "type": "string"
                    }
                  }
                },
                "endpoint": {
                  "type": "string",
                  "description": "Custom API endpoint"
                }
              }
            },
            "systemPrompt": {
              "type": "string",
              "description": "System prompt (mapped from spec.role or spec.prompts)"
            },
            "tools": {
              "type": "array",
              "description": "Tool references (mapped from spec.tools)",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "toolRef": {
                    "type": "object",
                    "properties": {
                      "kind": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      }
                    }
                  },
                  "mcpServer": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "namespace": {
                        "type": "string"
                      },
                      "tools": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "mcpServers": {
          "type": "array",
          "description": "MCP server deployments (mapped from spec.tools where type=mcp)",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "image": {
                "type": "string"
              },
              "command": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "env": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "value": {
                      "type": "string"
                    },
                    "valueFrom": {
                      "type": "object",
                      "properties": {
                        "secretKeyRef": {
                          "type": "object",
                          "properties": {
                            "name": {
                              "type": "string"
                            },
                            "key": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "resources": {
                "type": "object",
                "properties": {
                  "requests": {
                    "type": "object",
                    "properties": {
                      "cpu": {
                        "type": "string"
                      },
                      "memory": {
                        "type": "string"
                      }
                    }
                  },
                  "limits": {
                    "type": "object",
                    "properties": {
                      "cpu": {
                        "type": "string"
                      },
                      "memory": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "required": [
              "name",
              "image"
            ]
          }
        },
        "toolServer": {
          "type": "object",
          "description": "Custom tool server configuration",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "image": {
              "type": "string"
            },
            "port": {
              "type": "integer",
              "default": 8080
            },
            "protocol": {
              "type": "string",
              "enum": [
                "http",
                "grpc",
                "mcp"
              ]
            }
          }
        },
        "memory": {
          "type": "object",
          "description": "Memory/state management configuration (mapped from spec.state)",
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "in-memory",
                "redis",
                "postgresql",
                "qdrant",
                "pinecone",
                "custom"
              ]
            },
            "connectionSecretRef": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "key": {
                  "type": "string"
                }
              }
            },
            "ttlSeconds": {
              "type": "integer"
            },
            "maxMessages": {
              "type": "integer"
            }
          }
        },
        "team": {
          "type": "object",
          "description": "Multi-agent team configuration",
          "properties": {
            "name": {
              "type": "string"
            },
            "participants": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "agentRef": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "namespace": {
                        "type": "string"
                      }
                    }
                  },
                  "role": {
                    "type": "string"
                  }
                }
              }
            },
            "terminationCondition": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "MaxMessages",
                    "TextMention",
                    "External"
                  ]
                },
                "maxMessages": {
                  "type": "integer"
                },
                "text": {
                  "type": "string"
                }
              }
            },
            "selector": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "RoundRobin",
                    "Random",
                    "Selector"
                  ]
                },
                "selectorRef": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "scaling": {
          "type": "object",
          "description": "Auto-scaling configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minReplicas": {
              "type": "integer",
              "default": 1
            },
            "maxReplicas": {
              "type": "integer",
              "default": 10
            },
            "metrics": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "cpu",
                      "memory",
                      "custom"
                    ]
                  },
                  "averageUtilization": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "observability": {
          "type": "object",
          "description": "Observability configuration (mapped from spec.observability)",
          "properties": {
            "logging": {
              "type": "object",
              "properties": {
                "level": {
                  "type": "string",
                  "enum": [
                    "debug",
                    "info",
                    "warn",
                    "error"
                  ]
                },
                "format": {
                  "type": "string",
                  "enum": [
                    "json",
                    "text"
                  ]
                }
              }
            },
            "metrics": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "port": {
                  "type": "integer",
                  "default": 9090
                },
                "path": {
                  "type": "string",
                  "default": "/metrics"
                }
              }
            },
            "tracing": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "endpoint": {
                  "type": "string"
                },
                "samplingRate": {
                  "type": "number"
                }
              }
            }
          }
        },
        "deployment": {
          "type": "object",
          "description": "Deployment overrides",
          "properties": {
            "annotations": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "labels": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "nodeSelector": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "tolerations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "key": {
                    "type": "string"
                  },
                  "operator": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  },
                  "effect": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      },
      "additionalProperties": true
    },
    "CompletionSignal": {
      "type": "string",
      "enum": [
        "continue",
        "complete",
        "blocked",
        "escalate",
        "checkpoint"
      ],
      "description": "Standardized agent completion status",
      "examples": [
        "complete",
        "continue",
        "blocked"
      ]
    },
    "CompletionMetadata": {
      "type": "object",
      "description": "Metadata associated with completion signal",
      "properties": {
        "signal": {
          "$ref": "#/definitions/CompletionSignal"
        },
        "iteration_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of reasoning iterations completed"
        },
        "tokens_used": {
          "type": "integer",
          "minimum": 0,
          "description": "Total tokens consumed"
        },
        "cost_usd": {
          "type": "number",
          "minimum": 0,
          "description": "Total cost in USD"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Confidence in completion (0-1)"
        },
        "next_action": {
          "type": "string",
          "description": "Suggested next action"
        },
        "artifacts": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "type",
              "uri"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "file",
                  "url",
                  "data",
                  "checkpoint"
                ]
              },
              "uri": {
                "type": "string",
                "format": "uri"
              },
              "checksum": {
                "type": "string",
                "description": "Content checksum for integrity verification"
              },
              "mime_type": {
                "type": "string"
              },
              "size_bytes": {
                "type": "integer"
              }
            }
          }
        },
        "error": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string"
            },
            "message": {
              "type": "string"
            },
            "recoverable": {
              "type": "boolean",
              "default": false
            }
          }
        }
      },
      "required": [
        "signal"
      ]
    },
    "CompletionSignalConfiguration": {
      "type": "object",
      "description": "Agent completion signal configuration",
      "properties": {
        "default_signal": {
          "$ref": "#/definitions/CompletionSignal",
          "default": "complete"
        },
        "signals": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "signal"
            ],
            "properties": {
              "signal": {
                "$ref": "#/definitions/CompletionSignal"
              },
              "condition": {
                "type": "string",
                "description": "Condition expression for signal (e.g., 'iteration_count < max_iterations')"
              },
              "priority": {
                "type": "integer",
                "description": "Signal priority (higher = evaluated first)"
              }
            }
          }
        },
        "max_iterations": {
          "type": "integer",
          "default": 10,
          "description": "Maximum iterations before forced completion"
        },
        "timeout_seconds": {
          "type": "integer",
          "description": "Maximum execution time before timeout signal"
        }
      }
    },
    "AgentCheckpoint": {
      "type": "object",
      "required": [
        "session_id",
        "agent_id",
        "state_version",
        "created_at"
      ],
      "properties": {
        "session_id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique session identifier"
        },
        "agent_id": {
          "type": "string",
          "pattern": "^@[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "description": "Agent identifier (e.g., @mr-reviewer)"
        },
        "state_version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "OSSA version this checkpoint targets",
          "examples": [
            "0.3.5"
          ]
        },
        "messages": {
          "type": "array",
          "description": "Conversation history",
          "items": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "iteration_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of reasoning iterations"
        },
        "custom_state": {
          "type": "object",
          "additionalProperties": true,
          "description": "Agent-specific state"
        },
        "checkpoint_metadata": {
          "type": "object",
          "properties": {
            "created_at": {
              "type": "string",
              "format": "date-time"
            },
            "expires_at": {
              "type": "string",
              "format": "date-time"
            },
            "storage_location": {
              "type": "string",
              "format": "uri"
            },
            "checksum": {
              "type": "string",
              "description": "State integrity checksum"
            },
            "size_bytes": {
              "type": "integer"
            }
          },
          "required": [
            "created_at",
            "storage_location"
          ]
        }
      }
    },
    "CheckpointConfiguration": {
      "type": "object",
      "description": "Checkpoint configuration for agent",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "interval": {
          "type": "string",
          "enum": [
            "iteration",
            "time",
            "manual"
          ],
          "default": "iteration",
          "description": "Checkpoint trigger type"
        },
        "interval_value": {
          "type": "integer",
          "description": "Checkpoint every N iterations or seconds",
          "default": 5
        },
        "retention": {
          "type": "object",
          "properties": {
            "days": {
              "type": "integer",
              "default": 30,
              "minimum": 1,
              "maximum": 365
            },
            "max_checkpoints": {
              "type": "integer",
              "default": 100,
              "minimum": 1
            }
          }
        },
        "storage": {
          "type": "object",
          "properties": {
            "backend": {
              "type": "string",
              "enum": [
                "agent-brain",
                "s3",
                "local"
              ],
              "default": "agent-brain"
            },
            "location": {
              "type": "string",
              "format": "uri",
              "description": "Storage location pattern (e.g., s3://checkpoints/{agent_id}/{session_id})"
            }
          },
          "required": [
            "backend"
          ]
        }
      }
    },
    "ExpertModel": {
      "type": "object",
      "required": [
        "id",
        "model"
      ],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "description": "Unique expert identifier",
          "examples": [
            "reasoning-expert",
            "code-expert",
            "speed-expert"
          ]
        },
        "name": {
          "type": "string",
          "description": "Human-readable expert name"
        },
        "model": {
          "type": "object",
          "required": [
            "provider",
            "model"
          ],
          "properties": {
            "provider": {
              "type": "string",
              "enum": [
                "anthropic",
                "openai",
                "google",
                "aws",
                "azure",
                "local"
              ],
              "examples": [
                "anthropic",
                "openai"
              ]
            },
            "model": {
              "type": "string",
              "examples": [
                "claude-opus-4-5-20251101",
                "gpt-4-turbo",
                "gemini-2.0-flash"
              ]
            },
            "api_key_env": {
              "type": "string",
              "description": "Environment variable for API key"
            }
          }
        },
        "specializations": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Expert specialization areas",
          "examples": [
            [
              "complex_reasoning",
              "planning"
            ],
            [
              "code_generation",
              "code_review"
            ]
          ]
        },
        "cost_tier": {
          "type": "string",
          "enum": [
            "economy",
            "standard",
            "premium"
          ],
          "description": "Cost tier classification"
        },
        "capabilities": {
          "type": "object",
          "properties": {
            "extended_thinking": {
              "type": "boolean",
              "description": "Supports extended thinking/reasoning"
            },
            "max_tokens": {
              "type": "integer",
              "description": "Maximum context window"
            },
            "reasoning_depth": {
              "type": "string",
              "enum": [
                "fast",
                "balanced",
                "deep"
              ],
              "description": "Reasoning depth capability"
            },
            "multimodal": {
              "type": "boolean",
              "description": "Supports multimodal inputs"
            },
            "streaming": {
              "type": "boolean",
              "description": "Supports streaming responses"
            }
          }
        },
        "availability": {
          "type": "object",
          "properties": {
            "regions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": [
                [
                  "us-east-1",
                  "eu-west-1"
                ]
              ]
            },
            "fallback": {
              "type": "string",
              "description": "Fallback expert ID if unavailable"
            },
            "sla": {
              "type": "object",
              "properties": {
                "uptime": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                "latency_p95_ms": {
                  "type": "integer"
                }
              }
            }
          }
        }
      }
    },
    "ExpertSelectionStrategy": {
      "type": "string",
      "enum": [
        "agent_controlled",
        "cost_optimized",
        "capability_match",
        "hybrid"
      ],
      "default": "agent_controlled",
      "description": "How experts are selected"
    },
    "MoEExtension": {
      "type": "object",
      "properties": {
        "registry": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ExpertModel"
          },
          "description": "Available expert models"
        },
        "selection_strategy": {
          "$ref": "#/definitions/ExpertSelectionStrategy"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "enum": [
                  "list_experts",
                  "invoke_expert",
                  "get_expert_history"
                ]
              },
              "description": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "additionalProperties": true
              }
            },
            "required": [
              "name",
              "description"
            ]
          }
        }
      },
      "required": [
        "registry",
        "selection_strategy"
      ]
    },
    "BATDimension": {
      "type": "object",
      "required": [
        "dimension",
        "options"
      ],
      "properties": {
        "dimension": {
          "type": "string",
          "examples": [
            "reasoning_depth",
            "multimodal",
            "cost_sensitivity",
            "latency",
            "throughput"
          ]
        },
        "required": {
          "type": "boolean",
          "default": true
        },
        "options": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "value"
            ],
            "properties": {
              "value": {
                "type": "string"
              },
              "technologies": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Compatible technologies"
              },
              "cost_tier": {
                "type": "string",
                "enum": [
                  "economy",
                  "standard",
                  "premium"
                ]
              },
              "constraints": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        }
      }
    },
    "BATDecisionProcess": {
      "type": "object",
      "properties": {
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "step",
              "description"
            ],
            "properties": {
              "step": {
                "type": "string",
                "examples": [
                  "evaluate_requirements",
                  "compare_technologies",
                  "select_best_fit",
                  "document_rationale"
                ]
              },
              "description": {
                "type": "string"
              },
              "automated": {
                "type": "boolean",
                "default": false
              }
            }
          }
        }
      }
    },
    "BATFramework": {
      "type": "object",
      "properties": {
        "selection_criteria": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BATDimension"
          }
        },
        "decision_process": {
          "$ref": "#/definitions/BATDecisionProcess"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "enum": [
                  "select_technology",
                  "evaluate_requirements",
                  "compare_technologies"
                ]
              },
              "description": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        }
      },
      "required": [
        "selection_criteria"
      ]
    },
    "MetricDefinition": {
      "type": "object",
      "required": [
        "metric",
        "target"
      ],
      "properties": {
        "metric": {
          "type": "string",
          "description": "Metric identifier",
          "examples": [
            "review_accuracy",
            "review_latency_p95",
            "user_satisfaction",
            "uptime",
            "cost_per_review"
          ]
        },
        "description": {
          "type": "string"
        },
        "target": {
          "oneOf": [
            {
              "type": "number"
            },
            {
              "type": "string"
            }
          ],
          "description": "Target value for metric"
        },
        "unit": {
          "type": "string",
          "examples": [
            "ratio",
            "seconds",
            "rating",
            "usd",
            "percentage"
          ]
        },
        "scale": {
          "type": "array",
          "items": {
            "type": "number"
          },
          "description": "Value scale (e.g., [1, 5] for ratings)"
        },
        "measurement": {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "ratio",
                "average",
                "percentile",
                "count",
                "sum"
              ]
            },
            "numerator": {
              "type": "string",
              "description": "Field name for numerator (for ratio type)"
            },
            "denominator": {
              "type": "string",
              "description": "Field name for denominator (for ratio type)"
            },
            "field": {
              "type": "string",
              "description": "Field name to measure"
            },
            "value": {
              "type": "integer",
              "description": "Percentile value (e.g., 95 for p95)"
            },
            "source": {
              "type": "string",
              "description": "Data source (e.g., agent-tracer, feedback_ratings)"
            }
          }
        },
        "collection": {
          "type": "object",
          "properties": {
            "source": {
              "type": "string",
              "enum": [
                "agent-tracer",
                "gitlab_observability",
                "custom"
              ]
            },
            "interval": {
              "type": "string",
              "enum": [
                "real_time",
                "1s",
                "10s",
                "60s",
                "5m",
                "1h"
              ],
              "default": "60s"
            }
          }
        }
      }
    },
    "MOEConfiguration": {
      "type": "object",
      "properties": {
        "primary": {
          "$ref": "#/definitions/MetricDefinition",
          "description": "Primary effectiveness metric"
        },
        "secondary": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricDefinition"
          },
          "description": "Secondary supporting metrics"
        },
        "operational": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricDefinition"
          },
          "description": "Operational health metrics"
        },
        "tracking": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "collection_interval": {
              "type": "string",
              "default": "60s"
            },
            "retention_days": {
              "type": "integer",
              "default": 90
            },
            "dashboards": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": [
                [
                  "gitlab_observability",
                  "agent_studio_ui"
                ]
              ]
            },
            "alerts": {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "condition"
                ],
                "properties": {
                  "condition": {
                    "type": "string",
                    "description": "Alert condition expression (e.g., 'primary_metric < target * 0.9')"
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "info",
                      "warning",
                      "critical"
                    ]
                  },
                  "notification": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "examples": [
                      [
                        "slack",
                        "email",
                        "pagerduty"
                      ]
                    ]
                  }
                }
              }
            }
          }
        }
      },
      "required": [
        "primary"
      ]
    },
    "FlowState": {
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
        },
        "description": {
          "type": "string"
        },
        "entry_action": {
          "type": "string",
          "description": "Action to execute on state entry"
        },
        "exit_action": {
          "type": "string",
          "description": "Action to execute on state exit"
        }
      }
    },
    "FlowTransition": {
      "type": "object",
      "required": [
        "from",
        "to",
        "trigger"
      ],
      "properties": {
        "from": {
          "type": "string",
          "description": "Source state name"
        },
        "to": {
          "type": "string",
          "description": "Target state name"
        },
        "trigger": {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "webhook",
                "agent_signal",
                "timer",
                "condition"
              ]
            },
            "event": {
              "type": "string",
              "description": "Event name (for webhook/agent_signal)"
            },
            "agent": {
              "type": "string",
              "description": "Agent ID (for agent_signal)"
            },
            "signal": {
              "type": "string",
              "enum": [
                "continue",
                "complete",
                "blocked",
                "escalate",
                "checkpoint"
              ]
            },
            "interval": {
              "type": "string",
              "description": "Timer interval (for timer type)"
            },
            "condition_expression": {
              "type": "string",
              "description": "Condition expression (for condition type)"
            }
          }
        },
        "condition": {
          "type": "string",
          "description": "Optional condition expression"
        }
      }
    },
    "FlowEvent": {
      "type": "object",
      "required": [
        "name",
        "type"
      ],
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "webhook",
            "agent_signal",
            "timer",
            "custom"
          ]
        },
        "source": {
          "type": "string",
          "description": "Event source (e.g., gitlab, @mr-reviewer)"
        },
        "handler": {
          "type": "string",
          "description": "Handler service (e.g., agent-mesh)"
        },
        "schema": {
          "type": "object",
          "additionalProperties": true,
          "description": "Event payload schema"
        }
      }
    },
    "FlowNode": {
      "type": "object",
      "required": [
        "id",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "webhook",
            "agent",
            "task",
            "condition",
            "aggregator"
          ]
        },
        "agent_id": {
          "type": "string",
          "description": "Agent ID (for agent type)"
        },
        "task_id": {
          "type": "string",
          "description": "Task ID (for task type)"
        },
        "config": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "FlowEdge": {
      "type": "object",
      "required": [
        "from",
        "to"
      ],
      "properties": {
        "from": {
          "type": "string",
          "description": "Source node ID"
        },
        "to": {
          "type": "string",
          "description": "Target node ID"
        },
        "condition": {
          "type": "string",
          "description": "Edge condition expression"
        },
        "weight": {
          "type": "integer",
          "description": "Edge weight for routing"
        }
      }
    },
    "FlowAdaptor": {
      "type": "object",
      "properties": {
        "langgraph": {
          "type": "object",
          "properties": {
            "export": {
              "type": "boolean"
            },
            "state_schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        },
        "temporal": {
          "type": "object",
          "properties": {
            "export": {
              "type": "boolean"
            },
            "workflow_id": {
              "type": "string"
            }
          }
        },
        "n8n": {
          "type": "object",
          "properties": {
            "export": {
              "type": "boolean"
            },
            "format": {
              "type": "string",
              "enum": [
                "json",
                "yaml"
              ]
            }
          }
        }
      }
    },
    "FlowSpec": {
      "type": "object",
      "required": [
        "flow_schema",
        "transitions"
      ],
      "properties": {
        "flow_schema": {
          "type": "object",
          "required": [
            "initial_state",
            "states"
          ],
          "properties": {
            "initial_state": {
              "type": "string"
            },
            "states": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/FlowState"
              }
            }
          }
        },
        "transitions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FlowTransition"
          }
        },
        "flow_events": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FlowEvent"
          }
        },
        "nodes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FlowNode"
          }
        },
        "edges": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FlowEdge"
          }
        },
        "adaptors": {
          "$ref": "#/definitions/FlowAdaptor"
        }
      }
    },
    "CapabilityDiscovery": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "registry": {
          "type": "string",
          "enum": [
            "agent-mesh",
            "mcp-registry",
            "local"
          ],
          "default": "agent-mesh"
        },
        "refresh_interval": {
          "type": "string",
          "default": "60s",
          "description": "How often to refresh capability list"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "enum": [
                  "list_capabilities",
                  "register_capability",
                  "get_capability_details"
                ]
              },
              "description": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        }
      }
    },
    "AgentContext": {
      "type": "object",
      "properties": {
        "session": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "format": "uuid"
            },
            "started_at": {
              "type": "string",
              "format": "date-time"
            },
            "iteration_count": {
              "type": "integer"
            }
          }
        },
        "available_capabilities": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Capability"
          }
        },
        "recent_activity": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "action": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "result": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "FeedbackRating": {
      "type": "string",
      "enum": [
        "positive",
        "negative",
        "neutral"
      ]
    },
    "FeedbackRecord": {
      "type": "object",
      "required": [
        "action_id",
        "rating"
      ],
      "properties": {
        "action_id": {
          "type": "string",
          "format": "uuid"
        },
        "rating": {
          "$ref": "#/definitions/FeedbackRating"
        },
        "context": {
          "type": "string",
          "description": "Feedback context"
        },
        "suggestions": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "FeedbackSummary": {
      "type": "object",
      "properties": {
        "time_window": {
          "type": "string",
          "enum": [
            "1h",
            "24h",
            "7d",
            "30d"
          ]
        },
        "group_by": {
          "type": "string",
          "enum": [
            "expert",
            "tool",
            "task_type",
            "agent"
          ]
        },
        "metrics": {
          "type": "object",
          "properties": {
            "total_feedback": {
              "type": "integer"
            },
            "positive_count": {
              "type": "integer"
            },
            "negative_count": {
              "type": "integer"
            },
            "neutral_count": {
              "type": "integer"
            },
            "satisfaction_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        }
      }
    },
    "LearningStrategy": {
      "type": "string",
      "enum": [
        "reinforcement",
        "supervised",
        "unsupervised"
      ],
      "default": "reinforcement"
    },
    "FeedbackExtension": {
      "type": "object",
      "properties": {
        "tools": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "enum": [
                  "record_feedback",
                  "get_feedback_summary",
                  "suggest_improvements"
                ]
              },
              "description": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "learning": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "strategy": {
              "$ref": "#/definitions/LearningStrategy"
            },
            "data_sources": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": [
                [
                  "feedback_ratings",
                  "completion_signals",
                  "expert_selection_outcomes"
                ]
              ]
            },
            "model_fine_tuning": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "schedule": {
                  "type": "string",
                  "enum": [
                    "daily",
                    "weekly",
                    "monthly"
                  ]
                },
                "target_model": {
                  "type": "string",
                  "examples": [
                    "models/orchestration",
                    "models/agentdev"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "InfrastructureSubstrate": {
      "type": "object",
      "required": [
        "type",
        "hostname"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "synology_nas",
            "vast_ai",
            "cloudflare_workers",
            "kubernetes",
            "docker",
            "local"
          ],
          "examples": [
            "synology_nas",
            "vast_ai"
          ]
        },
        "hostname": {
          "type": "string",
          "format": "hostname",
          "examples": [
            "blueflynas.tailcf98b3.ts.net",
            "vastai-gpu.tailcf98b3.ts.net"
          ]
        },
        "ip": {
          "type": "string",
          "format": "ipv4"
        },
        "capabilities": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "examples": [
            [
              "store_artifact",
              "retrieve_artifact",
              "manage_checkpoints",
              "vector_search",
              "llm_inference"
            ]
          ]
        },
        "services": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "name",
              "type",
              "port"
            ],
            "properties": {
              "name": {
                "type": "string",
                "examples": [
                  "MinIO",
                  "PostgreSQL",
                  "Qdrant",
                  "Redis",
                  "Ollama"
                ]
              },
              "type": {
                "type": "string",
                "enum": [
                  "s3_compatible",
                  "database",
                  "vector_db",
                  "cache",
                  "llm",
                  "api"
                ]
              },
              "port": {
                "type": "integer"
              },
              "endpoint": {
                "type": "string",
                "format": "uri"
              },
              "health_check": {
                "type": "string",
                "format": "uri"
              }
            }
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "storage": {
              "type": "object",
              "properties": {
                "total_gb": {
                  "type": "integer"
                },
                "available_gb": {
                  "type": "integer"
                }
              }
            },
            "memory": {
              "type": "object",
              "properties": {
                "total_gb": {
                  "type": "integer"
                },
                "available_gb": {
                  "type": "integer"
                }
              }
            },
            "cpu": {
              "type": "object",
              "properties": {
                "cores": {
                  "type": "integer"
                },
                "utilization_percent": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                }
              }
            },
            "gpu": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "examples": [
                    "RTX 4090",
                    "A100",
                    "H100"
                  ]
                },
                "count": {
                  "type": "integer"
                },
                "memory_gb": {
                  "type": "integer"
                }
              }
            }
          }
        },
        "lifecycle": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "always_on",
                "on_demand",
                "scheduled"
              ],
              "default": "always_on"
            },
            "auto_scale": {
              "type": "boolean",
              "default": false
            },
            "scale_policy": {
              "type": "object",
              "properties": {
                "min_instances": {
                  "type": "integer"
                },
                "max_instances": {
                  "type": "integer"
                },
                "target_utilization": {
                  "type": "number"
                }
              }
            },
            "cost_cap": {
              "type": "object",
              "properties": {
                "monthly_usd": {
                  "type": "number"
                },
                "alert_threshold": {
                  "type": "number",
                  "default": 0.8
                }
              }
            }
          }
        },
        "access": {
          "type": "object",
          "properties": {
            "tier": {
              "type": "string",
              "enum": [
                "tier_1_read",
                "tier_2_write_limited",
                "tier_3_write_elevated",
                "tier_4_policy"
              ]
            },
            "agents_allowed": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^@[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
              }
            },
            "networks": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": [
                [
                  "tailscale",
                  "cloudflare"
                ]
              ]
            }
          }
        }
      }
    },
    "Extensions": {
      "type": "object",
      "description": "Framework-specific extensions",
      "properties": {
        "completion": {
          "$ref": "#/definitions/CompletionSignalConfiguration"
        },
        "checkpointing": {
          "$ref": "#/definitions/CheckpointConfiguration"
        },
        "experts": {
          "$ref": "#/definitions/MoEExtension"
        },
        "bat": {
          "$ref": "#/definitions/BATFramework"
        },
        "moe": {
          "$ref": "#/definitions/MOEConfiguration"
        },
        "spec": {
          "$ref": "#/definitions/FlowSpec"
        },
        "capabilities": {
          "$ref": "#/definitions/CapabilityDiscovery"
        },
        "context": {
          "$ref": "#/definitions/AgentContext"
        },
        "feedback": {
          "$ref": "#/definitions/FeedbackExtension"
        },
        "infrastructure": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/InfrastructureSubstrate"
          }
        },
        "knowledge_sources": {
          "type": "array",
          "description": "Optional knowledge sources for RAG and context retrieval",
          "items": {
            "$ref": "#/definitions/KnowledgeSource"
          }
        },
        "mandatory_knowledge_sources": {
          "type": "array",
          "description": "Platform-enforced knowledge sources that ALL agents must use. These are automatically injected by the runtime and cannot be disabled.",
          "items": {
            "$ref": "#/definitions/MandatoryKnowledgeSource"
          },
          "default": []
        },
        "code_compliance": {
          "$ref": "#/definitions/CodeCompliance",
          "description": "Code quality and best practices enforcement configuration. Defines which knowledge bases must be queried when working with specific code types."
        }
      },
      "additionalProperties": true
    },
    "KnowledgeSource": {
      "type": "object",
      "description": "Knowledge source configuration for RAG and context retrieval",
      "required": ["name", "provider"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Unique identifier for this knowledge source"
        },
        "provider": {
          "type": "string",
          "enum": [
            "qdrant",
            "pinecone",
            "weaviate",
            "airweave",
            "langchain",
            "llamaindex",
            "custom"
          ],
          "description": "Knowledge source provider"
        },
        "config": {
          "type": "object",
          "description": "Provider-specific configuration",
          "additionalProperties": true
        },
        "auth": {
          "type": "object",
          "description": "Authentication configuration",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["bearer", "api_key", "oauth", "none"]
            },
            "token_env": {
              "type": "string",
              "description": "Environment variable name for token"
            }
          },
          "additionalProperties": true
        },
        "search": {
          "type": "object",
          "description": "Search configuration",
          "properties": {
            "default_strategy": {
              "type": "string",
              "enum": ["semantic", "hybrid", "neural", "keyword"]
            },
            "top_k": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            },
            "min_score": {
              "type": "number",
              "default": 0.7,
              "minimum": 0,
              "maximum": 1
            },
            "rerank": {
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": true
        },
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether this knowledge source is enabled"
        }
      },
      "additionalProperties": true
    },
    "KnowledgeGraphEfficiency": {
      "type": "object",
      "description": "Knowledge graph efficiency configuration (v0.3.6+). Achieves 98% token reduction through structured code indexing.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable knowledge graph for codebase understanding"
        },
        "provider": {
          "type": "string",
          "enum": [
            "gitlab",
            "github",
            "local",
            "custom"
          ],
          "description": "Knowledge graph provider (vendor-neutral)"
        },
        "mcp_server": {
          "type": "string",
          "description": "MCP server name for knowledge graph access (e.g., 'gitlab-kg')"
        },
        "index_types": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "files",
              "classes",
              "functions",
              "dependencies",
              "relationships"
            ]
          },
          "description": "Types of entities to index"
        },
        "query_capabilities": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "semantic_search",
              "dependency_traversal",
              "code_navigation"
            ]
          },
          "description": "Available query capabilities"
        },
        "max_context_tokens": {
          "type": "integer",
          "default": 10000,
          "description": "Maximum tokens for knowledge graph context (vs 500k+ full codebase)"
        },
        "indexing_strategy": {
          "type": "string",
          "enum": [
            "full",
            "selective",
            "on_demand"
          ],
          "default": "selective",
          "description": "Indexing strategy: full (entire codebase), selective (changed files), on_demand (query-driven)"
        },
        "cache_ttl": {
          "type": "integer",
          "default": 3600,
          "description": "Cache TTL in seconds for graph queries"
        },
        "estimated_savings": {
          "type": "object",
          "description": "Estimated token savings vs raw file inclusion",
          "properties": {
            "percentage": {
              "type": "number",
              "default": 98,
              "description": "Percentage token reduction (default: 98%)"
            },
            "baseline_tokens": {
              "type": "integer",
              "description": "Baseline tokens for full codebase"
            },
            "optimized_tokens": {
              "type": "integer",
              "description": "Optimized tokens with knowledge graph"
            }
          }
        }
      },
      "additionalProperties": false
    },
    "MandatoryKnowledgeSource": {
      "type": "object",
      "description": "Platform-enforced knowledge source that cannot be disabled",
      "required": ["source_id", "enforcement_level"],
      "properties": {
        "source_id": {
          "type": "string",
          "description": "Identifier for the mandatory knowledge source (e.g., 'react-best-practices', 'typescript-standards')",
          "pattern": "^[a-z][a-z0-9-]*$"
        },
        "enforcement_level": {
          "type": "string",
          "enum": ["query", "validate", "block"],
          "description": "Enforcement level: query (must query before coding), validate (validate after coding), block (block on violations)"
        },
        "triggers": {
          "type": "array",
          "description": "File patterns that trigger this knowledge source",
          "items": {
            "type": "string",
            "description": "Glob pattern (e.g., '**/*.tsx', '**/*.jsx')"
          },
          "minItems": 1
        },
        "query_conditions": {
          "type": "object",
          "description": "Conditions for when to query this knowledge source",
          "properties": {
            "before_write": {
              "type": "boolean",
              "default": true,
              "description": "Query before writing code"
            },
            "before_review": {
              "type": "boolean",
              "default": true,
              "description": "Query before code review"
            },
            "on_optimization": {
              "type": "boolean",
              "default": true,
              "description": "Query when optimizing code"
            }
          },
          "additionalProperties": false
        },
        "validation_rules": {
          "type": "object",
          "description": "Validation rules for this knowledge source",
          "properties": {
            "require_references": {
              "type": "boolean",
              "default": true,
              "description": "Require rule references in code comments"
            },
            "block_on_critical": {
              "type": "boolean",
              "default": true,
              "description": "Block commits/merges on CRITICAL rule violations"
            },
            "warn_on_high": {
              "type": "boolean",
              "default": true,
              "description": "Warn on HIGH impact rule violations"
            },
            "min_coverage": {
              "type": "number",
              "default": 0.8,
              "minimum": 0,
              "maximum": 1,
              "description": "Minimum rule reference coverage (0-1)"
            }
          },
          "additionalProperties": false
        },
        "tool_injection": {
          "type": "object",
          "description": "Tool injection configuration",
          "properties": {
            "tool_name": {
              "type": "string",
              "description": "Name of tool to inject (e.g., 'query_react_best_practices')"
            },
            "mcp_server": {
              "type": "string",
              "description": "MCP server that provides this tool"
            },
            "auto_inject": {
              "type": "boolean",
              "default": true,
              "description": "Automatically inject tool into agent"
            }
          },
          "additionalProperties": false
        },
        "tracking": {
          "type": "object",
          "description": "Tracking configuration",
          "properties": {
            "track_queries": {
              "type": "boolean",
              "default": true
            },
            "track_applications": {
              "type": "boolean",
              "default": true
            },
            "track_violations": {
              "type": "boolean",
              "default": true
            },
            "store_in_graph": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "CodeCompliance": {
      "type": "object",
      "description": "Code quality and best practices enforcement configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable code compliance enforcement"
        },
        "mandatory_sources": {
          "type": "array",
          "description": "Mandatory knowledge sources for code compliance",
          "items": {
            "$ref": "#/definitions/MandatoryKnowledgeSource"
          }
        },
        "enforcement_hooks": {
          "type": "object",
          "description": "Enforcement hooks at different stages",
          "properties": {
            "pre_write": {
              "type": "object",
              "description": "Hook before writing code",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "action": {
                  "type": "string",
                  "enum": ["query", "warn", "block"],
                  "default": "query"
                }
              },
              "additionalProperties": false
            },
            "pre_commit": {
              "type": "object",
              "description": "Hook before commit",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "action": {
                  "type": "string",
                  "enum": ["validate", "warn", "block"],
                  "default": "block"
                },
                "check_critical": {
                  "type": "boolean",
                  "default": true
                },
                "check_references": {
                  "type": "boolean",
                  "default": true
                }
              },
              "additionalProperties": false
            },
            "pre_merge": {
              "type": "object",
              "description": "Hook before merge",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "action": {
                  "type": "string",
                  "enum": ["validate", "warn", "block"],
                  "default": "block"
                },
                "require_approval": {
                  "type": "boolean",
                  "default": true
                }
              },
              "additionalProperties": false
            },
            "build": {
              "type": "object",
              "description": "Build-time validation",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "fail_on_violations": {
                  "type": "boolean",
                  "default": true
                },
                "generate_report": {
                  "type": "boolean",
                  "default": true
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "tracking": {
          "type": "object",
          "description": "Tracking and analytics configuration",
          "properties": {
            "track_queries": {
              "type": "boolean",
              "default": true,
              "description": "Track all knowledge base queries"
            },
            "track_applications": {
              "type": "boolean",
              "default": true,
              "description": "Track rule applications"
            },
            "track_violations": {
              "type": "boolean",
              "default": true,
              "description": "Track rule violations"
            },
            "store_in_graph": {
              "type": "boolean",
              "default": true,
              "description": "Store tracking data in knowledge graph"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  }
}
