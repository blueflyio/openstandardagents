{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://openstandardagents.org/schemas/v0.3.5/feedback-loops.json",
  "title": "OSSA v0.3.5 Feedback & Learning Loops",
  "description": "Feedback mechanisms for continuous agent improvement",
  "type": "object",
  "definitions": {
    "FeedbackRating": {
      "type": "string",
      "enum": ["positive", "negative", "neutral"]
    },
    "FeedbackRecord": {
      "type": "object",
      "required": ["action_id", "rating"],
      "properties": {
        "action_id": {
          "type": "string",
          "format": "uuid"
        },
        "rating": {
          "$ref": "#/definitions/FeedbackRating"
        },
        "context": {
          "type": "string",
          "description": "Feedback context"
        },
        "suggestions": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "FeedbackSummary": {
      "type": "object",
      "properties": {
        "time_window": {
          "type": "string",
          "enum": ["1h", "24h", "7d", "30d"]
        },
        "group_by": {
          "type": "string",
          "enum": ["expert", "tool", "task_type", "agent"]
        },
        "metrics": {
          "type": "object",
          "properties": {
            "total_feedback": {
              "type": "integer"
            },
            "positive_count": {
              "type": "integer"
            },
            "negative_count": {
              "type": "integer"
            },
            "neutral_count": {
              "type": "integer"
            },
            "satisfaction_score": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        }
      }
    },
    "LearningStrategy": {
      "type": "string",
      "enum": ["reinforcement", "supervised", "unsupervised"],
      "default": "reinforcement"
    },
    "FeedbackExtension": {
      "type": "object",
      "properties": {
        "tools": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "enum": ["record_feedback", "get_feedback_summary", "suggest_improvements"]
              },
              "description": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "learning": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "strategy": {
              "$ref": "#/definitions/LearningStrategy"
            },
            "data_sources": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "examples": [["feedback_ratings", "completion_signals", "expert_selection_outcomes"]]
            },
            "model_fine_tuning": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "schedule": {
                  "type": "string",
                  "enum": ["daily", "weekly", "monthly"]
                },
                "target_model": {
                  "type": "string",
                  "examples": ["models/orchestration", "models/agentdev"]
                }
              }
            }
          }
        }
      }
    }
  },
  "properties": {
    "feedback": {
      "$ref": "#/definitions/FeedbackExtension"
    }
  }
}
