ossaVersion: "1.0"

agent:
  # Identity
  id: api-integration-bridge
  name: API Integration Bridge Agent
  version: 1.0.0
  description: |
    Universal API integration agent that connects external services,
    normalizes APIs, and provides unified access layer.
  role: integration
  tags:
    - integration
    - api-bridge
    - normalization
    - connectivity

  # Runtime
  runtime:
    type: docker
    image: ossa/api-bridge:1.0.0
    requirements:
      node: ">=20.0.0"
      packages:
        - axios
        - express
        - swagger-client
    resources:
      cpu: "500m"
      memory: "512Mi"
    health_check:
      type: http
      endpoint: /health
      port: 4000

  # Capabilities
  capabilities:
    - name: connect_external_api
      description: Connect and authenticate to external API
      input_schema:
        type: object
        required:
          - api_url
          - auth_type
        properties:
          api_url:
            type: string
          auth_type:
            type: string
            enum: [none, api_key, oauth2, basic]
          credentials:
            type: object
      output_schema:
        type: object
        properties:
          connection_id:
            type: string
          status:
            type: string

    - name: normalize_api_response
      description: Normalize API responses to standard format
      input_schema:
        type: object
        required:
          - raw_response
          - schema_mapping
        properties:
          raw_response:
            type: object
          schema_mapping:
            type: object
      output_schema:
        type: object
        properties:
          normalized_data:
            type: object

    - name: proxy_api_request
      description: Proxy request to external API with transformation
      input_schema:
        type: object
        required:
          - target_api
          - request
        properties:
          target_api:
            type: string
          request:
            type: object
      output_schema:
        type: object
        properties:
          response:
            type: object
          latency_ms:
            type: number

  # Policies
  policies:
    compliance:
      - soc2-type1
    encryption: true
    audit: false

  # Integration
  integration:
    protocol: http
    endpoints:
      base_url: http://api-bridge:4000
      health: /health
    auth:
      type: api_key

  # Monitoring
  monitoring:
    traces: true
    metrics: true
    logs: true
    health_check: http://localhost:4000/health

  # Metadata
  metadata:
    author: OSSA Integration Team
    license: MIT
    keywords:
      - api
      - integration
      - bridge
