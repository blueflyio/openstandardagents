{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://openstandardagents.org/schemas/v0.3.4/protocols/a2a/capability-advertisement.json",
  "title": "Agent Capability Advertisement",
  "description": "Standard format for agents to advertise their capabilities for discovery and orchestration",
  "type": "object",
  "properties": {
    "advertisement": {
      "$ref": "#/definitions/Advertisement"
    }
  },
  "definitions": {
    "Advertisement": {
      "type": "object",
      "required": ["agent_id", "capabilities"],
      "description": "Agent capability advertisement",
      "properties": {
        "agent_id": {
          "type": "string",
          "format": "uri",
          "pattern": "^agent://[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
          "description": "Unique agent identifier"
        },
        "name": {
          "type": "string",
          "description": "Human-readable agent name"
        },
        "description": {
          "type": "string",
          "description": "Agent description"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9]+)?$",
          "description": "Agent version (semver)"
        },
        "capabilities": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/Capability"
          },
          "description": "List of agent capabilities"
        },
        "specializations": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Domain specializations",
          "examples": [
            ["code_review", "documentation", "testing"],
            ["data_analysis", "visualization", "reporting"]
          ]
        },
        "supported_models": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "LLM models the agent can use"
        },
        "supported_protocols": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["http", "grpc", "websocket", "sse", "mqtt", "amqp"]
          },
          "description": "Supported communication protocols"
        },
        "constraints": {
          "$ref": "#/definitions/Constraints"
        },
        "cost_model": {
          "$ref": "#/definitions/CostModel"
        },
        "performance_profile": {
          "$ref": "#/definitions/PerformanceProfile"
        },
        "compliance": {
          "$ref": "#/definitions/Compliance"
        }
      }
    },
    "Capability": {
      "type": "object",
      "required": ["id", "name", "type"],
      "description": "Individual capability definition",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique capability identifier"
        },
        "name": {
          "type": "string",
          "description": "Capability name"
        },
        "type": {
          "type": "string",
          "enum": [
            "function",
            "tool",
            "skill",
            "knowledge",
            "reasoning",
            "perception",
            "action"
          ],
          "description": "Capability type"
        },
        "description": {
          "type": "string",
          "description": "What this capability does"
        },
        "parameters": {
          "$ref": "#/definitions/Parameters"
        },
        "returns": {
          "$ref": "#/definitions/Returns"
        },
        "examples": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CapabilityExample"
          },
          "description": "Example usage"
        },
        "async": {
          "type": "boolean",
          "default": false,
          "description": "Whether capability is asynchronous"
        },
        "streaming": {
          "type": "boolean",
          "default": false,
          "description": "Whether capability supports streaming responses"
        },
        "idempotent": {
          "type": "boolean",
          "default": false,
          "description": "Whether capability is idempotent"
        },
        "side_effects": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Known side effects"
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Dependencies on other capabilities or services"
        },
        "rate_limits": {
          "$ref": "#/definitions/RateLimits"
        },
        "security_requirements": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["authentication", "authorization", "encryption", "audit"]
          },
          "description": "Security requirements"
        },
        "reliability": {
          "$ref": "#/definitions/Reliability"
        }
      }
    },
    "Parameters": {
      "type": "object",
      "description": "Capability input parameters",
      "properties": {
        "schema": {
          "type": "object",
          "description": "JSON Schema for parameters"
        },
        "required": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Required parameter names"
        },
        "examples": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "description": "Example parameter values"
        }
      }
    },
    "Returns": {
      "type": "object",
      "description": "Capability return value",
      "properties": {
        "schema": {
          "type": "object",
          "description": "JSON Schema for return value"
        },
        "examples": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "description": "Example return values"
        }
      }
    },
    "CapabilityExample": {
      "type": "object",
      "required": ["input", "output"],
      "properties": {
        "description": {
          "type": "string",
          "description": "Example description"
        },
        "input": {
          "type": "object",
          "description": "Example input"
        },
        "output": {
          "type": "object",
          "description": "Example output"
        }
      }
    },
    "RateLimits": {
      "type": "object",
      "description": "Rate limiting for capability",
      "properties": {
        "requests_per_second": {
          "type": "integer",
          "minimum": 1
        },
        "requests_per_minute": {
          "type": "integer",
          "minimum": 1
        },
        "requests_per_hour": {
          "type": "integer",
          "minimum": 1
        },
        "concurrent_limit": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum concurrent executions"
        },
        "burst_limit": {
          "type": "integer",
          "minimum": 1,
          "description": "Burst capacity"
        }
      }
    },
    "Reliability": {
      "type": "object",
      "description": "Reliability metrics for capability",
      "properties": {
        "success_rate": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Historical success rate (0-1)"
        },
        "avg_latency_ms": {
          "type": "number",
          "minimum": 0,
          "description": "Average latency in milliseconds"
        },
        "p95_latency_ms": {
          "type": "number",
          "minimum": 0,
          "description": "95th percentile latency"
        },
        "p99_latency_ms": {
          "type": "number",
          "minimum": 0,
          "description": "99th percentile latency"
        },
        "uptime_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Uptime percentage"
        },
        "error_rate": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Error rate (0-1)"
        }
      }
    },
    "Constraints": {
      "type": "object",
      "description": "Agent operational constraints",
      "properties": {
        "max_concurrent_tasks": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum concurrent tasks"
        },
        "max_context_length": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum context length in tokens"
        },
        "max_execution_time_ms": {
          "type": "integer",
          "minimum": 1000,
          "description": "Maximum execution time per task"
        },
        "supported_languages": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Supported natural languages"
        },
        "geo_restrictions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Geographic restrictions (ISO country codes)"
        },
        "data_residency": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Data residency requirements (regions)"
        }
      }
    },
    "CostModel": {
      "type": "object",
      "description": "Cost structure for agent usage",
      "properties": {
        "pricing_model": {
          "type": "string",
          "enum": ["per_request", "per_token", "per_minute", "per_hour", "subscription", "free"],
          "description": "Pricing model"
        },
        "base_cost": {
          "type": "number",
          "minimum": 0,
          "description": "Base cost in USD"
        },
        "variable_cost": {
          "type": "number",
          "minimum": 0,
          "description": "Variable cost per unit"
        },
        "currency": {
          "type": "string",
          "default": "USD",
          "description": "Currency code"
        },
        "billing_increment": {
          "type": "string",
          "enum": ["second", "minute", "hour", "request", "token", "kb", "mb"],
          "description": "Billing increment unit"
        },
        "estimated_cost_per_task": {
          "type": "number",
          "minimum": 0,
          "description": "Estimated average cost per task"
        }
      }
    },
    "PerformanceProfile": {
      "type": "object",
      "description": "Performance characteristics",
      "properties": {
        "avg_response_time_ms": {
          "type": "number",
          "minimum": 0,
          "description": "Average response time"
        },
        "throughput_per_second": {
          "type": "number",
          "minimum": 0,
          "description": "Requests per second capacity"
        },
        "scalability": {
          "type": "string",
          "enum": ["single_instance", "horizontal", "vertical", "auto_scaling"],
          "description": "Scalability model"
        },
        "warm_up_time_ms": {
          "type": "integer",
          "minimum": 0,
          "description": "Cold start time"
        },
        "memory_footprint_mb": {
          "type": "integer",
          "minimum": 0,
          "description": "Memory footprint"
        }
      }
    },
    "Compliance": {
      "type": "object",
      "description": "Compliance and certification information",
      "properties": {
        "certifications": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Compliance certifications",
          "examples": [
            ["SOC2", "ISO27001", "HIPAA", "GDPR"]
          ]
        },
        "data_classification": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["public", "internal", "confidential", "restricted"]
          },
          "description": "Data classifications agent can handle"
        },
        "audit_logging": {
          "type": "boolean",
          "default": false,
          "description": "Whether audit logging is enabled"
        },
        "encryption_at_rest": {
          "type": "boolean",
          "default": false,
          "description": "Whether data is encrypted at rest"
        },
        "encryption_in_transit": {
          "type": "boolean",
          "default": true,
          "description": "Whether data is encrypted in transit"
        }
      }
    }
  }
}
