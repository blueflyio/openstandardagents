# OSSA v0.3.4 - Capabilities Schema
# Google A2A and GitLab Duo compatible capability declarations

$schema: http://json-schema.org/draft-07/schema#
$id: https://openstandardagents.org/schemas/v0.3.4/capabilities.yaml

title: Agent Capabilities
description: |
  Structured capability declarations compatible with Google A2A and GitLab Duo.
  Maps agent actions to callable functions.

type: array
items:
  type: object
  required:
    - name
    - type
  properties:
    name:
      type: string
      description: Capability identifier
      pattern: ^[a-z][a-z0-9_]*$
      examples:
        - security_scan
        - code_review
        - deploy_service
        - analyze_logs

    type:
      type: string
      description: Capability type
      enum:
        - action
        - query
        - transform
        - validation
        - orchestration
        - testing
        - browser_automation
        - output_evaluation

    runtime:
      type: string
      description: Execution runtime
      enum:
        - llm
        - code
        - hybrid
        - external
      default: llm

    description:
      type: string
      description: Human-readable capability description

    input_schema:
      type: object
      description: JSON Schema for input validation

    output_schema:
      type: object
      description: JSON Schema for output validation

    requires:
      type: array
      description: Required dependencies
      items:
        type: string

    timeout_seconds:
      type: integer
      description: Capability-specific timeout
      default: 60

    retry_policy:
      type: object
      properties:
        max_attempts:
          type: integer
          default: 3
        backoff:
          type: string
          enum: [exponential, linear, constant]

examples:
  - name: security_scan
    type: action
    runtime: hybrid
    description: Run OSSA security analysis on codebase
    input_schema:
      type: object
      required: [path]
      properties:
        path:
          type: string
        severity:
          type: string
          enum: [low, medium, high, critical]
    output_schema:
      type: object
      properties:
        findings:
          type: array
        score:
          type: number
