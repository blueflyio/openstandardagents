# OSSA v0.3.0 - Runtime Declaration Schema
# Multi-runtime compatibility: Google A2A, GitLab Duo, OSSA Mesh, MCP

$schema: http://json-schema.org/draft-07/schema#
$id: https://openstandardagents.org/schemas/v0.3.0/runtime.yaml

title: Agent Runtime Declaration
description: |
  Declares which runtimes this agent supports and how it should be scheduled.
  Enables portability across Google A2A, GitLab Duo, OSSA, and MCP.

type: object
required:
  - type
  - supports
properties:
  type:
    type: string
    description: Runtime type
    default: ${AGENT_RUNTIME:-unified}
    enum:
      - unified
      - google-a2a
      - gitlab-duo
      - ossa-mesh
      - mcp
      - local

  supports:
    type: array
    description: List of compatible runtimes
    items:
      type: string
      enum:
        - google-a2a
        - gitlab-duo
        - ossa-mesh
        - mcp
        - local-execution
        - kubernetes
        - serverless

  scheduling:
    type: object
    description: Scheduling preferences
    properties:
      strategy:
        type: string
        default: ${AGENT_SCHEDULING:-fair}
        enum:
          - fair
          - priority
          - deadline
          - cost-optimized
      priority:
        type: string
        default: ${AGENT_PRIORITY:-normal}
        enum:
          - critical
          - high
          - normal
          - low
          - background
      max_concurrent:
        type: integer
        description: Maximum concurrent executions
        default: ${AGENT_MAX_CONCURRENT:-10}
      timeout_seconds:
        type: integer
        description: Execution timeout
        default: ${AGENT_TIMEOUT:-300}

  resource_limits:
    type: object
    description: Resource constraints
    properties:
      memory_mb:
        type: integer
        default: ${AGENT_MEMORY_MB:-512}
      cpu_millicores:
        type: integer
        default: ${AGENT_CPU_MILLICORES:-500}
      gpu_required:
        type: boolean
        default: false

  extensions:
    type: array
    description: External extensions (A2A compatible)
    items:
      type: object
      required: [type, name]
      properties:
        type:
          type: string
          enum: [http, grpc, mcp, websocket, kafka]
        name:
          type: string
        endpoint:
          type: string
        credentials_ref:
          type: string
