# OSSA v0.3.0 - Functions Schema
# Google A2A compatible function declarations (OpenAI function calling format)

$schema: http://json-schema.org/draft-07/schema#
$id: https://openstandardagents.org/schemas/v0.3.0/functions.yaml

title: Agent Functions
description: |
  Function declarations in Google A2A / OpenAI format.
  Enables structured function calling across all runtimes.

type: array
items:
  type: object
  required:
    - name
    - description
    - parameters
  properties:
    name:
      type: string
      description: Function name
      pattern: ^[a-zA-Z_][a-zA-Z0-9_]*$

    description:
      type: string
      description: What the function does

    parameters:
      type: object
      description: JSON Schema for function parameters
      required:
        - type
        - properties
      properties:
        type:
          type: string
          const: object
        properties:
          type: object
        required:
          type: array
          items:
            type: string

    returns:
      type: object
      description: Return value schema

    strict:
      type: boolean
      description: Enforce strict schema validation
      default: true

examples:
  - name: scan_security
    description: Run OSSA security analysis
    parameters:
      type: object
      properties:
        path:
          type: string
          description: Path to scan
        severity:
          type: string
          enum: [low, medium, high, critical]
          description: Minimum severity level
      required: [path]
    returns:
      type: object
      properties:
        findings:
          type: array
        score:
          type: number
