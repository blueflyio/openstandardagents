# OSSA Production Monitoring - Prometheus Configuration
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "ossa-alerts.yml"

scrape_configs:
  # OSSA Live Service
  - job_name: 'ossa-api'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/metrics'
    scrape_interval: 5s
    scrape_timeout: 10s

  # Agent Registry Metrics
  - job_name: 'ossa-agents'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/agents/metrics'
    scrape_interval: 10s

  # VORTEX Token Exchange Metrics
  - job_name: 'ossa-vortex'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/vortex/metrics'
    scrape_interval: 5s

  # 360Â° Feedback Loop Metrics
  - job_name: 'ossa-feedback'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/feedback/metrics'
    scrape_interval: 10s

  # Memory System Metrics (ACTA)
  - job_name: 'ossa-memory'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/memory/metrics'
    scrape_interval: 15s

  # Orchestration System Metrics
  - job_name: 'ossa-orchestration'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/orchestration/metrics'
    scrape_interval: 5s

  # OpenAPI Generator SDK Metrics
  - job_name: 'ossa-openapi-generator'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/openapi/metrics'
    scrape_interval: 30s

  # Security & Trust Scoring Metrics
  - job_name: 'ossa-security'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/security/metrics'
    scrape_interval: 10s

  # Circuit Breaker & Resilience Metrics
  - job_name: 'ossa-resilience'
    static_configs:
      - targets: ['ossa.ossa.orb.local:443']
    scheme: https
    metrics_path: '/api/v1/resilience/metrics'
    scrape_interval: 5s

  # Container Metrics (OrbStack)
  - job_name: 'ossa-container'
    static_configs:
      - targets: ['localhost:9100']  # Node exporter for container metrics
    scrape_interval: 15s

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - localhost:9093