# buf.yaml - Buf configuration for OSSA Protocol Buffers
version: v1

# Directory configuration
directories:
  - .

# Build configuration
build:
  excludes: []

# Lint configuration
lint:
  use:
    - DEFAULT
    - COMMENTS
    - FILE_LOWER_SNAKE_CASE
  except:
    - ENUM_VALUE_PREFIX
    - SERVICE_SUFFIX
  ignore_only:
    ENUM_VALUE_PREFIX:
      - common.proto
    SERVICE_SUFFIX:
      - agent.proto
      - coordination.proto
      - discovery.proto
      - orchestration.proto
      - monitoring.proto
      - security.proto
  enum_zero_value_suffix: _UNSPECIFIED
  rpc_allow_same_request_response: false
  rpc_allow_google_protobuf_empty_requests: false
  rpc_allow_google_protobuf_empty_responses: false
  service_suffix: Service

# Breaking change detection
breaking:
  use:
    - FILE
  except: []
  ignore_only: {}

# Plugin configurations
plugins:
  - name: go
    out: gen/go
    opt:
      - paths=source_relative
  - name: go-grpc
    out: gen/go
    opt:
      - paths=source_relative
  - name: js
    out: gen/js
    opt:
      - import_style=commonjs
  - name: grpc-web
    out: gen/js
    opt:
      - import_style=typescript
      - mode=grpcwebtext

# Dependencies (if using Buf Schema Registry)
deps:
  - buf.build/googleapis/googleapis
  - buf.build/grpc-ecosystem/grpc-gateway

# Module configuration
name: buf.build/ossa/proto