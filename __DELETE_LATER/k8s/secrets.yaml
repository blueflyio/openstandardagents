apiVersion: v1
kind: Secret
metadata:
  name: ossa-platform-secrets
  namespace: ossa-platform
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: secrets
    ossa.bluefly.io/version: "0.1.8"
type: Opaque
data:
  # Database credentials (base64 encoded)
  POSTGRES_PASSWORD: b3NzYV9wcm9kX3Bhc3N3b3JkXzIwMjU=  # ossa_prod_password_2025
  REDIS_PASSWORD: b3NzYV9yZWRpc19wYXNzd29yZF8yMDI1  # ossa_redis_password_2025
  
  # API Keys for external services (base64 encoded placeholders)
  OPENAI_API_KEY: c2stcHJvai1YTEE=  # sk-proj-XLA (placeholder)
  ANTHROPIC_API_KEY: c2stYW50LVhMQQ==  # sk-ant-XLA (placeholder)
  COHERE_API_KEY: Y29oZXJlLWFwaS1rZXk=  # cohere-api-key (placeholder)
  HUGGINGFACE_API_KEY: aGZfWExB  # hf_XLA (placeholder)
  
  # JWT and Encryption Keys
  JWT_SECRET: b3NzYV9qd3Rfc2VjcmV0X3N1cGVyX3NlY3VyZV8yMDI1  # ossa_jwt_secret_super_secure_2025
  ENCRYPTION_KEY: b3NzYV9lbmNyeXB0aW9uX2tleV9zdXBlcl9zZWN1cmVfMjAyNQ==  # ossa_encryption_key_super_secure_2025
  
  # Monitoring credentials
  GRAFANA_ADMIN_PASSWORD: b3NzYS1ncmFmYW5hLWFkbWluLTIwMjU=  # ossa-grafana-admin-2025
  PROMETHEUS_PASSWORD: b3NzYS1wcm9tZXRoZXVzLTIwMjU=  # ossa-prometheus-2025

---
apiVersion: v1
kind: Secret
metadata:
  name: ossa-registry-credentials
  namespace: ossa-platform
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: registry
    ossa.bluefly.io/version: "0.1.8"
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: eyJhdXRocyI6eyJnaXRsYWIuYmx1ZWZseS5pbyI6eyJ1c2VybmFtZSI6Im9zc2EtZGVwbG95IiwicGFzc3dvcmQiOiJvc3NhLXJlZ2lzdHJ5LXRva2VuLTIwMjUiLCJhdXRoIjoiYjNOellTMWtaWEJzYjNrNmIzTnpZUzF5WldkcGMzUnllUzEwYjJ0bGJpMHlNREkxIn19fQ==

---
apiVersion: v1
kind: Secret
metadata:
  name: ossa-tls-certs
  namespace: ossa-platform
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: tls
    ossa.bluefly.io/version: "0.1.8"
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi4uLnNlbGYtc2lnbmVkIGNlcnRpZmljYXRlIGZvciBkZXZlbG9wbWVudC4uLgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCi4uLnNlbGYtc2lnbmVkIHByaXZhdGUga2V5IGZvciBkZXZlbG9wbWVudC4uLgotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0t

---
# Service Account for OSSA services
apiVersion: v1
kind: ServiceAccount
metadata:
  name: ossa-service-account
  namespace: ossa-platform
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: serviceaccount
    ossa.bluefly.io/version: "0.1.8"
imagePullSecrets:
  - name: ossa-registry-credentials

---
# RBAC ClusterRole for OSSA services
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: ossa-cluster-role
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: rbac
    ossa.bluefly.io/version: "0.1.8"
rules:
- apiGroups: [""]
  resources: ["pods", "services", "configmaps", "secrets"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["apps"]
  resources: ["deployments", "replicasets"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["autoscaling"]
  resources: ["horizontalpodautoscalers"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["metrics.k8s.io"]
  resources: ["pods", "nodes"]
  verbs: ["get", "list"]

---
# RBAC ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: ossa-cluster-role-binding
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: rbac
    ossa.bluefly.io/version: "0.1.8"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: ossa-cluster-role
subjects:
- kind: ServiceAccount
  name: ossa-service-account
  namespace: ossa-platform

---
# Pod Security Policy (if supported)
apiVersion: policy/v1beta1
kind: PodSecurityPolicy
metadata:
  name: ossa-psp
  labels:
    app.kubernetes.io/name: ossa-platform
    app.kubernetes.io/component: security
    ossa.bluefly.io/version: "0.1.8"
spec:
  privileged: false
  allowPrivilegeEscalation: false
  requiredDropCapabilities:
    - ALL
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
  runAsUser:
    rule: 'MustRunAsNonRoot'
  seLinux:
    rule: 'RunAsAny'
  fsGroup:
    rule: 'RunAsAny'