{
  "ossa": "0.2.8",
  "agent": {
    "name": "gitlab-cicd-optimization-agent",
    "version": "1.0.0",
    "description": "Analyzes GitLab CI/CD pipelines and suggests optimizations for performance, caching, and parallelization",
    "role": "analyzer",
    "capabilities": [
      {
        "name": "analyze-pipeline",
        "type": "query",
        "description": "Analyze pipeline performance and identify bottlenecks",
        "input": {
          "$ref": "#/components/schemas/PipelineInput"
        },
        "output": {
          "$ref": "#/components/schemas/PipelineAnalysis"
        }
      },
      {
        "name": "suggest-caching",
        "type": "query",
        "description": "Suggest caching strategies for jobs",
        "input": {
          "$ref": "#/components/schemas/CachingQuery"
        },
        "output": {
          "$ref": "#/components/schemas/CachingSuggestions"
        }
      },
      {
        "name": "suggest-parallelization",
        "type": "query",
        "description": "Identify jobs that can run in parallel",
        "input": {
          "$ref": "#/components/schemas/ParallelizationQuery"
        },
        "output": {
          "$ref": "#/components/schemas/ParallelizationSuggestions"
        }
      },
      {
        "name": "optimize-dependencies",
        "type": "query",
        "description": "Optimize job dependencies and needs",
        "input": {
          "$ref": "#/components/schemas/DependencyQuery"
        },
        "output": {
          "$ref": "#/components/schemas/DependencyOptimization"
        }
      }
    ],
    "configuration": {
      "gitlabUrl": "https://gitlab.com",
      "projectId": "blueflyio/openstandardagents",
      "performanceThreshold": 300,
      "targetDuration": 180
    },
    "dependencies": {
      "services": ["gitlab-api"],
      "tools": ["performance-analyzer"]
    },
    "metadata": {
      "author": "OSSA Team",
      "tags": ["gitlab", "cicd", "optimization", "performance"],
      "documentation": "https://gitlab.com/blueflyio/openstandardagents/-/wikis/agents/cicd-optimization"
    }
  },
  "components": {
    "schemas": {
      "PipelineInput": {
        "type": "object",
        "required": ["pipelineId"],
        "properties": {
          "pipelineId": {
            "type": "integer",
            "description": "GitLab pipeline ID"
          }
        }
      },
      "PipelineAnalysis": {
        "type": "object",
        "required": ["totalDuration", "bottlenecks", "suggestions"],
        "properties": {
          "totalDuration": {
            "type": "number",
            "description": "Total pipeline duration in seconds"
          },
          "bottlenecks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "jobName": {
                  "type": "string"
                },
                "duration": {
                  "type": "number"
                },
                "stage": {
                  "type": "string"
                }
              }
            }
          },
          "suggestions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "potentialSavings": {
            "type": "number",
            "description": "Estimated time savings in seconds"
          }
        }
      },
      "CachingQuery": {
        "type": "object",
        "required": ["pipelineId"],
        "properties": {
          "pipelineId": {
            "type": "integer"
          }
        }
      },
      "CachingSuggestions": {
        "type": "object",
        "required": ["suggestions"],
        "properties": {
          "suggestions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "jobName": {
                  "type": "string"
                },
                "cacheKey": {
                  "type": "string"
                },
                "cachePaths": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "estimatedSavings": {
                  "type": "number"
                }
              }
            }
          }
        }
      },
      "ParallelizationQuery": {
        "type": "object",
        "required": ["pipelineId"],
        "properties": {
          "pipelineId": {
            "type": "integer"
          }
        }
      },
      "ParallelizationSuggestions": {
        "type": "object",
        "required": ["parallelGroups"],
        "properties": {
          "parallelGroups": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "stage": {
                  "type": "string"
                },
                "jobs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "currentDuration": {
                  "type": "number"
                },
                "parallelDuration": {
                  "type": "number"
                }
              }
            }
          }
        }
      },
      "DependencyQuery": {
        "type": "object",
        "required": ["pipelineId"],
        "properties": {
          "pipelineId": {
            "type": "integer"
          }
        }
      },
      "DependencyOptimization": {
        "type": "object",
        "required": ["optimizations"],
        "properties": {
          "optimizations": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "jobName": {
                  "type": "string"
                },
                "currentDependencies": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "suggestedDependencies": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "reasoning": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  }
}
