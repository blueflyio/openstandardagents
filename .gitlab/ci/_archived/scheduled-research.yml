# Scheduled Research and Evolution Workflows
# Runs daily to keep OSSA at the forefront

research:daily-ecosystem-scan:
  stage: research
  image: node:20
  before_script:
    - npm install -g @bluefly/openstandardagents
  script:
    - |
      echo "ðŸ”¬ Daily OSSA Ecosystem Research"
      ossa run .gitlab/agents/research-agent/manifest.ossa.yaml \
        --runtime anthropic \
        --message "Research the latest agent frameworks, tools, and patterns. Identify what OSSA should support next."
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
  schedule:
    - cron: "0 2 * * *"  # 2 AM daily
  allow_failure: true

propose:weekly-improvement-proposals:
  stage: propose
  image: node:20
  before_script:
    - npm install -g @bluefly/openstandardagents
  script:
    - |
      echo "ðŸ’¡ Weekly Improvement Proposals"
      ossa run .gitlab/agents/research-agent/manifest.ossa.yaml \
        --runtime anthropic \
        --message "Based on this week's research, create GitLab issues for the top 3 most impactful OSSA improvements"
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
  schedule:
    - cron: "0 3 * * 1"  # 3 AM every Monday
  allow_failure: true

evolve:monthly-schema-review:
  stage: implement
  image: node:20
  before_script:
    - npm install -g @bluefly/openstandardagents
  script:
    - |
      echo "ðŸ“ˆ Monthly Schema Evolution Review"
      ossa run .gitlab/agents/schema-evolution/manifest.ossa.yaml \
        --runtime anthropic \
        --message "Review all approved schema issues from the past month and propose consolidated schema updates"
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
  schedule:
    - cron: "0 4 1 * *"  # 4 AM on 1st of every month
  allow_failure: true
