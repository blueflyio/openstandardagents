# Self-Healing Runner Setup
# Deploys complete self-healing runner infrastructure

setup:self-healing-runners:
  stage: setup
  image: bitnami/kubectl:latest
  before_script:
    - kubectl version --client
  script:
    - |
      echo "Deploying self-healing OSSA runners..."
      ./.gitlab/runners/deploy-all.sh
      echo "Self-healing runners deployed"
  rules:
    - if: $CI_COMMIT_BRANCH == "main"
      when: manual
    - if: $SETUP_SELF_HEALING == "true"
      when: manual
  allow_failure: true
