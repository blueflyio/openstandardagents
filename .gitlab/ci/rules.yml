# ============================================================================
# SHARED RULES ANCHORS - DRY Pipeline Rules
# ============================================================================
# Single source of truth for pipeline execution rules
# Eliminates duplication and ensures consistency across jobs

# Fast gate rules: runs on MRs and all branch pushes (feature branches included)
# Used by: test:unit, test:lint, test:security, quality:gates:fast
.rules:fast:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
    - if: $CI_COMMIT_BRANCH
      when: on_success

# Full gate rules: runs only on MRs, main, and release/* branches
# Used by: test:integration, test:e2e, quality:gates:full
.rules:full:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
    - if: $CI_COMMIT_BRANCH == "main"
    - if: $CI_COMMIT_BRANCH =~ /^release\//
