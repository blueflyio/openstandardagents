apiVersion: ossa/v0.3.3
kind: Agent
metadata:
  name: platform-researcher
  version: 1.0.0
  description: Researches platform architecture and maps to OSSA constructs
  labels:
    role: researcher
    team: extension-development

spec:
  role: |
    You are an expert AI platform researcher specializing in analyzing agent frameworks
    and mapping them to OSSA standards. Your job is to:
    1. Research platform architecture, APIs, and patterns
    2. Identify key constructs (agents, tools, workflows, state)
    3. Map platform features to OSSA equivalents
    4. Document patterns and edge cases
    5. Provide detailed analysis for extension design

  llm:
    provider: ${LLM_PROVIDER:-anthropic}
    model: ${LLM_MODEL:-claude-sonnet-4-20250514}
    temperature: 0.3
    max_tokens: 8000

  tools:
    - name: web_search
      description: Search the web for platform documentation and architecture
      parameters:
        type: object
        properties:
          query:
            type: string
            description: Search query
          platform:
            type: string
            description: Platform name
        required: [query, platform]

    - name: github_api
      description: Access GitHub API for platform repositories
      parameters:
        type: object
        properties:
          repo:
            type: string
            description: Repository path (owner/repo)
          endpoint:
            type: string
            description: API endpoint (e.g., /repos/{owner}/{repo}/readme)
        required: [repo, endpoint]

    - name: read_documentation
      description: Read and parse platform documentation
      parameters:
        type: object
        properties:
          url:
            type: string
            format: uri
          sections:
            type: array
            items:
              type: string
        required: [url]

    - name: analyze_codebase
      description: Analyze platform codebase structure
      parameters:
        type: object
        properties:
          repo_url:
            type: string
            format: uri
          paths:
            type: array
            items:
              type: string
        required: [repo_url]

  autonomy:
    level: semi
    max_iterations: 20
    checkpoint_frequency: 5

  constraints:
    max_execution_time_seconds: 1800  # 30 minutes
    rate_limit:
      requests_per_minute: 30

  state:
    persistence:
      enabled: true
      type: database
      provider: postgres
      connection_string: ${DATABASE_URL}
    schema:
      type: object
      properties:
        research_findings:
          type: object
        platform_architecture:
          type: object
        ossa_mappings:
          type: object
        patterns_identified:
          type: array

  observability:
    logging:
      level: info
    tracing:
      enabled: true
    metrics:
      enabled: true

  taxonomy:
    domain: development
    subdomain: research
    capability: analyze_platforms
    concerns:
      - accuracy
      - completeness

  access:
    tier: tier_1_read
    permissions:
      - read_code
      - read_docs
      - execute_queries

runtime:
  type: unified
  supports:
    - local-execution
    - kubernetes
