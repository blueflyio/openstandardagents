apiVersion: ossa/v0.3.0
kind: Agent
metadata:
  name: content-researcher
  namespace: website-automation
  version: 1.0.0
  description: |
    Research agent that discovers trends, news, and academic papers relevant to
    AI agents, OSSA specification, and the broader agent ecosystem.
  labels:
    tier: worker
    domain: content
    role: researcher
    trigger: scheduled
  author:
    name: OSSA Research Bot
    email: researcher@openstandardagents.org
    gitlab_service_account: ossa-researcher

spec:
  role: |
    You are the Research Agent for openstandardagents.org. Your job is to discover
    and curate content opportunities that position OSSA as the leading open standard
    for AI agents.

    Research Focus Areas:
    1. Industry News: New agent frameworks, LLM releases, enterprise adoption
    2. Academic Research: Papers on multi-agent systems, agent specifications
    3. Competitor Analysis: Agent Spec, MCP, framework-specific approaches
    4. Community: GitHub trends, HackerNews discussions, Twitter/X threads
    5. Enterprise: Case studies, adoption stories, production deployments

    Output: Research briefs as GitLab issues labeled "content-opportunity"

  llm:
    provider: anthropic
    model: claude-sonnet-4-20250514
    temperature: 0.5
    max_tokens: 8192

  capabilities:
    - web-search
    - arxiv-search
    - github-trending
    - news-aggregation
    - gitlab-api

  triggers:
    - type: schedule
      cron: "0 6 * * 1,4"  # Monday and Thursday 6am
      description: Bi-weekly research cycle

    - type: webhook
      events:
        - issue.labeled
      filters:
        - label: research-request

  tasks:
    - id: scan-arxiv
      name: Scan arXiv for Agent Research
      type: web-search
      config:
        source: arxiv
        queries:
          - "multi-agent systems LLM"
          - "agent specification standard"
          - "AI agent orchestration"
          - "agent-to-agent communication"
        filters:
          - date: last_7_days
          - categories: [cs.AI, cs.MA, cs.SE]
        output: research-findings.json

    - id: scan-github
      name: Scan GitHub Trending
      type: web-search
      config:
        source: github-trending
        languages: [python, typescript, go]
        topics: [agents, llm, ai-agents, langchain, crewai]
        filters:
          - stars: ">100"
          - updated: last_7_days
        output: github-trends.json

    - id: scan-news
      name: Scan Tech News
      type: web-search
      config:
        sources:
          - hackernews
          - techcrunch
          - venturebeat
        queries:
          - "AI agents enterprise"
          - "agent framework"
          - "multi-agent"
        filters:
          - date: last_7_days
        output: news-findings.json

    - id: analyze-competitors
      name: Monitor Competitor Activity
      type: analysis
      config:
        competitors:
          - name: Agent Spec
            github: agent-spec/agent-spec
            arxiv: "2510.04173"
          - name: MCP
            github: modelcontextprotocol/servers
          - name: LangGraph
            github: langchain-ai/langgraph
        metrics:
          - commit_activity
          - star_growth
          - issue_velocity
        output: competitor-analysis.json

    - id: synthesize-research
      name: Create Research Brief
      type: synthesis
      dependsOn:
        - scan-arxiv
        - scan-github
        - scan-news
        - analyze-competitors
      config:
        template: |
          # Weekly Research Brief - {{date}}

          ## Key Findings

          ### Industry Trends
          {{#each news_findings}}
          - **{{title}}**: {{summary}} [Source]({{url}})
          {{/each}}

          ### Academic Research
          {{#each arxiv_findings}}
          - **{{title}}** ({{authors}}): {{abstract_summary}} [arXiv]({{url}})
          {{/each}}

          ### GitHub Trending
          {{#each github_trends}}
          - **{{repo}}** ({{stars}} stars): {{description}}
          {{/each}}

          ### Competitor Activity
          {{#each competitor_analysis}}
          - **{{name}}**: {{activity_summary}}
          {{/each}}

          ## Content Opportunities

          {{#each opportunities}}
          ### {{title}}
          - **Type**: {{type}}
          - **Priority**: {{priority}}
          - **Research Sources**: {{sources}}
          - **Suggested Angle**: {{angle}}
          {{/each}}

          ---
          *Generated by @ossa-researcher*
        output: research-brief.md

    - id: create-issues
      name: Create Content Opportunity Issues
      type: gitlab-api
      dependsOn: [synthesize-research]
      config:
        action: create_issues
        template:
          title: "Content: {{opportunity.title}}"
          description: |
            ## Research Brief

            {{opportunity.summary}}

            ## Sources
            {{#each opportunity.sources}}
            - [{{title}}]({{url}})
            {{/each}}

            ## Suggested Content
            - **Type**: {{opportunity.type}}
            - **Target Audience**: {{opportunity.audience}}
            - **Key Points**: {{opportunity.key_points}}

            ---
            *Created by @ossa-researcher*
          labels:
            - content-opportunity
            - needs-author
            - priority::{{opportunity.priority}}

  integrations:
    gitlab:
      api_version: v4
      token: ${RESEARCHER_TOKEN}
      project: blueflyio/ossa/openstandardagents.org

    web_apis:
      arxiv:
        base_url: https://export.arxiv.org/api/query
      github:
        token: ${GITHUB_TOKEN}
      serp:
        api_key: ${SERP_API_KEY}

  monitoring:
    metrics:
      - research_items_found
      - content_opportunities_created
      - source_diversity_score
    logs:
      level: info
      format: json
