# =============================================================================
# GitLab Agent for Kubernetes (agentk) - Production Configuration
# =============================================================================
#
# This configuration enables GitOps-style deployments where changes to k8s/
# manifests are automatically applied to the cluster.
#
# Documentation: https://docs.gitlab.com/ee/user/clusters/agent/gitops.html
# =============================================================================

gitops:
  manifest_projects:
    # Website static site (if deployed to K8s)
    - id: blueflyio/openstandardagents.org
      paths:
        - glob: 'k8s/**/*.yaml'
      reconcile_timeout: 3600s
      dry_run_strategy: none
      prune: true
      prune_propagation_policy: foreground
      inventory_policy: must_match

ci_access:
  groups:
    - id: blueflyio/agent-platform
      default_namespace: ossa
      access_as:
        ci_job: {}
      environments:
        - production
        - staging

  projects:
    - id: blueflyio/openstandardagents.org
      default_namespace: ossa-website
      access_as:
        ci_job: {}
      environments:
        - production

observability:
  logging:
    level: info
    grpc_level: warn
  metrics:
    enabled: true
    exporter: prometheus

user_access:
  access_as:
    agent: {}
  projects:
    - id: blueflyio/openstandardagents.org

# Remote development (GitLab Workspaces)
remote_development:
  enabled: true
  dns_zone: workspaces.openstandardagents.org
