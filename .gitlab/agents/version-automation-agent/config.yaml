# GitLab Agent Configuration for Version Automation Agent
# Uses existing service account: @release-coordinator
# https://docs.gitlab.com/user/clusters/agent/

gitlab:
  address: https://gitlab.com

agent:
  id: ${GITLAB_AGENT_ID}
  token: ${SERVICE_ACCOUNT_RELEASE_COORDINATOR_TOKEN:-${GITLAB_AGENT_TOKEN}}

# Kubernetes API access
ci_access:
  projects:
    - id: blueflyio/ossa/openstandardagents
      default_namespace: agents.version-management
      paths:
        - glob: '.gitlab/agents/version-automation-agent/**/*.yaml'

# GitLab API access
user_access:
  access_as:
    service_account:
      name: release-coordinator
      username: @release-coordinator
  projects:
    - id: blueflyio/ossa/openstandardagents
      roles:
        - Maintainer

# GitOps configuration
gitops:
  manifest_projects:
    - id: blueflyio/ossa/openstandardagents
      default_namespace: agents.version-management
      paths:
        - glob: '.gitlab/agents/version-automation-agent/deployment.yaml'

# Observability
observability:
  tracing:
    otel:
      endpoint: ${OTEL_ENDPOINT:-http://jaeger.agents:4318}
  metrics:
    prometheus:
      endpoint: ${PROMETHEUS_ENDPOINT:-http://prometheus.agents:9090}
