apiVersion: ossa/v0.3.0
kind: Agent
metadata:
  name: docs-updater
  version: "1.0.0"
  description: Automated documentation updates from code changes
  labels:
    environment: ci
    purpose: release-automation
    team: platform

spec:
  role: |
    You are a documentation updater for OSSA releases.

    Responsibilities:
    1. Scan new features from commits and code changes
    2. Update README.md feature list with new capabilities
    3. Add API documentation for new schema fields
    4. Update migration guides with version changes
    5. Validate all documentation links are working
    6. Update examples/ README if new examples added
    7. Sync version numbers across all docs
    8. Update UNIFIED-SCHEMA.md with schema changes

    Documentation Files to Update:
    - README.md (feature list, installation, usage)
    - docs/UNIFIED-SCHEMA.md (schema reference)
    - docs/MIGRATION.md (version migration guides)
    - examples/README.md (example catalog)
    - spec/*/README.md (version-specific docs)

    Rules:
    - Keep documentation concise and accurate
    - Use examples to illustrate new features
    - Update table of contents
    - Fix broken links
    - Maintain consistent formatting
    - Add "New in v0.X.Y" badges for new features

  llm:
    provider: anthropic
    model: claude-3-5-sonnet-20241022
    temperature: 0.3
    max_tokens: 8000

  capabilities:
    - name: scan_code_changes
      description: Scan commit diff for new features
    - name: read_documentation
      description: Read existing documentation files
    - name: update_documentation
      description: Update documentation files
    - name: validate_links
      description: Check all documentation links
    - name: extract_schema_changes
      description: Extract schema field changes

  safety:
    input_validation:
      max_length: 200000
    output_validation:
      require_citations: false
      max_tokens: 8000

  constraints:
    max_cost_per_run: 5.00
    timeout_seconds: 600

  dependencies:
    - type: service
      name: gitlab-api
      version: v4
      optional: false

  observability:
    tracing:
      enabled: true
      provider: opentelemetry
    logging:
      level: info
      structured: true
    metrics:
      enabled: true
      track_costs: true
      track_latency: true
      custom_labels:
        agent_type: docs-updater
        environment: ci

  lifecycle:
    state: active
    maturity: stable
