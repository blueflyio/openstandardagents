apiVersion: ossa/v0.3.3
kind: Task
metadata:
  name: schema-to-typescript
  version: 1.0.0
  description: Generate TypeScript types from OSSA JSON Schema
  labels:
    category: code-generation
    language: typescript
    deterministic: "true"
  annotations:
    ossa.io/migration: v0.3.3-to-v0.3.3
    ossa.io/migrated-date: 2026-01-07
spec:
  execution:
    type: deterministic
    runtime: node
    timeout_seconds: 60
  capabilities:
    - read_file
    - write_file
    - json_parse
    - code_generation
  input:
    type: object
    required:
      - schema_path
      - output_path
    properties:
      schema_path:
        type: string
        description: Path to JSON Schema file
      output_path:
        type: string
        description: Path for generated TypeScript file
      generator:
        type: string
        enum:
          - zod
          - io-ts
          - type-only
        default: zod
        description: TypeScript type generation strategy
  output:
    type: object
    properties:
      generated_file:
        type: string
      types_count:
        type: integer
      definitions:
        type: array
        items:
          type: string
  error_handling:
    on_error: fail
runtime:
  type: node
  bindings:
    code_generation:
      handler: npx json-schema-to-typescript
      config:
        bannerComment: /* Auto-generated from OSSA JSON Schema - DO NOT EDIT */
        style:
          singleQuote: true
          semi: true
