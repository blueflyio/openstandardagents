image: alpine:latest
injectGatewayToken: true

commands:
  - echo "Starting recipe workflow flow"

steps:
  - id: recipe_validation
    agent: bot-drupal-recipe-scaffolder
    with:
      project_id: "{{ event.project_id }}"
      merge_request_id: "{{ event.merge_request_id }}"
      changed_files: "{{ event.changed_files }}"

  - id: recipe_publish
    agent: bot-drupal-recipe-pub
    with:
      project_id: "{{ event.project_id }}"
      merge_request_id: "{{ event.merge_request_id }}"
      target_branch: "{{ event.target_branch }}"
      changed_files: "{{ event.changed_files }}"
