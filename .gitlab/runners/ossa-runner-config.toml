# OSSA GitLab Runner Configuration
# For dedicated OSSA agent execution runners

concurrent = 4
check_interval = 0

[session_server]
  session_timeout = 1800

[[runners]]
  name = "ossa-runner"
  url = "https://gitlab.com/"
  token = "${GITLAB_RUNNER_TOKEN}"
  executor = "docker"
  [runners.docker]
    image = "node:22-alpine"
    privileged = false
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = false
    volumes = ["/cache"]
    shm_size = 0
  [runners.cache]
    [runners.cache.s3]
    [runners.cache.gcs]
    [runners.cache.azure]

[[runners]]
  name = "ossa-agent-runner"
  url = "https://gitlab.com/"
  token = "${GITLAB_RUNNER_TOKEN}"
  executor = "docker"
  [runners.docker]
    image = "node:22-alpine"
    privileged = false
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = false
    volumes = ["/cache", "${DOCKER_SOCKET_PATH:-/var/run/docker.sock}:/var/run/docker.sock"]
    shm_size = 0
  [runners.cache]
    [runners.cache.s3]
    [runners.cache.gcs]
    [runners.cache.azure]
  environment = ["GITLAB_TOKEN", "ANTHROPIC_API_KEY", "OPENAI_API_KEY"]
