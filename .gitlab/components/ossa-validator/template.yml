# OSSA Validator Template
# Use this template in your project's .gitlab-ci.yml

include:
  - component: app-4001.cloud.bluefly.io/llm/openapi-ai-agents-standard/ossa-validator@v0.1.9
    inputs:
      project_name: $CI_PROJECT_NAME
      ossa_version: '0.1.9'
      conformance_tier: 'core'
      spec_paths:
        - 'src/api/*.yml'
        - 'openapi/*.yml'
        - '**/*openapi*.yml'

# Example usage in your project
stages:
  - validate
  - build
  - test
  - deploy

# Basic OSSA validation (recommended for all projects)
validate:ossa:
  extends: ossa:validate
  stage: validate

# Strict validation for production branches
validate:ossa:strict:
  extends: ossa:validate:strict
  stage: validate
  only:
    - main
    - production

# Security-focused validation
validate:ossa:security:
  extends: ossa:validate:security
  stage: validate
  only:
    changes:
      - '**/*.yml'
      - '**/*.yaml'
