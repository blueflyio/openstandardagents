apiVersion: ossa/v0.3.0
kind: Agent
metadata:
  name: ossa-discord-bot
  namespace: community
  labels:
    platform: discord
    tier: community-support
    version: v0.1.0
spec:
  description: |
    Community support and automation bot for Open Standard Agents.
    Provides OSSA validation, examples, DevOps notifications, and
    LLM-powered assistance.
  
  capabilities:
    - discord-bot
    - ossa-validation
    - llm-integration
    - webhook-handling
    - community-moderation
  
  runtime:
    platform: kubernetes
    image: registry.gitlab.com/blueflyio/openstandardagents.org/discord-bot:latest
    resources:
      cpu: 500m
      memory: 512Mi
  
  commands:
    - name: ping
      description: Check bot latency and status
      
    - name: help
      description: Show available commands
      
    - name: about
      description: Learn about OSSA
      
    - name: ossa-validate
      description: Validate OSSA manifest files
      parameters:
        - name: manifest
          type: attachment
          required: true
          description: OSSA manifest (.yaml or .json)
      
    - name: ossa-schema
      description: Get OSSA JSON Schema information
      
    - name: ossa-examples
      description: Browse OSSA manifest examples
      
    - name: ask
      description: Ask a question about OSSA
      parameters:
        - name: question
          type: string
          required: true
        - name: provider
          type: choice
          choices: [auto, claude, gpt]
          description: LLM provider
  
  services:
    - name: examples-sync
      description: Sync examples from openstandardagents.org
      schedule: "0 */6 * * *"  # Every 6 hours
      target_channel: examples
      
    - name: devops-webhooks
      description: Handle GitLab and GitHub webhooks
      endpoints:
        - path: /webhook/gitlab
          method: POST
        - path: /webhook/github
          method: POST
      target_channel: devops-notifications
      
    - name: moderation
      description: Auto-moderation for community safety
      rules:
        - spam-detection
        - excessive-caps
        - link-spam
      actions:
        - warn
        - delete
        - timeout
  
  integrations:
    llm:
      providers:
        - name: claude
          model: claude-3-5-sonnet-20241022
          api_key: ${ANTHROPIC_API_KEY}
        - name: gpt
          model: gpt-4-turbo-preview
          api_key: ${OPENAI_API_KEY}
      routing: auto
      
    ossa:
      cli_version: v0.2.9
      validation_enabled: true
      
    discord:
      intents:
        - guilds
        - guild_messages
        - message_content
      permissions: 277025508416
  
  monitoring:
    metrics:
      - commands_executed
      - validations_performed
      - questions_answered
      - moderation_actions
    logs:
      level: info
      format: json
  
  deployment:
    replicas: 1
    strategy: rolling
    health_check:
      path: /health
      interval: 30s
