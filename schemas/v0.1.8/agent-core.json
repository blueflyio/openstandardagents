{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ossa.agents/schemas/v0.1.8/agent-core.json",
  "title": "OSSA Agent Core Schema v0.1.8",
  "description": "Core schema for OSSA v0.1.8 agent specifications with OpenAPI 3.1+ compliance",
  "type": "object",
  "required": ["ossa", "metadata", "spec"],
  "properties": {
    "ossa": {
      "type": "string",
      "const": "0.1.8",
      "description": "OSSA version identifier"
    },
    "metadata": {
      "type": "object",
      "required": ["name", "version"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9-_]+$",
          "minLength": 1,
          "maxLength": 64,
          "description": "Agent name (lowercase, alphanumeric, hyphens, underscores)"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+",
          "description": "Semantic version"
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Agent description"
        },
        "author": {
          "type": "string",
          "description": "Agent author"
        },
        "license": {
          "type": "string",
          "description": "License identifier"
        },
        "created": {
          "type": "string",
          "format": "date",
          "description": "Creation date (YYYY-MM-DD)"
        },
        "updated": {
          "type": "string",
          "format": "date",
          "description": "Last updated date (YYYY-MM-DD)"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "maxItems": 10,
          "description": "Agent tags for categorization"
        }
      }
    },
    "spec": {
      "type": "object",
      "required": ["conformance_tier", "class", "capabilities"],
      "properties": {
        "conformance_tier": {
          "type": "string",
          "enum": ["core", "governed", "advanced"],
          "description": "OSSA conformance tier"
        },
        "class": {
          "type": "string",
          "enum": ["general", "specialist", "workflow", "integration", "security", "data", "nlp", "vision", "audio"],
          "description": "Agent class/domain"
        },
        "category": {
          "type": "string",
          "enum": ["assistant", "tool", "service", "coordinator"],
          "description": "Agent category"
        },
        "capabilities": {
          "type": "object",
          "required": ["primary"],
          "properties": {
            "primary": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "maxItems": 10,
              "description": "Primary capabilities"
            },
            "secondary": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "maxItems": 15,
              "description": "Secondary capabilities"
            }
          }
        },
        "protocols": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "version", "required"],
            "properties": {
              "name": {
                "type": "string",
                "enum": ["openapi", "mcp", "uadp", "graphql", "grpc", "websocket"]
              },
              "version": {
                "type": "string"
              },
              "required": {
                "type": "boolean"
              },
              "extensions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "minItems": 1,
          "description": "Supported protocols"
        },
        "framework_support": {
          "type": "object",
          "properties": {
            "langchain": {
              "$ref": "#/$defs/framework_integration"
            },
            "crewai": {
              "$ref": "#/$defs/framework_integration"
            },
            "openai": {
              "$ref": "#/$defs/framework_integration"
            },
            "anthropic": {
              "$ref": "#/$defs/framework_integration"
            },
            "mcp": {
              "$ref": "#/$defs/framework_integration"
            }
          },
          "additionalProperties": {
            "$ref": "#/$defs/framework_integration"
          },
          "description": "Framework integration specifications"
        },
        "endpoints": {
          "type": "object",
          "required": ["health"],
          "properties": {
            "health": {
              "type": "string",
              "format": "uri-reference",
              "description": "Health check endpoint"
            },
            "capabilities": {
              "type": "string",
              "format": "uri-reference",
              "description": "Capabilities endpoint"
            },
            "discover": {
              "type": "string",
              "format": "uri-reference",
              "description": "Discovery endpoint"
            }
          },
          "additionalProperties": {
            "type": "string",
            "format": "uri-reference"
          }
        },
        "performance": {
          "type": "object",
          "properties": {
            "latency": {
              "type": "object",
              "properties": {
                "health_check": {
                  "type": "string",
                  "pattern": "^<\\d+ms$"
                },
                "capabilities": {
                  "type": "string",
                  "pattern": "^<\\d+ms$"
                }
              }
            },
            "throughput": {
              "type": "object",
              "properties": {
                "requests_per_second": {
                  "type": "number",
                  "minimum": 1
                }
              }
            },
            "availability": {
              "type": "object",
              "properties": {
                "uptime_target": {
                  "type": "number",
                  "minimum": 90,
                  "maximum": 100
                }
              }
            }
          }
        },
        "security": {
          "type": "object",
          "properties": {
            "authentication": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["api_key", "oauth2", "jwt", "basic", "none"]
              }
            },
            "authorization": {
              "type": "string",
              "enum": ["rbac", "abac", "simple", "none"]
            },
            "encryption": {
              "type": "object",
              "properties": {
                "at_rest": {
                  "type": "string",
                  "enum": ["aes_256", "aes_128", "none"]
                },
                "in_transit": {
                  "type": "string",
                  "enum": ["tls_1_3", "tls_1_2", "none"]
                }
              }
            }
          }
        },
        "compliance_frameworks": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "level"],
            "properties": {
              "name": {
                "type": "string",
                "enum": ["ISO_42001", "NIST_AI_RMF", "EU_AI_ACT", "SOC2", "GDPR"]
              },
              "level": {
                "type": "string",
                "enum": ["planned", "implementing", "implemented", "certified"]
              },
              "audit_ready": {
                "type": "boolean"
              },
              "maturity_level": {
                "type": "integer",
                "minimum": 1,
                "maximum": 5
              }
            }
          }
        }
      }
    }
  },
  "$defs": {
    "framework_integration": {
      "type": "object",
      "required": ["enabled"],
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "integration_type": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "config": {
          "type": "object"
        }
      }
    }
  }
}