# Lefthook Configuration
# Uses TypeScript validators instead of shell scripts (SOLID, DRY, Zod)

pre-commit:
  parallel: false
  commands:
    validate-gitlab-ci:
      run: tsx src/tools/validation/gitlab-ci-validator.ts .gitlab-ci.yml
      glob: ".gitlab-ci.yml"
      stage_fixed: true

    prevent-hardcoded-versions:
      run: tsx src/tools/validation/version-validator.ts
      stage_fixed: false

pre-push:
  parallel: true
  commands:
    # Run tests before push
    test:
      run: npm test
      fail_text: |
        ‚ùå TESTS FAILED - Push blocked
        Fix test failures before pushing
      skip:
        - merge
        - rebase
