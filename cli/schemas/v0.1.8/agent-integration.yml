# OSSA Agent Integration Schema v0.1.8
# Level 2: Integration-ready agent with multi-framework support
# Production-ready with basic security and monitoring

type: object
required:
  - name
  - version
  - expertise
  - capabilities
  - frameworks
  - openapi
properties:
  name:
    type: string
    pattern: '^[a-z0-9-]+$'
    minLength: 3
    maxLength: 50
    description: Agent identifier (lowercase, alphanumeric, hyphens)
    
  version:
    type: string
    pattern: '^[0-9]+\.[0-9]+\.[0-9]+$'
    description: Agent version (semantic versioning)
    
  expertise:
    type: string
    maxLength: 500
    description: Detailed description of agent's domain expertise
    
  description:
    type: string
    maxLength: 1000
    description: Comprehensive agent description
    
  capabilities:
    type: array
    minItems: 1
    items:
      type: object
      required:
        - name
        - description
      properties:
        name:
          type: string
          pattern: '^[a-z0-9_]+$'
          description: Capability identifier
          
        description:
          type: string
          maxLength: 200
          description: Capability description
          
        input_schema:
          type: string
          description: Path to input schema file (optional)
          
        output_schema:
          type: string
          description: Path to output schema file (optional)
          
        frameworks:
          type: array
          items:
            type: string
            enum: ["langchain", "crewai", "openai", "anthropic", "google", "autogen", "mcp"]
          description: Framework compatibility for this capability
          
      additionalProperties: false
    description: Structured capabilities with schema support
    
  openapi:
    type: string
    description: Path to OpenAPI specification file (required for Level 2)
    
  frameworks:
    type: object
    description: Multi-framework compatibility configuration
    properties:
      mcp:
        type: object
        properties:
          enabled:
            type: boolean
            default: true
            
          server_config:
            type: object
            properties:
              name:
                type: string
              version:
                type: string
              description:
                type: string
            additionalProperties: false
        additionalProperties: false
        
      langchain:
        type: object
        properties:
          enabled:
            type: boolean
            default: false
            
          tools_format:
            type: string
            enum: ["function_calling", "tool_calling", "structured_output"]
            default: "function_calling"
            
          chain_type:
            type: string
            enum: ["llm", "conversation", "sequential", "map_reduce"]
            
        additionalProperties: false
        
      crewai:
        type: object
        properties:
          enabled:
            type: boolean
            default: false
            
          role:
            type: string
            maxLength: 100
            
          goal:
            type: string
            maxLength: 200
            
          backstory:
            type: string
            maxLength: 500
            
        additionalProperties: false
        
      openai:
        type: object
        properties:
          enabled:
            type: boolean
            default: false
            
          model:
            type: string
            enum: ["gpt-4", "gpt-4-turbo", "gpt-3.5-turbo"]
            
          function_calling:
            type: boolean
            default: true
            
        additionalProperties: false
        
      anthropic:
        type: object
        properties:
          enabled:
            type: boolean
            default: false
            
          model:
            type: string
            enum: ["claude-3-opus", "claude-3-sonnet", "claude-3-haiku"]
            
          tool_use:
            type: boolean
            default: true
            
        additionalProperties: false
        
    additionalProperties:
      type: object
      
  context_paths:
    type: array
    items:
      type: object
      required:
        - path
        - description
      properties:
        path:
          type: string
          description: File or directory path
        description:
          type: string
          maxLength: 100
          description: Description of what this path contains
        type:
          type: string
          enum: ["source", "docs", "config", "data", "tests"]
          description: Type of content
      additionalProperties: false
    description: Contextual paths with categorization
    
  authentication:
    type: object
    description: Authentication configuration
    properties:
      type:
        type: string
        enum: ["none", "api_key", "bearer", "basic", "oauth2"]
        default: "api_key"
        
      header:
        type: string
        default: "X-API-Key"
        description: Authentication header name
        
      required:
        type: boolean
        default: false
        
    additionalProperties: false
    
  rate_limiting:
    type: object
    description: Rate limiting configuration
    properties:
      enabled:
        type: boolean
        default: true
        
      requests_per_minute:
        type: integer
        minimum: 1
        default: 60
        
      burst_limit:
        type: integer
        minimum: 1
        default: 100
        
    additionalProperties: false
    
  context_management:
    type: object
    description: Context and token management
    properties:
      max_tokens:
        type: integer
        minimum: 100
        maximum: 128000
        default: 8000
        
      optimization:
        type: object
        properties:
          strategy:
            type: string
            enum: ["adaptive", "fixed", "progressive"]
            default: "adaptive"
            
          compression:
            type: boolean
            default: true
            
          summarization:
            type: boolean
            default: false
            
        additionalProperties: false
        
    additionalProperties: false
    
  monitoring:
    type: object
    description: Basic monitoring configuration
    properties:
      metrics:
        type: boolean
        default: true
        description: Enable metrics collection
        
      health_check:
        type: object
        properties:
          endpoint:
            type: string
            default: "/health"
            
          interval:
            type: integer
            minimum: 10
            default: 30
            description: Health check interval in seconds
            
        additionalProperties: false
        
    additionalProperties: false
    
  deployment:
    type: object
    description: Deployment configuration
    properties:
      environments:
        type: array
        items:
          type: string
          enum: ["development", "staging", "production"]
        description: Supported environments
        
      scaling:
        type: object
        properties:
          min_instances:
            type: integer
            minimum: 1
            default: 1
            
          max_instances:
            type: integer
            minimum: 1
            default: 5
            
        additionalProperties: false
        
    additionalProperties: false
    
  data:
    type: object
    description: Agent data configuration
    properties:
      training_data:
        type: string
        description: Path to training data
        
      knowledge_base:
        type: string
        description: Path to knowledge base
        
      examples:
        type: string
        description: Path to example interactions
        
    additionalProperties: false
    
  metadata:
    type: object
    description: Agent metadata
    properties:
      author:
        type: string
        maxLength: 100
        
      organization:
        type: string
        maxLength: 100
        
      license:
        type: string
        maxLength: 50
        
      tags:
        type: array
        items:
          type: string
          maxLength: 30
        maxItems: 10
        description: Classification tags
        
    additionalProperties: false
    
additionalProperties: false