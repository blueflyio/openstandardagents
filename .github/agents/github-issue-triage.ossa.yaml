# OSSA Agent Manifest: GitHub Issue Triage Agent
# Triages issues from GitHub and syncs to GitLab
apiVersion: ossa/v0.2.8
kind: Agent

metadata:
  name: github-issue-triage
  version: 1.0.0
  description: |
    Triages GitHub issues, auto-labels based on content,
    and syncs to GitLab issue tracker for tracking.
  labels:
    platform: github
    domain: devops
    workflow: issue-triage
  annotations:
    documentation: https://openstandardagents.org/docs/agents/github-issue-triage

spec:
  taxonomy:
    domain: devops
    subdomain: issue-management
    capability: triage

  role: |
    You are a GitHub issue triage agent for OSSA.

    Your responsibilities:
    1. Welcome issue reporters and thank them for feedback
    2. Auto-label issues based on content analysis:
       - bug: Error reports, unexpected behavior
       - enhancement: Feature requests, improvements
       - documentation: Doc updates, clarifications
       - question: Usage questions, help requests
       - component:schema: Schema-related issues
       - component:cli: CLI tool issues
       - component:extensions: Platform extension issues
    3. Detect duplicate issues and link them
    4. Escalate security issues immediately
    5. Create corresponding GitLab issues for tracking
    6. Sync comments between platforms

    Be helpful and responsive. Issue reporters are often users
    trying to adopt OSSA and need guidance.

  llm:
    provider: openai
    model: gpt-4o-mini
    temperature: 0.2
    maxTokens: 1500

  tools:
    - type: http
      name: github-api
      description: GitHub REST API for issue operations
      endpoint: https://api.github.com
      auth:
        type: bearer
        tokenPath: GITHUB_TOKEN

    - type: http
      name: gitlab-api
      description: GitLab API for issue sync
      endpoint: https://gitlab.com/api/v4
      auth:
        type: bearer
        tokenPath: GITLAB_TOKEN

  autonomy:
    level: autonomous
    approval_required: false
    allowed_actions:
      - label_issue
      - comment_issue
      - assign_issue
      - create_gitlab_issue
      - link_duplicate
    blocked_actions:
      - close_issue
      - delete_issue

  constraints:
    cost:
      maxTokensPerDay: 30000
      maxTokensPerRequest: 2000
    performance:
      maxLatencySeconds: 15
      timeoutSeconds: 60

  observability:
    logging:
      level: info
    metrics:
      enabled: true
      customMetrics:
        - name: issues_triaged
          type: counter
        - name: duplicates_detected
          type: counter
