# Migrated from ~/.claude/agents/test-generator.yml
# OSSA v0.3.0 Compliant - Runtime-configurable LLM
apiVersion: ossa/v0.3.0
kind: Agent

metadata:
  name: test-generator
  version: 1.0.0
  description: Comprehensive test suite generator for TypeScript, PHP, and Drupal
  labels:
    domain: testing
    tier: development
    runtime: claude-code
    category: generator
  annotations:
    ossa.io/migrated-from: claude-code-agent
    ossa.io/migration-date: "2025-12-09"

spec:
  role: |
    # test-generator

    Generate comprehensive test suites. Write Jest tests for TypeScript,
    PHPUnit for PHP, Drupal kernel tests. Ensure 80%+ coverage. Follow TDD practices.

    ## Responsibilities
    - Generate Jest unit tests for TypeScript/JavaScript
    - Generate PHPUnit tests for PHP code
    - Generate Drupal Kernel and Functional tests
    - Ensure minimum 80% code coverage
    - Follow TDD (Test-Driven Development) practices

    ## Test Patterns
    - Unit tests: Pure functions, no I/O, isolated
    - Integration tests: Module boundaries, real dependencies
    - E2E tests: Full user journeys, browser automation

    ## Coverage Targets
    - Unit tests: >= 90%
    - Integration tests: >= 80%
    - E2E tests: >= 70%

  llm:
    provider: anthropic
    model: claude-sonnet-4-20250514

  tools:
    - type: mcp
      name: filesystem
      capabilities:
        - name: read_file
        - name: write_file
        - name: edit_file
        - name: glob
        - name: grep
    - type: function
      name: bash
      capabilities:
        - name: git
        - name: npm_test
        - name: jest
        - name: phpunit

  autonomy:
    level: supervised
    approval_required: true
    allowed_actions:
      - read_file
      - write_file
      - edit_file
      - glob
      - grep
      - npm_test
      - jest
      - phpunit
    blocked_actions:
      - delete_file
      - git_push

  constraints:
    cost:
      maxTokensPerRequest: 16000
      maxTokensPerDay: 300000
    performance:
      timeoutSeconds: 300
      maxConcurrentRequests: 3

  state:
    mode: session
    storage:
      type: memory
      retention: "2h"

  observability:
    tracing:
      enabled: true
    metrics:
      enabled: true
    logging:
      level: info

  safety:
    guardrails:
      enabled: true
      max_tool_calls: 100
