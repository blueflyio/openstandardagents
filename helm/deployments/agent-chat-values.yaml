# Agent Chat - Claude Code Replacement
# Helm values for deploying agent-chat from GitLab packages

agent:
  id: agent-chat
  name: "Agent Chat"
  version: "0.1.0"
  framework: "ossa"

image:
  registry: registry.bluefly.io
  repository: llm/agent-chat
  tag: "0.1.0"

gitlabPackage:
  enabled: true
  name: "@llm/agent-chat"
  version: "0.1.0"
  type: npm

replicaCount: 3

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 20  # High scaling for coding sessions
  targetCPUUtilizationPercentage: 60
  targetMemoryUtilizationPercentage: 70

resources:
  requests:
    cpu: 500m
    memory: 1Gi
  limits:
    cpu: 2000m
    memory: 4Gi  # Need more memory for code analysis

service:
  type: ClusterIP
  port: 3000
  metricsPort: 9090

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/websocket-services: "agent-chat"  # WebSocket support
  hosts:
    - host: chat.agents.orb.local
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: agent-chat-tls
      hosts:
        - chat.agents.orb.local

buildkit:
  enabled: true
  registryUrl: "http://buildkit.agent-buildkit.svc.cluster.local/api/v1"

phoenix:
  enabled: true
  project: "agent-chat"

env:
  - name: LOG_LEVEL
    value: "info"
  - name: CHAT_MODE
    value: "claude-replacement"
  - name: GITLAB_INTEGRATION
    value: "true"
  - name: GITLAB_URL
    value: "https://gitlab.bluefly.io"

secrets:
  enabled: true
  name: "agent-chat-secrets"  # Contains GitLab token, API keys

