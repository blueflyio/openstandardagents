# Agent Studio Mobile API
# Enables iOS/CarPlay/Watch remote coding

agent:
  id: agent-studio-api
  name: "Agent Studio Mobile API"
  version: "0.1.0"
  framework: "ossa"

image:
  registry: registry.bluefly.io
  repository: llm/agent-studio-api
  tag: "0.1.0"

gitlabPackage:
  enabled: true
  name: "@llm/agent-studio"
  version: "0.1.0"
  type: npm

replicaCount: 2

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

resources:
  requests:
    cpu: 200m
    memory: 512Mi
  limits:
    cpu: 1000m
    memory: 2Gi

service:
  type: ClusterIP
  port: 8080
  metricsPort: 9090

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/websocket-services: "agent-studio-api"
    nginx.ingress.kubernetes.io/cors-allow-origin: "agentst udio://*,https://studio.agents.orb.local"  # iOS deep links
  hosts:
    - host: studio-api.agents.orb.local
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: agent-studio-api-tls
      hosts:
        - studio-api.agents.orb.local

buildkit:
  enabled: true

phoenix:
  enabled: true
  project: "agent-studio"

env:
  - name: MOBILE_API_ENABLED
    value: "true"
  - name: DEVICE_TYPES
    value: "ios,ipad,carplay,watch"
  - name: WEBSOCKET_ENABLED
    value: "true"
  - name: GITLAB_INTEGRATION
    value: "true"

secrets:
  enabled: true
  name: "agent-studio-secrets"

