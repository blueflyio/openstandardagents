ossaVersion: '1.0'

agent:
  # Identity
  id: data-etl-processor
  name: Data ETL Processing Agent
  version: 1.0.0
  description: |
    High-performance data extraction, transformation, and loading agent
    with support for multiple data sources and destinations.
  role: data_processing
  tags:
    - etl
    - data-processing
    - transformation
    - analytics

  # Runtime
  runtime:
    type: k8s
    image: ossa/data-etl:1.0.0
    requirements:
      python: '>=3.11'
      packages:
        - pandas
        - sqlalchemy
        - apache-airflow
    resources:
      cpu: '2000m'
      memory: '4Gi'
    health_check:
      type: http
      endpoint: /health
      port: 3900

  # Capabilities
  capabilities:
    - name: extract_data
      description: Extract data from various sources
      input_schema:
        type: object
        required:
          - source_type
          - connection_string
        properties:
          source_type:
            type: string
            enum: [postgres, mysql, api, csv, json]
          connection_string:
            type: string
          query:
            type: string
      output_schema:
        type: object
        properties:
          data:
            type: array
          row_count:
            type: integer
      timeout_seconds: 600

    - name: transform_data
      description: Transform data using custom rules
      input_schema:
        type: object
        required:
          - data
          - transformations
        properties:
          data:
            type: array
          transformations:
            type: array
      output_schema:
        type: object
        properties:
          transformed_data:
            type: array
      timeout_seconds: 300

    - name: load_data
      description: Load data to destination
      input_schema:
        type: object
        required:
          - destination_type
          - data
        properties:
          destination_type:
            type: string
            enum: [postgres, s3, api]
          data:
            type: array
      output_schema:
        type: object
        properties:
          loaded_rows:
            type: integer

  # Policies
  policies:
    compliance:
      - soc2-type2
      - gdpr
    encryption: true
    audit: true
    pii_handling: encrypt

  # Integration
  integration:
    protocol: http
    endpoints:
      base_url: http://data-etl:3900
      health: /health
    auth:
      type: api_key

  # Monitoring
  monitoring:
    traces: true
    metrics: true
    logs: true
    health_check: http://localhost:3900/health

  # Metadata
  metadata:
    author: OSSA Data Team
    license: Apache-2.0
    keywords:
      - etl
      - data
      - analytics
