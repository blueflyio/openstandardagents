OSSA Registry MVP - Usage Guide
================================

The OSSA Registry MVP provides local agent discovery and publishing capabilities.

Quick Start
-----------

1. Publish an agent to the local registry:

   ossa publish examples/registry/agents/security-scanner --registry ./examples/registry

   This will:
   - Validate the agent manifest
   - Create a bundle tarball with SBOM and checksums
   - Update the registry index.json

2. Search for agents in the registry:

   ossa catalog search security --registry ./examples/registry

   Filter by role:
   ossa catalog search --role audit --registry ./examples/registry

   Filter by compliance:
   ossa catalog search --compliance fedramp --registry ./examples/registry

3. View detailed agent information:

   ossa catalog info security-scanner --registry ./examples/registry

   View as JSON:
   ossa catalog info security-scanner --json --registry ./examples/registry


Example Agents
--------------

This directory contains two example agents:

1. security-scanner (v1.0.0)
   - Role: audit
   - Automated security vulnerability scanner
   - Capabilities: CVE scanning, secret detection, SAST analysis
   - Compliance: FedRAMP, SOC2, ISO27001

2. code-reviewer (v1.0.0)
   - Role: workflow
   - Intelligent code review agent
   - Capabilities: code analysis, best practices, security review
   - Compliance: SOC2, ISO27001


Registry Structure
------------------

./examples/registry/
├── index.json              # Registry index (searchable metadata)
├── agents/
│   ├── security-scanner/
│   │   └── agent.yaml     # Agent manifest
│   └── code-reviewer/
│       └── agent.yaml     # Agent manifest
└── bundles/               # Published bundles (created by ossa publish)
    ├── security-scanner-1.0.0.tar.gz
    ├── security-scanner-1.0.0.tar.gz.sha256
    ├── code-reviewer-1.0.0.tar.gz
    └── code-reviewer-1.0.0.tar.gz.sha256


Bundle Contents
---------------

Each published bundle includes:
- agent.yaml: Agent manifest
- sbom.json: Software Bill of Materials (CycloneDX format)
- SHA-256 checksum for integrity verification


Publishing Workflow
-------------------

1. Create agent manifest (agent.yaml)
2. Run: ossa publish <agent-dir> --registry <registry-path>
3. Agent is added to registry index
4. Bundle is created with SBOM and checksum
5. Search and discover agents via catalog commands


Integration Tests
-----------------

Run the registry integration tests:

npm test tests/integration/registry/


Next Steps
----------

- Install published agents from the registry
- Remote registry support (GitLab/GitHub)
- Agent versioning and updates
- Digital signatures for bundles
- Registry mirroring and replication
