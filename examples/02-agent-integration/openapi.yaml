openapi: 3.1.0
info:
  title: Integration Agent API
  description: |
    OpenAPI specification for a Level 2 integration-ready OAAS agent.
    
    This agent demonstrates multi-framework compatibility with structured
    capabilities and comprehensive API documentation. Perfect for integration
    with existing systems and multi-framework environments.
    
    ## Features
    - Multi-framework support (MCP, LangChain, CrewAI, OpenAI)
    - Project analysis and code quality assessment
    - Automated code generation and templates
    - API documentation generation
    - Basic authentication and rate limiting
    - Health monitoring and metrics
    
    ## Framework Compatibility
    - **MCP**: Full server configuration for Claude Desktop
    - **LangChain**: Tool integration with structured outputs
    - **CrewAI**: Role-based agent configuration
    - **OpenAI**: Function calling compatible
    
    ## Usage
    This API is designed for integration environments where agents need
    to work across multiple frameworks and provide structured outputs.
  version: "2.0.0"
  contact:
    name: Integration Team
    email: integration@example.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

# OAAS Extension - Required for all OAAS agents
x-openapi-ai-agents-standard:
  version: "0.1.8"
  agent:
    name: "integration-agent"
    level: 2
    frameworks:
      mcp: enabled
      langchain: enabled
      crewai: enabled
      openai: enabled
    capabilities:
      - name: project_analysis
        description: "Comprehensive project analysis and assessment"
        input_schema: "./schemas/analyze-input.json"
        output_schema: "./schemas/analyze-output.json"
        frameworks: ["mcp", "langchain", "crewai"]
      - name: code_generation
        description: "Generate code templates and boilerplate"
        input_schema: "./schemas/generate-input.json"
        output_schema: "./schemas/generate-output.json"
        frameworks: ["langchain", "openai"]
      - name: api_documentation
        description: "Generate API documentation from code"
        frameworks: ["mcp", "langchain"]
    context_paths:
      - path: "./src"
        description: "Source code for analysis"
        type: "source"
      - path: "./docs"
        description: "Documentation files"
        type: "docs"
      - path: "./templates"
        description: "Code generation templates"
        type: "config"

servers:
  - url: https://api.integration.example.com/v2
    description: Production server
  - url: https://staging-api.integration.example.com/v2
    description: Staging server
  - url: http://localhost:3000/v2
    description: Local development server

paths:
  /health:
    get:
      summary: Health Check
      description: |
        Check agent health and readiness status.
        Includes basic dependency checks and performance metrics.
      operationId: getHealth
      tags:
        - Health
      responses:
        '200':
          description: Agent is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [healthy, degraded, unhealthy]
                    example: healthy
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-26T10:30:00Z"
                  version:
                    type: string
                    example: "2.0.0"
                  uptime:
                    type: integer
                    description: Uptime in seconds
                    example: 3600
                  dependencies:
                    type: object
                    properties:
                      filesystem:
                        type: string
                        enum: [healthy, unhealthy]
                        example: healthy
                      templates:
                        type: string
                        enum: [healthy, unhealthy]
                        example: healthy
                  performance:
                    type: object
                    properties:
                      avg_response_time:
                        type: number
                        description: Average response time in milliseconds
                        example: 120.5
                      success_rate:
                        type: number
                        minimum: 0
                        maximum: 1
                        example: 0.99
                required:
                  - status
                  - timestamp
                  - version
        '503':
          description: Agent is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /analyze/project:
    post:
      summary: Analyze Project
      description: |
        Perform comprehensive analysis of a project or codebase.
        
        Analyzes code quality, structure, dependencies, security issues,
        and provides recommendations for improvement.
        
        Supports multiple analysis types and can be customized based
        on project type and requirements.
      operationId: analyzeProject
      tags:
        - Analysis
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                project_path:
                  type: string
                  description: Path to project directory or repository URL
                  example: "/path/to/project"
                analysis_type:
                  type: string
                  enum: [full, security, performance, quality, dependencies, structure]
                  default: full
                  description: Type of analysis to perform
                options:
                  type: object
                  properties:
                    include_dependencies:
                      type: boolean
                      default: true
                      description: Include dependency analysis
                    check_security:
                      type: boolean
                      default: true
                      description: Include security vulnerability scanning
                    performance_analysis:
                      type: boolean
                      default: false
                      description: Include performance analysis
                    generate_report:
                      type: boolean
                      default: true
                      description: Generate detailed report
                    output_format:
                      type: string
                      enum: [json, markdown, html]
                      default: json
                      description: Output format for results
                  description: Analysis configuration options
                context:
                  type: object
                  properties:
                    project_type:
                      type: string
                      enum: [web, api, cli, library, mobile, desktop]
                      description: Type of project being analyzed
                    framework:
                      type: string
                      description: Framework or technology stack
                    target_environment:
                      type: string
                      enum: [development, staging, production]
                      default: development
                  description: Project context information
              required:
                - project_path
            example:
              project_path: "/path/to/my-project"
              analysis_type: "full"
              options:
                include_dependencies: true
                check_security: true
                generate_report: true
              context:
                project_type: "web"
                framework: "react"
      responses:
        '200':
          description: Analysis completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  analysis_id:
                    type: string
                    description: Unique identifier for this analysis
                    example: "analysis-123abc"
                  project_info:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "my-project"
                      path:
                        type: string
                        example: "/path/to/my-project"
                      type:
                        type: string
                        example: "web"
                      language:
                        type: string
                        example: "javascript"
                      framework:
                        type: string
                        example: "react"
                  results:
                    type: object
                    properties:
                      overall_score:
                        type: number
                        minimum: 0
                        maximum: 100
                        description: Overall project quality score
                        example: 85.5
                      quality:
                        type: object
                        properties:
                          code_quality:
                            type: number
                            minimum: 0
                            maximum: 100
                            example: 90
                          maintainability:
                            type: number
                            minimum: 0
                            maximum: 100
                            example: 85
                          test_coverage:
                            type: number
                            minimum: 0
                            maximum: 100
                            example: 75
                          documentation:
                            type: number
                            minimum: 0
                            maximum: 100
                            example: 60
                      security:
                        type: object
                        properties:
                          vulnerabilities:
                            type: array
                            items:
                              type: object
                              properties:
                                severity:
                                  type: string
                                  enum: [low, medium, high, critical]
                                type:
                                  type: string
                                description:
                                  type: string
                                file:
                                  type: string
                                line:
                                  type: integer
                          security_score:
                            type: number
                            minimum: 0
                            maximum: 100
                            example: 95
                      dependencies:
                        type: object
                        properties:
                          total_dependencies:
                            type: integer
                            example: 45
                          outdated_dependencies:
                            type: integer
                            example: 3
                          security_issues:
                            type: integer
                            example: 1
                          dependency_tree:
                            type: array
                            items:
                              type: object
                              properties:
                                name:
                                  type: string
                                version:
                                  type: string
                                status:
                                  type: string
                                  enum: [up_to_date, outdated, vulnerable]
                  recommendations:
                    type: array
                    items:
                      type: object
                      properties:
                        category:
                          type: string
                          enum: [security, performance, quality, maintainability, dependencies]
                        priority:
                          type: string
                          enum: [low, medium, high, critical]
                        title:
                          type: string
                        description:
                          type: string
                        suggested_action:
                          type: string
                        resources:
                          type: array
                          items:
                            type: string
                            format: uri
                    description: Actionable recommendations for improvement
                  metadata:
                    type: object
                    properties:
                      analyzed_at:
                        type: string
                        format: date-time
                        example: "2025-01-26T10:30:00Z"
                      analysis_duration:
                        type: number
                        description: Analysis duration in seconds
                        example: 45.2
                      files_analyzed:
                        type: integer
                        example: 127
                      lines_of_code:
                        type: integer
                        example: 5420
                    required:
                      - analyzed_at
                      - analysis_duration
                required:
                  - analysis_id
                  - project_info
                  - results
                  - recommendations
                  - metadata
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Project not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /generate/code:
    post:
      summary: Generate Code
      description: |
        Generate code templates, boilerplate, or complete implementations
        based on specifications and requirements.
        
        Supports multiple programming languages and frameworks with
        customizable templates and coding standards.
      operationId: generateCode
      tags:
        - Generation
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                template:
                  type: string
                  enum: [api_endpoint, component, model, controller, service, test, config]
                  description: Type of code template to generate
                  example: api_endpoint
                specification:
                  type: object
                  properties:
                    name:
                      type: string
                      description: Name of the component/function to generate
                      example: UserService
                    description:
                      type: string
                      description: Description of functionality
                      example: Service for managing user operations
                    parameters:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                          type:
                            type: string
                          required:
                            type: boolean
                          description:
                            type: string
                      description: Function/method parameters
                    return_type:
                      type: string
                      description: Expected return type
                      example: Promise<User>
                    dependencies:
                      type: array
                      items:
                        type: string
                      description: Required dependencies or imports
                  description: Code specification details
                options:
                  type: object
                  properties:
                    language:
                      type: string
                      enum: [javascript, typescript, python, java, go, rust, csharp]
                      default: typescript
                      description: Programming language
                    framework:
                      type: string
                      enum: [react, vue, angular, express, fastapi, spring, gin]
                      description: Framework to use (if applicable)
                    style:
                      type: string
                      enum: [functional, object_oriented, modular]
                      default: functional
                      description: Code style preference
                    include_tests:
                      type: boolean
                      default: false
                      description: Generate accompanying test files
                    include_docs:
                      type: boolean
                      default: true
                      description: Include inline documentation
                    coding_standards:
                      type: string
                      enum: [standard, strict, relaxed]
                      default: standard
                      description: Coding standards to apply
                  description: Code generation options
              required:
                - template
                - specification
            example:
              template: "api_endpoint"
              specification:
                name: "getUserById"
                description: "Retrieve user information by ID"
                parameters:
                  - name: "id"
                    type: "string"
                    required: true
                    description: "User identifier"
                return_type: "Promise<User>"
              options:
                language: "typescript"
                framework: "express"
                include_tests: true
      responses:
        '200':
          description: Code generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  generated_code:
                    type: object
                    properties:
                      main:
                        type: string
                        description: Primary generated code
                      tests:
                        type: string
                        description: Generated test code (if requested)
                      types:
                        type: string
                        description: Type definitions (if applicable)
                      documentation:
                        type: string
                        description: Generated documentation
                    description: Generated code files
                  files:
                    type: array
                    items:
                      type: object
                      properties:
                        filename:
                          type: string
                        content:
                          type: string
                        type:
                          type: string
                          enum: [source, test, config, documentation]
                    description: Individual files to be created
                  metadata:
                    type: object
                    properties:
                      generated_at:
                        type: string
                        format: date-time
                      template_used:
                        type: string
                      language:
                        type: string
                      framework:
                        type: string
                      lines_generated:
                        type: integer
                      estimated_complexity:
                        type: string
                        enum: [simple, moderate, complex]
                    required:
                      - generated_at
                      - template_used
                      - language
                required:
                  - generated_code
                  - metadata
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          description: Invalid specification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /generate/docs:
    post:
      summary: Generate API Documentation
      description: |
        Generate comprehensive API documentation from code analysis
        or existing specifications.
        
        Supports multiple output formats and documentation standards.
      operationId: generateDocs
      tags:
        - Documentation
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                source:
                  type: object
                  properties:
                    type:
                      type: string
                      enum: [code, openapi, postman, swagger]
                      description: Source type for documentation generation
                    path:
                      type: string
                      description: Path to source files or API specification
                    endpoints:
                      type: array
                      items:
                        type: string
                      description: Specific endpoints to document (optional)
                  required:
                    - type
                    - path
                  description: Documentation source configuration
                options:
                  type: object
                  properties:
                    format:
                      type: string
                      enum: [markdown, html, pdf, openapi, postman]
                      default: markdown
                      description: Output documentation format
                    style:
                      type: string
                      enum: [minimal, standard, comprehensive]
                      default: standard
                      description: Documentation detail level
                    include_examples:
                      type: boolean
                      default: true
                      description: Include request/response examples
                    include_schemas:
                      type: boolean
                      default: true
                      description: Include data schema definitions
                    generate_sdk_snippets:
                      type: boolean
                      default: false
                      description: Generate SDK code snippets
                    languages:
                      type: array
                      items:
                        type: string
                        enum: [javascript, python, java, go, php, ruby]
                      description: Languages for SDK snippets
                  description: Documentation generation options
              required:
                - source
      responses:
        '200':
          description: Documentation generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  documentation:
                    type: object
                    properties:
                      content:
                        type: string
                        description: Generated documentation content
                      format:
                        type: string
                        description: Documentation format
                      sections:
                        type: array
                        items:
                          type: object
                          properties:
                            title:
                              type: string
                            content:
                              type: string
                            type:
                              type: string
                              enum: [overview, authentication, endpoints, schemas, examples]
                        description: Documentation sections
                  files:
                    type: array
                    items:
                      type: object
                      properties:
                        filename:
                          type: string
                        content:
                          type: string
                        format:
                          type: string
                    description: Generated documentation files
                  metadata:
                    type: object
                    properties:
                      generated_at:
                        type: string
                        format: date-time
                      source_analyzed:
                        type: string
                      endpoints_documented:
                        type: integer
                      schemas_included:
                        type: integer
                      examples_generated:
                        type: integer
                required:
                  - documentation
                  - metadata

  /frameworks/mcp/server:
    get:
      summary: MCP Server Configuration
      description: |
        Get Model Context Protocol server configuration for Claude Desktop integration.
        
        Returns the complete MCP server configuration that can be used
        directly in Claude Desktop's configuration file.
      operationId: getMCPServerConfig
      tags:
        - Framework Integration
      responses:
        '200':
          description: MCP server configuration
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: "integration-agent-mcp"
                  version:
                    type: string
                    example: "2.0.0"
                  description:
                    type: string
                    example: "Integration Agent MCP Server"
                  tools:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        description:
                          type: string
                        parameters:
                          type: object
                    description: Available MCP tools
                  server_config:
                    type: object
                    properties:
                      command:
                        type: string
                        example: "npx"
                      args:
                        type: array
                        items:
                          type: string
                        example: ["integration-agent-mcp"]
                      env:
                        type: object
                        additionalProperties:
                          type: string
                    description: MCP server startup configuration

  /frameworks/langchain/tools:
    get:
      summary: LangChain Tool Configuration
      description: |
        Get LangChain-compatible tool definitions for all agent capabilities.
        
        Returns tool configurations that can be directly imported
        into LangChain workflows.
      operationId: getLangChainTools
      tags:
        - Framework Integration
      responses:
        '200':
          description: LangChain tool configurations
          content:
            application/json:
              schema:
                type: object
                properties:
                  tools:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                        description:
                          type: string
                        parameters:
                          type: object
                        return_direct:
                          type: boolean
                        verbose:
                          type: boolean
                    description: LangChain tool definitions
                  usage_examples:
                    type: array
                    items:
                      type: object
                      properties:
                        tool_name:
                          type: string
                        example_code:
                          type: string
                        description:
                          type: string
                    description: Usage examples for each tool

components:
  schemas:
    Error:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              description: Machine-readable error code
              example: "INVALID_REQUEST"
            message:
              type: string
              description: Human-readable error message
              example: "The specified project path could not be found"
            details:
              type: object
              description: Additional error context
              properties:
                field:
                  type: string
                value:
                  type: string
                expected:
                  type: string
              example:
                field: "project_path"
                value: "/nonexistent/path"
                expected: "valid directory path"
            timestamp:
              type: string
              format: date-time
              example: "2025-01-26T10:30:00Z"
            request_id:
              type: string
              description: Request identifier for debugging
              example: "req-abc123"
          required:
            - code
            - message
            - timestamp
      required:
        - error

  responses:
    BadRequest:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: "INVALID_REQUEST"
              message: "Missing required parameter: project_path"
              timestamp: "2025-01-26T10:30:00Z"
              request_id: "req-abc123"
    
    Unauthorized:
      description: Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: "UNAUTHORIZED"
              message: "Valid API key required"
              timestamp: "2025-01-26T10:30:00Z"
    
    TooManyRequests:
      description: Rate limit exceeded
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: "RATE_LIMIT_EXCEEDED"
              message: "Too many requests. Limit: 100 requests per hour"
              timestamp: "2025-01-26T10:30:00Z"
      headers:
        X-RateLimit-Limit:
          description: Request limit per hour
          schema:
            type: integer
            example: 100
        X-RateLimit-Remaining:
          description: Remaining requests in current window
          schema:
            type: integer
            example: 45
        X-RateLimit-Reset:
          description: Time when rate limit resets
          schema:
            type: integer
            example: 1643208600
    
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: "INTERNAL_ERROR"
              message: "An unexpected error occurred while processing your request"
              timestamp: "2025-01-26T10:30:00Z"
              request_id: "req-abc123"

  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: API key for authentication

security:
  - ApiKeyAuth: []

tags:
  - name: Health
    description: Health checks and system status
  - name: Analysis
    description: Project and code analysis capabilities
  - name: Generation
    description: Code and template generation
  - name: Documentation
    description: API documentation generation
  - name: Framework Integration
    description: Multi-framework compatibility endpoints

externalDocs:
  description: Integration Agent Documentation
  url: https://docs.example.com/agents/integration