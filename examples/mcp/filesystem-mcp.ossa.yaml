apiVersion: ossa/v0.3.6
kind: Agent
metadata:
  name: filesystem-assistant
  version: 1.0.0
  description: "File management assistant with MCP filesystem server"
  labels:
    framework: mcp
    capability: filesystem
    environment: development

spec:
  model:
    provider: anthropic
    model: claude-sonnet-4-20250514
    parameters:
      temperature: 0.7
      maxTokens: 4096

  instructions: |
    You are a filesystem assistant with access to local files via MCP.
    You can read, list, and analyze files in the workspace directory.

    Use the filesystem MCP server to:
    - List directory contents
    - Read file contents
    - Search for files
    - Analyze file structures

    Always verify file paths before accessing them.

  tools:
    - name: list_directory
      description: "List contents of a directory"
      parameters:
        type: object
        required: [path]
        properties:
          path:
            type: string
            description: "Directory path to list"

    - name: read_file
      description: "Read contents of a file"
      parameters:
        type: object
        required: [path]
        properties:
          path:
            type: string
            description: "File path to read"

  extensions:
    mcp:
      servers:
        - name: filesystem
          description: "Local filesystem access via MCP"
          transport:
            type: stdio
            command: npx
            args:
              - "-y"
              - "@modelcontextprotocol/server-filesystem"
              - "/workspace"
          version: "0.1.0"
          capabilities:
            resources:
              subscribe: true
              listChanged: true
            tools:
              listChanged: true
            logging:
              enabled: true
              level: info

      resources:
        - uri: "file:///workspace/README.md"
          name: "Project README"
          description: "Main project documentation"
          mimeType: "text/markdown"
          annotations:
            audience: ["user", "assistant"]
            priority: 0.9

        - uri: "file:///workspace/package.json"
          name: "Package Configuration"
          description: "NPM package configuration"
          mimeType: "application/json"
          annotations:
            audience: ["assistant"]
            priority: 0.8

      capabilities:
        resources:
          subscribe: true
          listChanged: true
        tools:
          listChanged: true
        logging:
          enabled: true
          level: info
