apiVersion: open-standards-scalable-agents/v0.1.9
kind: Agent
metadata:
  name: ossa-schema-validator
  version: "1.0.0"
  description: "OSSA Schema Validator - Validates and enforces schema compliance for all OSSA artifacts, configurations, and communications"
  tags: ["monitor", "validation", "schema", "standards"]
  
spec:
  type: monitor
  role: validator
  priority: high
  
  capabilities:
    primary:
      - real_time_schema_validation
      - multi_format_schema_support
      - validation_error_reporting
      - schema_evolution_management
      - custom_validation_rules
      - validation_performance_optimization
      
    secondary:
      - schema_documentation_generation
      - validation_analytics_and_metrics
      - schema_compatibility_testing
      - migration_assistance
      
  responsibilities:
    - "Validate all OSSA artifacts against their schemas"
    - "Enforce schema compliance across the ecosystem"
    - "Manage schema evolution and versioning"
    - "Provide detailed validation error reporting"
    - "Optimize validation performance and accuracy"
    - "Generate schema documentation and guides"
    
  interfaces:
    api:
      protocol: "REST"
      version: "v1"
      endpoints:
        - "/validate/agent"
        - "/validate/manifest"
        - "/validate/config"
        - "/validate/event"
        - "/validate/custom"
        - "/schemas"
        
    cli:
      commands:
        - "validate agent [path]"
        - "validate manifest [file]"
        - "validate config [file]"
        - "validate all [directory]"
        
  supported_schemas:
    core_schemas:
      agent_manifest:
        version: "v0.1.9"
        format: "yaml"
        description: "Agent definition and configuration"
        validation_rules:
          - required_fields_present
          - valid_apiVersion
          - compliant_metadata
          - valid_capabilities
          - proper_interface_definitions
          
      project_registry:
        version: "v0.1.9"
        format: "yaml"
        description: "Project registry and discovery"
        validation_rules:
          - valid_project_structure
          - agent_count_accuracy
          - capability_mapping_correct
          - compliance_level_valid
          
      workspace_config:
        version: "v0.1.9"
        format: "yaml"
        description: "Workspace configuration"
        validation_rules:
          - valid_workspace_structure
          - template_references_exist
          - dependency_resolution_valid
          
    interface_schemas:
      api_contracts:
        format: "openapi"
        description: "API endpoint contracts"
        validation_rules:
          - openapi_spec_compliance
          - endpoint_documentation_complete
          - error_responses_defined
          - security_schemes_proper
          
      event_schemas:
        format: "json_schema"
        description: "Event message schemas"
        validation_rules:
          - event_structure_valid
          - payload_schema_correct
          - metadata_fields_present
          
    configuration_schemas:
      deployment_config:
        format: "yaml"
        description: "Deployment configuration"
        validation_rules:
          - resource_limits_defined
          - health_checks_configured
          - dependencies_specified
          
      monitoring_config:
        format: "yaml"
        description: "Monitoring and metrics configuration"
        validation_rules:
          - metrics_endpoints_defined
          - alert_rules_valid
          - dashboard_config_complete
          
  validation_engine:
    multi_format_support:
      yaml:
        parser: "yaml-parser"
        validator: "ajv"
        features: ["custom_types", "conditional_validation"]
        
      json:
        parser: "json-parser"
        validator: "ajv"
        features: ["draft_2020_12", "custom_keywords"]
        
      openapi:
        parser: "openapi-parser"
        validator: "swagger-validator"
        features: ["v3.1", "extensions", "custom_formats"]
        
    validation_strategies:
      strict:
        description: "No validation errors allowed"
        use_case: "production_deployments"
        fail_fast: true
        
      lenient:
        description: "Warnings allowed, critical errors fail"
        use_case: "development_environments"
        fail_fast: false
        
      progressive:
        description: "Gradual compliance improvement"
        use_case: "migration_scenarios"
        grace_period: "30_days"
        
  error_reporting:
    error_categories:
      structural:
        - missing_required_fields
        - invalid_field_types
        - malformed_structure
        
      semantic:
        - invalid_references
        - constraint_violations
        - logical_inconsistencies
        
      compliance:
        - ossa_standard_violations
        - best_practice_deviations
        - security_requirement_failures
        
    error_formats:
      detailed:
        includes: ["path", "message", "suggestion", "examples"]
        format: "json"
        
      summary:
        includes: ["count", "severity", "categories"]
        format: "json"
        
      human_readable:
        includes: ["description", "fix_guidance", "documentation_links"]
        format: "markdown"
        
  schema_evolution:
    versioning_strategy:
      semantic_versioning: true
      backward_compatibility: "minor_versions"
      breaking_changes: "major_versions_only"
      
    migration_support:
      automated_migration:
        - field_renames
        - default_value_additions
        - structure_simplifications
        
      manual_migration:
        - breaking_structure_changes
        - semantic_changes
        - complex_transformations
        
    compatibility_testing:
      - cross_version_validation
      - migration_path_verification
      - backward_compatibility_checks
      
  performance_optimization:
    caching_strategies:
      schema_cache:
        ttl: "1_hour"
        invalidation: "on_schema_update"
        
      validation_cache:
        ttl: "5_minutes"
        key: "content_hash"
        
    parallel_validation:
      batch_processing: true
      worker_pool_size: 4
      timeout_per_validation: "30_seconds"
      
  deployment:
    runtime: "node:18-alpine"
    resources:
      cpu: "750m"
      memory: "1.5Gi"
    volumes:
      - schemas: "/schemas"
      - cache: "/cache"
    dependencies:
      - schema-registry
      - validation-engine
      - error-reporting-service
      
  monitoring:
    health_check: "/health"
    metrics:
      - validation_requests_per_second
      - validation_success_rate
      - validation_error_distribution
      - schema_cache_hit_rate
      - validation_latency_percentiles
      
  compliance:
    ossa_level: "standard"
    security_clearance: "medium"