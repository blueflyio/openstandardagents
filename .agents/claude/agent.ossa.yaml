apiVersion: ossa/v0.3.0
kind: Agent

metadata:
  name: claude-desktop-agent
  version: 1.0.0
  description: |
    OSSA-compliant agent for Claude Desktop (Anthropic).
    Provides conversational AI with MCP tool integration and file system access.

  labels:
    ossa-version: v0.3.0
    platform: claude-desktop
    provider: anthropic
    category: assistant

spec:
  taxonomy:
    domain: conversation
    subdomain: general-assistance
    capability: multi-modal

  role: |
    You are Claude, an AI assistant running in Claude Desktop.

    Your responsibilities:
    1. Engage in helpful, harmless, and honest conversations
    2. Use MCP tools to interact with local systems
    3. Assist with research, writing, and analysis
    4. Provide coding and technical support
    5. Maintain context across conversations

    Be thoughtful, accurate, and respectful.

  llm:
    provider: ${LLM_PROVIDER:-anthropic}
    model: ${LLM_MODEL:-claude-sonnet-4}
    temperature: 0.7
    maxTokens: 8000

    fallback_models:
      - provider: ${LLM_FALLBACK_PROVIDER_1:-openai}
        model: ${LLM_FALLBACK_MODEL_1:-gpt-4o}

    retry_config:
      max_attempts: 3
      backoff_strategy: exponential

    cost_tracking:
      enabled: true
      budget_alert_threshold: 50.00
      cost_allocation_tags:
        platform: claude-desktop
        team: assistant-agents

  capabilities:
    - name: conversation
      description: Engage in natural conversation
      input_schema:
        type: object
        required: [message]
        properties:
          message:
            type: string
          context:
            type: array
            items:
              type: object
            description: Previous messages
          attachments:
            type: array
            items:
              type: object
      output_schema:
        type: object
        properties:
          response:
            type: string
          thinking:
            type: string
          tool_uses:
            type: array
            items:
              type: object

    - name: file_operations
      description: Read and write files via MCP
      input_schema:
        type: object
        required: [operation, path]
        properties:
          operation:
            type: string
            enum: [read, write, search, list]
          path:
            type: string
          content:
            type: string
          pattern:
            type: string
      output_schema:
        type: object
        properties:
          status:
            type: string
          result:
            type: string
          error:
            type: string

    - name: web_research
      description: Fetch and analyze web content
      input_schema:
        type: object
        required: [query]
        properties:
          query:
            type: string
          mode:
            type: string
            enum: [search, fetch, analyze]
          url:
            type: string
      output_schema:
        type: object
        properties:
          results:
            type: array
            items:
              type: object
          summary:
            type: string
          sources:
            type: array
            items:
              type: string

    - name: code_execution
      description: Execute code via MCP tools
      input_schema:
        type: object
        required: [language, code]
        properties:
          language:
            type: string
          code:
            type: string
          environment:
            type: object
      output_schema:
        type: object
        properties:
          output:
            type: string
          error:
            type: string
          exitCode:
            type: integer

  runtime:
    type: local
    config:
      timeout: 300
      retries: 2

  integration:
    platform: claude-desktop
    version: ">=1.0.0"
    configuration:
      mcp_enabled: true
      mcp_servers:
        - filesystem
        - brave-search
        - github
        - postgres
      max_context_tokens: 200000
