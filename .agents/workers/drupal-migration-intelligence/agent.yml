ossaVersion: "1.0"
agent:
  id: drupal-migration-intelligence
  name: Drupal Migration Intelligence
  version: 0.1.9
  description: Intelligent Drupal migration specialist for D7 to D11 migrations
    with automated assessment and planning
  role: custom
  tags:
    - worker
    - drupal-migration
    - cms
    - drupal-platform
  runtime:
    type: docker
    resources:
      cpu: 2
      memory: 4Gi
  capabilities:
    - name: assess_drupal_site
      description: Comprehensive assessment of existing Drupal 7 site for migration
        readiness
      input_schema:
        type: object
        required:
          - siteInfo
        properties:
          siteInfo:
            type: object
            properties:
              drupalRoot:
                type: string
              databaseUrl:
                type: string
              filesPath:
                type: string
              version:
                type: string
              multisite:
                type: boolean
          assessmentOptions:
            type: object
            properties:
              includeCustomCode:
                type: boolean
                default: true
              analyzeContribModules:
                type: boolean
                default: true
              checkThemeCompatibility:
                type: boolean
                default: true
              assessContent:
                type: boolean
                default: true
              securityAudit:
                type: boolean
                default: true
      output_schema:
        type: object
        properties:
          assessmentId:
            type: string
          migrationComplexity:
            type: string
            enum:
              - low
              - medium
              - high
              - critical
          compatibilityReport:
            type: object
            properties:
              modules:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    current_version:
                      type: string
                    d11_status:
                      type: string
                      enum:
                        - available
                        - ported
                        - needs_porting
                        - deprecated
                    replacement_module:
                      type: string
                    migration_effort:
                      type: string
                      enum:
                        - trivial
                        - low
                        - medium
                        - high
                        - critical
              themes:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    d11_compatible:
                      type: boolean
                    migration_strategy:
                      type: string
              customCode:
                type: object
                properties:
                  hooks:
                    type: array
                  entities:
                    type: array
                  apis_deprecated:
                    type: array
                  security_issues:
                    type: array
          contentAnalysis:
            type: object
            properties:
              contentTypes:
                type: array
              fieldMapping:
                type: object
              mediaFiles:
                type: object
              taxonomies:
                type: array
              users:
                type: object
          recommendations:
            type: array
            items:
              type: object
              properties:
                category:
                  type: string
                priority:
                  type: string
                  enum:
                    - critical
                    - high
                    - medium
                    - low
                action:
                  type: string
                effort_estimate:
                  type: string
          timeline:
            type: object
      timeout_seconds: 300000
    - name: generate_migration_plan
      description: Create detailed migration plan with phases and dependencies
      input_schema:
        type: object
        required:
          - assessmentId
          - migrationGoals
        properties:
          assessmentId:
            type: string
          migrationGoals:
            type: object
            properties:
              targetDrupalVersion:
                type: string
                default: 11.x
              hostingEnvironment:
                type: string
                enum:
                  - acquia
                  - pantheon
                  - platform_sh
                  - aws
                  - custom
              timeline:
                type: string
              budget:
                type: string
              riskTolerance:
                type: string
                enum:
                  - low
                  - medium
                  - high
              performanceRequirements:
                type: object
      output_schema:
        type: object
        properties:
          migrationPlanId:
            type: string
          phases:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                duration:
                  type: string
                dependencies:
                  type: array
                tasks:
                  type: array
                risks:
                  type: array
                deliverables:
                  type: array
          resourceRequirements:
            type: object
            properties:
              developers:
                type: number
              testers:
                type: number
              devops:
                type: number
              timeline:
                type: string
              budget_estimate:
                type: string
          riskAssessment:
            type: array
            items:
              type: object
              properties:
                risk:
                  type: string
                probability:
                  type: string
                impact:
                  type: string
                mitigation:
                  type: string
      timeout_seconds: 180000
    - name: execute_content_migration
      description: Execute content migration with field mapping and validation
      input_schema:
        type: object
        required:
          - migrationPlanId
          - contentTypes
        properties:
          migrationPlanId:
            type: string
          contentTypes:
            type: array
          migrationOptions:
            type: object
            properties:
              batchSize:
                type: number
                default: 100
              validateMigration:
                type: boolean
                default: true
              rollbackOnError:
                type: boolean
                default: true
              preserveIds:
                type: boolean
                default: false
      output_schema:
        type: object
        properties:
          migrationJobId:
            type: string
          status:
            type: string
          progress:
            type: object
            properties:
              total_items:
                type: number
              processed:
                type: number
              successful:
                type: number
              failed:
                type: number
              errors:
                type: array
          validation_report:
            type: object
      timeout_seconds: 3600000
    - name: validate_migration
      description: Comprehensive validation of migrated content and functionality
      input_schema:
        type: object
        required:
          - migrationJobId
        properties:
          migrationJobId:
            type: string
          validationChecks:
            type: array
            items:
              type: string
              enum:
                - content_integrity
                - field_mapping
                - media_files
                - user_accounts
                - taxonomies
                - url_aliases
                - custom_entities
      output_schema:
        type: object
        properties:
          validationId:
            type: string
          overallStatus:
            type: string
            enum:
              - passed
              - failed
              - warning
          checks:
            type: array
            items:
              type: object
              properties:
                check:
                  type: string
                status:
                  type: string
                details:
                  type: object
                issues:
                  type: array
          recommendations:
            type: array
      timeout_seconds: 900000
  policies:
    audit: true
  integration:
    protocol: http
    endpoints:
      base_url: http://localhost:3000
      health: /health
      metrics: /metrics
    auth:
      type: api-key
  monitoring:
    traces: true
    metrics: true
    logs: true
  metadata:
    author: Bluefly Drupal Platform Team
    license: Apache-2.0
    repository: https://gitlab.bluefly.io/llm/drupal-agents
