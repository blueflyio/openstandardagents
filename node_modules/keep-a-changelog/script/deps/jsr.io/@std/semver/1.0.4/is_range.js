"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isRange = isRange;
const _constants_js_1 = require("./_constants.js");
const _constants_js_2 = require("./_constants.js");
const is_semver_js_1 = require("./is_semver.js");
function isComparator(value) {
    if (value === null || value === undefined || Array.isArray(value) ||
        typeof value !== "object")
        return false;
    if (value === _constants_js_2.ALL)
        return true;
    const { operator } = value;
    return ((operator === undefined ||
        _constants_js_1.OPERATORS.includes(operator)) &&
        (0, is_semver_js_1.isSemVer)(value));
}
/**
 * Does a deep check on the object to determine if its a valid range.
 *
 * Objects with extra fields are still considered valid if they have at
 * least the correct fields.
 *
 * Adds a type assertion if true.
 *
 * @example Usage
 * ```ts
 * import { isRange } from "@std/semver/is-range";
 * import { assert } from "@std/assert";
 *
 * const range = [[{ major: 1, minor: 2, patch: 3 }]];
 * assert(isRange(range));
 * assert(!isRange({}));
 * ```
 * @param value The value to check if its a valid Range
 * @returns True if its a valid Range otherwise false.
 */
function isRange(value) {
    return Array.isArray(value) &&
        value.every((r) => Array.isArray(r) && r.every((c) => isComparator(c)));
}
